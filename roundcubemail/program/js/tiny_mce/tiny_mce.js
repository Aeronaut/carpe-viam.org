(function(c){var i=/^\s*|\s*$/g,j="B".replace(/A(.)|B/,"$1")==="$1",g={majorVersion:"3",minorVersion:"4.2",releaseDate:"2011-04-07",_init:function(){function b(e){if(e.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(e.src)){if(/_(src|dev)\.js/g.test(e.src))a.suffix="_src";if((m=e.src.indexOf("?"))!=-1)a.query=e.src.substring(m+1);a.baseURL=e.src.substring(0,e.src.lastIndexOf("/"));if(k&&a.baseURL.indexOf("://")==-1&&a.baseURL.indexOf("/")!==0)a.baseURL=k+a.baseURL;return a.baseURL}return null}
var a=this,f=document,d=navigator,n=d.userAgent,k,m,o;a.isOpera=c.opera&&opera.buildNumber;a.isWebKit=/WebKit/.test(n);a.isIE=!a.isWebKit&&!a.isOpera&&/MSIE/gi.test(n)&&/Explorer/gi.test(d.appName);a.isIE6=a.isIE&&/MSIE [56]/.test(n);a.isGecko=!a.isWebKit&&/Gecko/.test(n);a.isMac=n.indexOf("Mac")!=-1;a.isAir=/adobeair/i.test(n);a.isIDevice=/(iPad|iPhone)/.test(n);if(c.tinyMCEPreInit)a.suffix=tinyMCEPreInit.suffix,a.baseURL=tinyMCEPreInit.base,a.query=tinyMCEPreInit.query;else{a.suffix="";n=f.getElementsByTagName("base");
for(d=0;d<n.length;d++)if(o=n[d].href)/^https?:\/\/[^\/]+$/.test(o)&&(o+="/"),k=o?o.match(/.*\//)[0]:"";n=f.getElementsByTagName("script");for(d=0;d<n.length;d++)if(b(n[d]))return;if(f=f.getElementsByTagName("head")[0]){n=f.getElementsByTagName("script");for(d=0;d<n.length;d++)if(b(n[d]))break}}},is:function(b,a){if(!a)return b!==void 0;if(a=="array"&&b.hasOwnProperty&&b instanceof Array)return!0;return typeof b==a},makeMap:function(b,a,f){b=b||[];typeof b=="string"&&(b=b.split(a||","));f=f||{};for(a=
b.length;a--;)f[b[a]]={};return f},each:function(b,a,f){var d,n;if(!b)return 0;f=f||b;if(b.length!==void 0){d=0;for(n=b.length;d<n;d++)if(a.call(f,b[d],d,b)===!1)return 0}else for(d in b)if(b.hasOwnProperty(d)&&a.call(f,b[d],d,b)===!1)return 0;return 1},map:function(b,a){var f=[];g.each(b,function(b){f.push(a(b))});return f},grep:function(b,a){var f=[];g.each(b,function(b){(!a||a(b))&&f.push(b)});return f},inArray:function(b,a){var f,d;if(b){f=0;for(d=b.length;f<d;f++)if(b[f]===a)return f}return-1},
extend:function(b,a){var f,d,n=arguments;f=1;for(d=n.length;f<d;f++)a=n[f],g.each(a,function(a,d){a!==void 0&&(b[d]=a)});return b},trim:function(b){return(b?""+b:"").replace(i,"")},create:function(b,a,f){var d,n,k,m,o,e=0,b=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(b);k=b[3].match(/(^|\.)(\w+)$/i)[2];n=this.createNS(b[3].replace(/\.\w+$/,""),f);if(!n[k])if(b[2]=="static"){if(n[k]=a,this.onCreate)this.onCreate(b[2],b[3],n[k])}else{a[k]||(a[k]=function(){},e=1);n[k]=a[k];this.extend(n[k].prototype,a);
if(b[5])d=this.resolve(b[5]).prototype,m=b[5].match(/\.(\w+)$/i)[1],o=n[k],n[k]=e?function(){return d[m].apply(this,arguments)}:function(){this.parent=d[m];return o.apply(this,arguments)},n[k].prototype[k]=n[k],this.each(d,function(a,e){n[k].prototype[e]=d[e]}),this.each(a,function(a,e){d[e]?n[k].prototype[e]=function(){this.parent=d[e];return a.apply(this,arguments)}:e!=k&&(n[k].prototype[e]=a)});this.each(a["static"],function(a,e){n[k][e]=a});if(this.onCreate)this.onCreate(b[2],b[3],n[k].prototype)}},
walk:function(b,a,f,d){d=d||this;b&&(f&&(b=b[f]),g.each(b,function(b,k){if(a.call(d,b,k,f)===!1)return!1;g.walk(b,a,f,d)}))},createNS:function(b,a){var f,d,a=a||c,b=b.split(".");for(f=0;f<b.length;f++)d=b[f],a[d]||(a[d]={}),a=a[d];return a},resolve:function(b,a){var f,d,a=a||c,b=b.split(".");f=0;for(d=b.length;f<d;f++)if(a=a[b[f]],!a)break;return a},addUnload:function(b,a){var f=this,b={func:b,scope:a||this};if(f.unloads)f.unloads.push(b);else{var d=function(){var a=f.unloads,b,o;if(a){for(o in a)(b=
a[o])&&b.func&&b.func.call(b.scope,1);c.detachEvent?(c.detachEvent("onbeforeunload",n),c.detachEvent("onunload",d)):c.removeEventListener&&c.removeEventListener("unload",d,!1);f.unloads=w=d=0;c.CollectGarbage&&CollectGarbage()}},n=function(){var a=document;if(a.readyState=="interactive"){var b=function(){a.detachEvent("onstop",b);d&&d();a=0};a&&a.attachEvent("onstop",b);c.setTimeout(function(){a&&a.detachEvent("onstop",b)},0)}};c.attachEvent?(c.attachEvent("onunload",d),c.attachEvent("onbeforeunload",
n)):c.addEventListener&&c.addEventListener("unload",d,!1);f.unloads=[b]}return b},removeUnload:function(b){var a=this.unloads,f=null;g.each(a,function(d,n){if(d&&d.func==b)return a.splice(n,1),f=b,!1});return f},explode:function(b,a){return b?g.map(b.split(a||","),g.trim):b},_addVer:function(b){var a;if(!this.query)return b;a=(b.indexOf("?")==-1?"?":"&")+this.query;if(b.indexOf("#")==-1)return b+a;return b.replace("#",a+"#")},_replace:function(b,a,f){if(j)return f.replace(b,function(){var b=a,f=arguments,
k;for(k=0;k<f.length-2;k++)b=f[k]===void 0?b.replace(RegExp("\\$"+k,"g"),""):b.replace(RegExp("\\$"+k,"g"),f[k]);return b});return f.replace(b,a)}};g._init();c.tinymce=c.tinyMCE=g})(window);
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(c){this.scope=c||this;this.listeners=[]},add:function(c,i){this.listeners.push({cb:c,scope:i||this.scope});return c},addToTop:function(c,i){this.listeners.unshift({cb:c,scope:i||this.scope});return c},remove:function(c){var i=this.listeners,j=null;tinymce.each(i,function(g,b){if(c==g.cb)return j=c,i.splice(b,1),!1});return j},dispatch:function(){var c,i=arguments,j,g=this.listeners;for(j=0;j<g.length;j++)if(c=
g[j],c=c.cb.apply(c.scope,i),c===!1)break;return c}});
(function(){var c=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(i,j){var g=this,b,i=tinymce.trim(i),j=g.settings=j||{};if(/^(mailto|tel|news|javascript|about|data):/i.test(i)||/^\s*#/.test(i))g.source=i;else if(i.indexOf("/")===0&&i.indexOf("//")!==0&&(i=(j.base_uri?j.base_uri.protocol||"http":"http")+"://mce_host"+i),/^\w*:?\/\//.test(i)||(i=(j.base_uri.protocol||"http")+"://mce_host"+g.toAbsPath(j.base_uri.path,i)),i=i.replace(/@@/g,"(mce_at)"),i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(i),
c(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,b){var d=i[b];d&&(d=d.replace(/\(mce_at\)/g,"@@"));g[a]=d}),b=j.base_uri){if(!g.protocol)g.protocol=b.protocol;if(!g.userInfo)g.userInfo=b.userInfo;if(!g.port&&g.host=="mce_host")g.port=b.port;if(!g.host||g.host=="mce_host")g.host=b.host;g.source=""}},setPath:function(c){c=/^(.*?)\/?(\w+)?$/.exec(c);this.path=c[0];this.directory=c[1];this.file=c[2];this.source=
"";this.getURI()},toRelative:function(c){var j;if(c==="./")return c;c=new tinymce.util.URI(c,{base_uri:this});if(c.host!="mce_host"&&this.host!=c.host&&c.host||this.port!=c.port||this.protocol!=c.protocol)return c.getURI();j=this.toRelPath(this.path,c.path);c.query&&(j+="?"+c.query);c.anchor&&(j+="#"+c.anchor);return j},toAbsolute:function(c,j){c=new tinymce.util.URI(c,{base_uri:this});return c.getURI(this.host==c.host&&this.protocol==c.protocol?j:0)},toRelPath:function(c,j){var g,b=0,a="",f,d,c=
c.substring(0,c.lastIndexOf("/")),c=c.split("/");g=j.split("/");if(c.length>=g.length){f=0;for(d=c.length;f<d;f++)if(f>=g.length||c[f]!=g[f]){b=f+1;break}}if(c.length<g.length){f=0;for(d=g.length;f<d;f++)if(f>=c.length||c[f]!=g[f]){b=f+1;break}}if(b==1)return j;f=0;for(d=c.length-(b-1);f<d;f++)a+="../";f=b-1;for(d=g.length;f<d;f++)a+=f!=b-1?"/"+g[f]:g[f];return a},toAbsPath:function(i,j){var g,b=0,a=[],f;f=/\/$/.test(j)?"/":"";i=i.split("/");j=j.split("/");c(i,function(b){b&&a.push(b)});i=a;g=j.length-
1;for(a=[];g>=0;g--)j[g].length==0||j[g]=="."||(j[g]==".."?b++:b>0?b--:a.push(j[g]));g=i.length-b;g=g<=0?a.reverse().join("/"):i.slice(0,g).join("/")+"/"+a.reverse().join("/");g.indexOf("/")!==0&&(g="/"+g);f&&g.lastIndexOf("/")!==g.length-1&&(g+=f);return g},getURI:function(c){var j;if(!this.source||c)j="",c||(this.protocol&&(j+=this.protocol+"://"),this.userInfo&&(j+=this.userInfo+"@"),this.host&&(j+=this.host),this.port&&(j+=":"+this.port)),this.path&&(j+=this.path),this.query&&(j+="?"+this.query),
this.anchor&&(j+="#"+this.anchor),this.source=j;return this.source}})})();
(function(){var c=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(i){var i=this.get(i),j;i&&c(i.split("&"),function(c){c=c.split("=");j=j||{};j[unescape(c[0])]=unescape(c[1])});return j},setHash:function(i,j,g,b,a,f){var d="";c(j,function(a,b){d+=(!d?"":"&")+escape(b)+"="+escape(a)});this.set(i,d,g,b,a,f)},get:function(c){var j=document.cookie,g=c+"=",b;if(j){b=j.indexOf("; "+g);if(b==-1){if(b=j.indexOf(g),b!=0)return null}else b+=2;c=j.indexOf(";",b);if(c==-1)c=j.length;
return unescape(j.substring(b+g.length,c))}},set:function(c,j,g,b,a,f){document.cookie=c+"="+escape(j)+(g?"; expires="+g.toGMTString():"")+(b?"; path="+escape(b):"")+(a?"; domain="+a:"")+(f?"; secure":"")},remove:function(c,j){var g=new Date;g.setTime(g.getTime()-1E3);this.set(c,"",g,j,g)}})})();
(function(){function c(i,j){var g,b,a,j=j||'"';if(i==null)return"null";a=typeof i;if(a=="string")return b="\u0008b\tt\nn\u000cf\rr\"\"''\\\\",j+i.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,d){if(j==='"'&&a==="'")return a;g=b.indexOf(d);if(g+1)return"\\"+b.charAt(g+1);a=d.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+j;if(a=="object"){if(i.hasOwnProperty&&i instanceof Array){g=0;for(b="[";g<i.length;g++)b+=(g>0?",":"")+c(i[g],j);return b+"]"}b="{";for(g in i)b+=typeof i[g]!=
"function"?(b.length>1?","+j:j)+g+j+":"+c(i[g],j):"";return b+"}"}return""+i}tinymce.util.JSON={serialize:c,parse:function(c){try{return eval("("+c+")")}catch(j){}}}})();
tinymce.create("static tinymce.util.XHR",{send:function(c){function i(a){j=0;try{j=new ActiveXObject(a)}catch(b){}return j}var j,g=window,b=0;c.scope=c.scope||this;c.success_scope=c.success_scope||c.scope;c.error_scope=c.error_scope||c.scope;c.async=c.async===!1?!1:!0;c.data=c.data||"";if(j=g.XMLHttpRequest?new XMLHttpRequest:i("Microsoft.XMLHTTP")||i("Msxml2.XMLHTTP")){j.overrideMimeType&&j.overrideMimeType(c.content_type);j.open(c.type||(c.data?"POST":"GET"),c.url,c.async);c.content_type&&j.setRequestHeader("Content-Type",
c.content_type);j.setRequestHeader("X-Requested-With","XMLHttpRequest");j.send(c.data);var a=function(){!c.async||j.readyState==4||b++>1E4?(c.success&&b<1E4&&j.status==200?c.success.call(c.success_scope,""+j.responseText,j,c):c.error&&c.error.call(c.error_scope,b>1E4?"TIMED_OUT":"GENERAL",j,c),j=null):g.setTimeout(a,10)};if(!c.async)return a();g.setTimeout(a,10)}}});
(function(){var c=tinymce.extend,i=tinymce.util.JSON,j=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(g){this.settings=c({},g);this.count=0},send:function(g){var b=g.error,a=g.success,g=c(this.settings,g);g.success=function(f,d){f=i.parse(f);typeof f=="undefined"&&(f={error:"JSON Parse error."});f.error?b.call(g.error_scope||g.scope,f.error,d):a.call(g.success_scope||g.scope,f.result)};g.error=function(a,d){b&&b.call(g.error_scope||g.scope,a,d)};g.data=i.serialize({id:g.id||
"c"+this.count++,method:g.method,params:g.params});g.content_type="application/json";j.send(g)},"static":{sendRPC:function(c){return(new tinymce.util.JSONRequest).send(c)}}})})();
(function(c){function i(a,b){var e,h,k,d={};if(a){a=a.split(",");b=b||10;for(e=0;e<a.length;e+=2)h=String.fromCharCode(parseInt(a[e],b)),g[h]||(k="&"+a[e+1]+";",d[h]=k,d[k]=h);return d}}var j,g,b,a=/[&\"\u007E-\uD7FF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\u007E-\uD7FF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=/[<>&\"\']/g,n=/&(#)?([\w]+);/g,k={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",
145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};g={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};b={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};j=i("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32);c.html=c.html||{};c.html.Entities={encodeRaw:function(b,k){return b.replace(k?a:f,function(a){return g[a]||a})},encodeAllRaw:function(a){return(""+a).replace(d,function(a){return g[a]||a})},encodeNumeric:function(b,k){return b.replace(k?a:f,function(a){if(a.length>1)return"&#"+((a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320)+65536)+";";return g[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(b,k,e){e=e||j;return b.replace(k?a:f,function(a){return g[a]||e[a]||a})},getEncodeFunc:function(b,
k){function e(e,l){return e.replace(l?a:f,function(a){return g[a]||k[a]||"&#"+a.charCodeAt(0)+";"||a})}function h(a,e){return d.encodeNamed(a,e,k)}var d=c.html.Entities,k=i(k)||j,b=c.makeMap(b.replace(/\+/g,","));if(b.named&&b.numeric)return e;if(b.named){if(k)return h;return d.encodeNamed}if(b.numeric)return d.encodeNumeric;return d.encodeRaw},decode:function(a){return a.replace(n,function(a,e,h){if(e)return h=parseInt(h),h>65535?(h-=65536,String.fromCharCode(55296+(h>>10),56320+(h&1023))):k[h]||
String.fromCharCode(h);if(!(e=b[a]))if(!(e=j[a]))e=document.createElement("div"),e.innerHTML=a,e=e.textContent||e.innerText||a;return e})}}})(tinymce);
tinymce.html.Styles=function(c,i){function j(a,b,e,h){function k(a){a=parseInt(a).toString(16);return a.length>1?a:"0"+a}return"#"+k(b)+k(e)+k(h)}var g=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,b=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,f=/\s+$/,d,n={},k,c=c||{};k="\\\" \\' \\; \\: ; : _".split(" ");for(d=0;d<k.length;d++)n[k[d]]="_"+d,n["_"+d]=k[d];return{toHex:function(a){return a.replace(g,
j)},parse:function(k){function d(a,e){var h,b;if(h=l[a+"-top"+e])b=l[a+"-right"+e],h==b&&(h=l[a+"-bottom"+e],b==h&&(b=l[a+"-left"+e],h==b&&(l[a+e]=b,delete l[a+"-top"+e],delete l[a+"-right"+e],delete l[a+"-bottom"+e],delete l[a+"-left"+e])))}function e(a){var e=l[a],h;if(e&&!(e.indexOf(" ")<0)){e=e.split(" ");for(h=e.length;h--;)if(e[h]!==e[0])return!1;l[a]=e[0];return!0}}function h(a,h,b,k){e(h)&&e(b)&&e(k)&&(l[a]=l[h]+" "+l[b]+" "+l[k],delete l[h],delete l[b],delete l[k])}function p(a){t=!0;return n[a]}
function u(a,e){t&&(a=a.replace(/_[0-9]/g,function(a){return n[a]}));e||(a=a.replace(/\\([\'\";:])/g,"$1"));return a}var l={},s,i,r,t,y=c.url_converter,z=c.url_converter_scope||this;if(k){for(k=k.replace(/\\[\"\';:_]/g,p).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,p)});s=a.exec(k);){i=s[1].replace(f,"").toLowerCase();r=s[2].replace(f,"");if(i&&r.length>0){if(i==="font-weight"&&r==="700")r="bold";else if(i==="color"||i==="background-color")r=r.toLowerCase();r=r.replace(g,
j);r=r.replace(b,function(a,e,l,h,b,k){if(b=b||k)return b=u(b),"'"+b.replace(/\'/g,"\\'")+"'";e=u(e||l||h);y&&(e=y.call(z,e,"style"));return"url('"+e.replace(/\'/g,"\\'")+"')"});l[i]=t?u(r,!0):r}a.lastIndex=s.index+s[0].length}d("border","");d("border","-width");d("border","-color");d("border","-style");d("padding","");d("margin","");h("border","border-width","border-style","border-color");l.border==="medium none"&&delete l.border}return l},serialize:function(a,b){function e(e){var b,k,d,f;if(b=i.styles[e]){k=
0;for(d=b.length;k<d;k++)e=b[k],f=a[e],f!==void 0&&f.length>0&&(h+=(h.length>0?" ":"")+e+": "+f+";")}}var h="",k,d;if(b&&i&&i.styles)e("*"),e(k);else for(k in a)d=a[k],d!==void 0&&d.length>0&&(h+=(h.length>0?" ":"")+k+": "+d+";");return h}}};
(function(c){function i(a,e){return a.split(e||",")}var j={},g,b,a,f,d,n,k=c.makeMap,m=c.each;b="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup";b=k(b,",",k(b.toUpperCase()));j=function(a,e){function h(e){return e.replace(/[A-Z]+/g,function(e){return h(a[e])})}var b,d={};for(b in a)a.hasOwnProperty(b)&&(a[b]=h(a[b]));h(e).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,
function(a,e,b,h){b=i(b,"|");d[e]={attributes:k(b),attributesOrder:b,children:k(h,"|",{"#comment":{}})}});return d}({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",
T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",
A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]");
g=k("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,preload,autoplay,loop,controls");a=k("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source");f=c.extend(k("td,th,iframe,video,object"),a);d=k("pre,script,style");n=k("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");c.html.Schema=function(o){function e(a){var e,b,h,d,f,m,n,o,s,g,p,j,u,r,I,E,L,G,Q=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,O=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,
R=/[*?+]/;if(a){a=i(a);if(l["@"])E=l["@"].attributes,L=l["@"].attributesOrder;e=0;for(b=a.length;e<b;e++)if(f=Q.exec(a[e])){r=f[1];s=f[2];I=f[3];o=f[4];j={};u=[];m={attributes:j,attributesOrder:u};if(r==="#")m.paddEmpty=!0;if(r==="-")m.removeEmpty=!0;if(E){for(G in E)j[G]=E[G];u.push.apply(u,L)}if(o){o=i(o,"|");h=0;for(d=o.length;h<d;h++)if(f=O.exec(o[h])){n={};p=f[1];g=f[2].replace(/::/g,":");r=f[3];f=f[4];if(p==="!")m.attributesRequired=m.attributesRequired||[],m.attributesRequired.push(g),n.required=
!0;if(p==="-")delete j[g],u.splice(c.inArray(u,g),1);else{if(r){if(r==="=")m.attributesDefault=m.attributesDefault||[],m.attributesDefault.push({name:g,value:f}),n.defaultValue=f;if(r===":")m.attributesForced=m.attributesForced||[],m.attributesForced.push({name:g,value:f}),n.forcedValue=f;if(r==="<")n.validValues=k(f,"?")}R.test(g)?(m.attributePatterns=m.attributePatterns||[],n.pattern=RegExp("^"+g.replace(/([?+*])/g,".$1")+"$"),m.attributePatterns.push(n)):(j[g]||u.push(g),j[g]=n)}}}!E&&s=="@"&&
(E=j,L=u);if(I)m.outputName=s,l[I]=m;R.test(s)?(m.pattern=RegExp("^"+s.replace(/([?+*])/g,".$1")+"$"),B.push(m)):l[s]=m}}}function h(a){l={};B=[];e(a);m(j,function(a,e){s[e]=a.children})}function p(a){var e=/^(~)?(.+)$/;a&&m(i(a),function(a){var a=e.exec(a),l=a[1]==="~"?"span":"div",b=a[2];s[b]=s[l];m(s,function(a){a[l]&&(a[b]=a[l])})})}function u(a){var e=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&m(i(a),function(a){var a=e.exec(a),l,b;a&&(l=(b=a[1])?s[a[2]]:s[a[2]]={"#comment":{}},l=s[a[2]],m(i(a[3],"|"),
function(a){b==="-"?delete l[a]:l[a]={}}))})}var l={},s={},B=[],r,o=o||{};if(o.verify_html===!1)o.valid_elements="*[*]";o.valid_styles&&(r={},m(o.valid_styles,function(a,e){r[e]=c.explode(a)}));o.valid_elements?h(o.valid_elements):(m(j,function(a,e){l[e]={attributes:a.attributes,attributesOrder:a.attributesOrder};s[e]=a.children}),m(i("strong/b,em/i"),function(a){a=i(a,"/");l[a[1]].outputName=a[0]}),l.img.attributesDefault=[{name:"alt",value:""}],m(i("ol,ul,li,sub,sup,blockquote,tr,div,span,font,a,table,tbody"),
function(a){l[a].removeEmpty=!0}),m(i("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){l[a].paddEmpty=!0}));p(o.custom_elements);u(o.valid_children);e(o.extended_valid_elements);u("+ol[ul|ol],+ul[ul|ol]");o.invalid_elements&&c.each(c.explode(o.invalid_elements),function(a){l[a]&&delete l[a]});this.children=s;this.styles=r;this.getBoolAttrs=function(){return g};this.getBlockElements=function(){return b};this.getShortEndedElements=function(){return a};this.getSelfClosingElements=function(){return n};
this.getNonEmptyElements=function(){return f};this.getWhiteSpaceElements=function(){return d};this.isValidChild=function(a,e){var l=s[a];return!(!l||!l[e])};this.getElementRule=function(a){var e=l[a],b;if(e)return e;for(b=B.length;b--;)if(e=B[b],e.pattern.test(a))return e};this.addValidElements=e;this.setValidElements=h;this.addCustomElements=p;this.addValidChildren=u};c.html.Schema.boolAttrMap=g;c.html.Schema.blockElementsMap=b})(tinymce);
(function(c){c.html.SaxParser=function(i,j){var g=this,b=function(){},i=i||{};g.schema=j=j||new c.html.Schema;if(i.fix_self_closing!==!1)i.fix_self_closing=!0;c.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(g[a]=i[a]||b)});g.parse=function(a){function b(a){var l,h;for(l=e.length;l--;)if(e[l].name===a)break;if(l>=0){for(h=e.length-1;h>=l;h--)a=e[h],a.valid&&d.end(a.name);e.length=l}}var d=this,n,k=0,m,o,e=[],h,g,u,l,s,B,r,t,y,z,x,v,q,A,D,C,H,F,K,M=0,N=c.html.Entities.decode,
P;H=RegExp("<(?:(?:!--([\\w\\W]*?)--\>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)\\s*((?:[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*)>))","g");F=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;K={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};l=j.getShortEndedElements();C=j.getSelfClosingElements();s=j.getBoolAttrs();B=i.validate;
for(P=i.fix_self_closing;n=H.exec(a);){k<n.index&&d.text(N(a.substr(k,n.index-k)));if(m=n[6])b(m.toLowerCase());else if(m=n[7]){m=m.toLowerCase();k=m in l;P&&C[m]&&e.length>0&&e[e.length-1].name===m&&b(m);if(!B||(r=j.getElementRule(m))){t=!0;if(B)x=r.attributes,v=r.attributePatterns;(z=n[8])?(h=[],h.map={},z.replace(F,function(a,e,l,b,k){e=e.toLowerCase();l=e in s?e:N(l||b||k||"");if(B&&e.indexOf("data-")!==0){a=x[e];if(!a&&v){for(b=v.length;b--;)if(a=v[b],a.pattern.test(e))break;b===-1&&(a=null)}if(!a)return;
if(a.validValues&&!(l in a.validValues))return}h.map[e]=l;h.push({name:e,value:l})})):(h=[],h.map={});if(B){q=r.attributesRequired;A=r.attributesDefault;if(D=r.attributesForced)for(o=D.length;o--;)y=D[o],u=y.name,y=y.value,y==="{$uid}"&&(y="mce_"+M++),h.map[u]=y,h.push({name:u,value:y});if(A)for(o=A.length;o--;)if(y=A[o],u=y.name,!(u in h.map))y=y.value,y==="{$uid}"&&(y="mce_"+M++),h.map[u]=y,h.push({name:u,value:y});if(q){for(o=q.length;o--;)if(q[o]in h.map)break;o===-1&&(t=!1)}h.map["data-mce-bogus"]&&
(t=!1)}t&&d.start(m,h,k)}else t=!1;if(o=K[m]){o.lastIndex=k=n.index+n[0].length;(n=o.exec(a))?(t&&(g=a.substr(k,n.index-k)),k=n.index+n[0].length):(g=a.substr(k),k=a.length);t&&g.length>0&&d.text(g,!0);t&&d.end(m);H.lastIndex=k;continue}k||(!z||z.indexOf("/")!=z.length-1?e.push({name:m,valid:t}):t&&d.end(m))}else(m=n[1])?d.comment(m):(m=n[2])?d.cdata(m):(m=n[3])?d.doctype(m):(m=n[4])&&d.pi(m,n[5]);k=n.index+n[0].length}k<a.length&&d.text(N(a.substr(k)));for(o=e.length-1;o>=0;o--)m=e[o],m.valid&&d.end(m.name)}}})(tinymce);
(function(c){function i(a,b,d){var c;c=d?"lastChild":"firstChild";d=d?"prev":"next";if(a[c])return a[c];if(a!==b){if(c=a[d])return c;for(a=a.parent;a&&a!==b;a=a.parent)if(c=a[d])return c}}function j(a,b){this.name=a;this.type=b;if(b===1)this.attributes=[],this.attributes.map={}}var g=/^[ \t\r\n]*$/,b={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};c.extend(j.prototype,{replace:function(a){a.parent&&a.remove();this.insert(a,this);this.remove();return this},attr:function(a,
b){var d,c;if(typeof a!=="string"){for(c in a)this.attr(c,a[c]);return this}if(d=this.attributes)if(b!==void 0){if(b===null){if(a in d.map){delete d.map[a];for(c=d.length;c--;)if(d[c].name===a){d.splice(c,1);break}}return this}if(a in d.map)for(c=d.length;c--;){if(d[c].name===a){d[c].value=b;break}}else d.push({name:a,value:b});d.map[a]=b;return this}else return d.map[a]},clone:function(){var a=new j(this.name,this.type),b,d,c,k,m;if(c=this.attributes){m=[];m.map={};b=0;for(d=c.length;b<d;b++)if(k=
c[b],k.name!=="id")m[m.length]={name:k.name,value:k.value},m.map[k.name]=k.value;a.attributes=m}a.value=this.value;a.shortEnded=this.shortEnded;return a},wrap:function(a){this.parent.insert(a,this);a.append(this);return this},unwrap:function(){var a,b;for(a=this.firstChild;a;)b=a.next,this.insert(a,this,!0),a=b;this.remove()},remove:function(){var a=this.parent,b=this.next,d=this.prev;if(a){if(a.firstChild===this){if(a.firstChild=b)b.prev=null}else d.next=b;if(a.lastChild===this){if(a.lastChild=d)d.next=
null}else b.prev=d;this.parent=this.next=this.prev=null}return this},append:function(a){var b;a.parent&&a.remove();(b=this.lastChild)?(b.next=a,a.prev=b,this.lastChild=a):this.lastChild=this.firstChild=a;a.parent=this;return a},insert:function(a,b,d){var c;a.parent&&a.remove();c=b.parent||this;d?(b===c.firstChild?c.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===c.lastChild?c.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a);a.parent=c;return a},getAll:function(a){var b,
d=[];for(b=this.firstChild;b;b=i(b,this))b.name===a&&d.push(b);return d},empty:function(){var a,b,d;if(this.firstChild){a=[];for(d=this.firstChild;d;d=i(d,this))a.push(d);for(b=a.length;b--;)d=a[b],d.parent=d.firstChild=d.lastChild=d.next=d.prev=null}this.firstChild=this.lastChild=null;return this},isEmpty:function(a){var b=this.firstChild,d,c;if(b){do{if(b.type===1){if(b.attributes.map["data-mce-bogus"])continue;if(a[b.name])return!1;for(d=b.attributes.length;d--;)if(c=b.attributes[d].name,c==="name"||
c.indexOf("data-")===0)return!1}if(b.type===3&&!g.test(b.value))return!1}while(b=i(b,this))}return!0}});c.extend(j,{create:function(a,c){var d,n;d=new j(a,b[a]||1);if(c)for(n in c)d.attr(n,c[n]);return d}});c.html.Node=j})(tinymce);
(function(c){var i=c.html.Node;c.html.DomParser=function(j,g){function b(b){var k,e,h,d,f,l,n,j,r,t,y;t=c.makeMap("tr,td,th,tbody,thead,tfoot,table");r=g.getNonEmptyElements();for(k=0;k<b.length;k++)if(e=b[k],e.parent){d=[e];for(h=e.parent;h&&!g.isValidChild(h.name,e.name)&&!t[h.name];h=h.parent)d.push(h);if(h&&d.length>1){d.reverse();f=l=a.filterNode(d[0].clone());for(j=0;j<d.length-1;j++){g.isValidChild(l.name,d[j].name)?(n=a.filterNode(d[j].clone()),l.append(n)):n=l;for(l=d[j].firstChild;l&&l!=
d[j+1];)y=l.next,n.append(l),l=y;l=n}f.isEmpty(r)?h.insert(e,d[0],!0):(h.insert(f,d[0],!0),h.insert(e,f));h=d[0];(h.isEmpty(r)||h.firstChild===h.lastChild&&h.firstChild.name==="br")&&h.empty().remove()}else if(e.parent)e.name==="li"?(h=e.prev)&&(h.name==="ul"||h.name==="ul")?h.append(e):(h=e.next)&&(h.name==="ul"||h.name==="ul")?h.insert(e,h.firstChild,!0):e.wrap(a.filterNode(new i("ul",1))):g.isValidChild(e.parent.name,"div")&&g.isValidChild("div",e.name)?e.wrap(a.filterNode(new i("div",1))):e.name===
"style"||e.name==="script"?e.empty().remove():e.unwrap()}}var a=this,f={},d=[],n={},k={},j=j||{};j.validate="validate"in j?j.validate:!0;j.root_name=j.root_name||"body";a.schema=g=g||new c.html.Schema;a.filterNode=function(a){var b,e,h;e in f&&((h=n[e])?h.push(a):n[e]=[a]);for(b=d.length;b--;)e=d[b].name,e in a.attributes.map&&((h=k[e])?h.push(a):k[e]=[a]);return a};a.addNodeFilter=function(a,b){c.each(c.explode(a),function(a){var h=f[a];h||(f[a]=h=[]);h.push(b)})};a.addAttributeFilter=function(a,
b){c.each(c.explode(a),function(a){var h;for(h=0;h<d.length;h++)if(d[h].name===a){d[h].callbacks.push(b);return}d.push({name:a,callbacks:[b]})})};a.parse=function(a,o){function e(a,e){var b=new i(a,e),l;a in f&&((l=n[a])?l.push(b):n[a]=[b]);return b}function h(a){for(var e,a=a.prev;a&&a.type===3;)e=a.value.replace(A,""),e.length>0?(a.value=e,a=a.prev):(e=a.prev,a.remove(),a=e)}var p,u,l,s,B,r,t,y,z,x,v,q=[],A,D,C,H,F,o=o||{};n={};k={};x=c.extend(c.makeMap("script,style,head,html,body,title,meta,param"),
g.getBlockElements());F=g.getNonEmptyElements();H=g.children;z=j.validate;C=g.getWhiteSpaceElements();v=/^[ \t\r\n]+/;A=/[ \t\r\n]+$/;D=/[ \t\r\n]+/g;p=new c.html.SaxParser({validate:z,fix_self_closing:!z,cdata:function(a){l.append(e("#cdata",4)).value=a},text:function(a,b){var h;C[l.name]||(a=a.replace(D," "),l.lastChild&&x[l.lastChild.name]&&(a=a.replace(v,"")));if(a.length!==0)h=e("#text",3),h.raw=!!b,l.append(h).value=a},comment:function(a){l.append(e("#comment",8)).value=a},pi:function(a,b){l.append(e(a,
7)).value=b;h(l)},doctype:function(a){l.append(e("#doctype",10)).value=a;h(l)},start:function(a,b,c){var m,f,n;if(m=z?g.getElementRule(a):{}){m=e(m.outputName||a,1);m.attributes=b;m.shortEnded=c;l.append(m);(f=H[l.name])&&H[m.name]&&!f[m.name]&&q.push(m);for(f=d.length;f--;)n=d[f].name,n in b.map&&((y=k[n])?y.push(m):k[n]=[m]);x[a]&&h(m);c||(l=m)}},end:function(a){var e,b;if(e=z?g.getElementRule(a):{}){if(x[a]){if(!C[l.name]){for(a=l.firstChild;a&&a.type===3;)b=a.value.replace(v,""),b.length>0?(a.value=
b,a=a.next):(b=a.next,a.remove(),a=b);for(a=l.lastChild;a&&a.type===3;)b=a.value.replace(A,""),b.length>0?(a.value=b,a=a.prev):(b=a.prev,a.remove(),a=b)}if((a=l.prev)&&a.type===3)b=a.value.replace(v,""),b.length>0?a.value=b:a.remove()}if((e.removeEmpty||e.paddEmpty)&&l.isEmpty(F))if(e.paddEmpty)l.empty().append(new i("#text","3")).value="\u00a0";else if(!l.attributes.map.name){e=l.parent;l.empty().remove();l=e;return}l=l.parent}}},g);u=l=new i(j.root_name,11);p.parse(a);z&&b(q);for(t in n){y=f[t];
p=n[t];for(r=p.length;r--;)p[r].parent||p.splice(r,1);s=0;for(B=y.length;s<B;s++)y[s](p,t,o)}s=0;for(B=d.length;s<B;s++)if(y=d[s],y.name in k){p=k[y.name];for(r=p.length;r--;)p[r].parent||p.splice(r,1);r=0;for(t=y.callbacks.length;r<t;r++)y.callbacks[r](p,y.name,o)}return u};j.remove_trailing_brs&&a.addNodeFilter("br",function(a){var b,e=a.length,h,k=g.getBlockElements(),d=g.getNonEmptyElements(),l,f,n;for(b=0;b<e;b++)if(h=a[b],l=h.parent,k[h.parent.name]&&h===l.lastChild){for(f=h.prev;f;){n=f.name;
if(n!=="span"||f.attr("data-mce-type")!=="bookmark"){if(n!=="br")break;if(n==="br"){h=null;break}}f=f.prev}if(h&&(h.remove(),l.isEmpty(d)))if(elementRule=g.getElementRule(l.name),elementRule.removeEmpty)l.remove();else if(elementRule.paddEmpty)l.empty().append(new c.html.Node("#text",3)).value="\u00a0"}})}})(tinymce);
tinymce.html.Writer=function(c){var i=[],j,g,b,a,f,c=c||{};j=c.indent;g=tinymce.makeMap(c.indent_before||"");b=tinymce.makeMap(c.indent_after||"");a=tinymce.html.Entities.getEncodeFunc(c.entity_encoding||"raw",c.entities);f=c.element_format=="html";return{start:function(d,c,k){var m,o,e;j&&g[d]&&i.length>0&&(m=i[i.length-1],m.length>0&&m!=="\n"&&i.push("\n"));i.push("<",d);if(c){m=0;for(o=c.length;m<o;m++)e=c[m],i.push(" ",e.name,'="',a(e.value,!0),'"')}i[i.length]=!k||f?">":" />";k&&j&&b[d]&&i.length>
0&&(m=i[i.length-1],m.length>0&&m!=="\n"&&i.push("\n"))},end:function(a){i.push("</",a,">");j&&b[a]&&i.length>0&&(a=i[i.length-1],a.length>0&&a!=="\n"&&i.push("\n"))},text:function(b,c){b.length>0&&(i[i.length]=c?b:a(b))},cdata:function(a){i.push("<![CDATA[",a,"]]\>")},comment:function(a){i.push("<\!--",a,"--\>")},pi:function(a,b){b?i.push("<?",a," ",b,"?>"):i.push("<?",a,"?>");j&&i.push("\n")},doctype:function(a){i.push("<!DOCTYPE",a,">",j?"\n":"")},reset:function(){i.length=0},getContent:function(){return i.join("").replace(/\n$/,
"")}}};
(function(c){c.html.Serializer=function(i,j){var g=new c.html.Writer(i),i=i||{};i.validate="validate"in i?i.validate:!0;this.schema=j=j||new c.html.Schema;this.writer=g;this.serialize=function(b){function a(b){var k=c[b.type],m,o,e,h,p,i,l,s;if(k)k(b);else{k=b.name;m=b.shortEnded;o=b.attributes;if(d&&o&&o.length>1){p=[];p.map={};s=j.getElementRule(b.name);i=0;for(l=s.attributesOrder.length;i<l;i++)e=s.attributesOrder[i],e in o.map&&(h=o.map[e],p.map[e]=h,p.push({name:e,value:h}));i=0;for(l=o.length;i<
l;i++)e=o[i].name,e in p.map||(h=o.map[e],p.map[e]=h,p.push({name:e,value:h}));o=p}g.start(b.name,o,m);if(!m){if(b=b.firstChild){do a(b);while(b=b.next)}g.end(k)}}}var c,d;d=i.validate;c={3:function(a){g.text(a.value,a.raw)},8:function(a){g.comment(a.value)},7:function(a){g.pi(a.name,a.value)},10:function(a){g.doctype(a.value)},4:function(a){g.cdata(a.value)},11:function(b){if(b=b.firstChild){do a(b);while(b=b.next)}}};g.reset();if(b.type==1&&!i.inner)a(b);else c[11](b);return g.getContent()}}})(tinymce);
(function(c){var i=c.each,j=c.is,g=c.isWebKit,b=c.isIE,a=c.html.Entities,f=/^([a-z0-9],?)+$/i,d=c.html.Schema.blockElementsMap,n=/^[ \t\r\n]*$/;c.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(a,
d){this.doc=a;this.win=window;this.files={};this.cssFlicker=!1;this.counter=0;this.stdMode=!c.isIE||a.documentMode>=8;this.boxModel=!c.isIE||a.compatMode=="CSS1Compat"||this.stdMode;this.hasOuterHTML="outerHTML"in a.createElement("a");this.settings=d=c.extend({keep_values:!1,hex_colors:1},d);this.schema=d.schema;this.styles=new c.html.Styles({url_converter:d.url_converter,url_converter_scope:d.url_converter_scope},d.schema);if(c.isIE6)try{a.execCommand("BackgroundImageCache",!1,!0)}catch(f){this.cssFlicker=
!0}b&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(e){a.createElement(e)});c.addUnload(this.destroy,this)},getRoot:function(){var a=this.settings;return a&&this.get(a.root_element)||this.doc.body},getViewPort:function(a){var b,a=!a?this.win:a;b=a.document;b=this.boxModel?b.documentElement:b.body;return{x:a.pageXOffset||b.scrollLeft,y:a.pageYOffset||b.scrollTop,w:a.innerWidth||
b.clientWidth,h:a.innerHeight||b.clientHeight}},getRect:function(a){var b,a=this.get(a);b=this.getPos(a);a=this.getSize(a);return{x:b.x,y:b.y,w:a.w,h:a.h}},getSize:function(a){var b,d,a=this.get(a);b=this.getStyle(a,"width");d=this.getStyle(a,"height");b.indexOf("px")===-1&&(b=0);d.indexOf("px")===-1&&(d=0);return{w:parseInt(b)||a.offsetWidth||a.clientWidth,h:parseInt(d)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,d){return this.getParents(a,b,d,!1)},getParents:function(a,b,d,e){var h=
this,c,f=h.settings,l=[],a=h.get(a),e=e===void 0;f.strict_root&&(d=d||h.getRoot());j(b,"string")&&(c=b,b=b==="*"?function(a){return a.nodeType==1}:function(a){return h.is(a,c)});for(;a;){if(a==d||!a.nodeType||a.nodeType===9)break;if(!b||b(a))if(e)l.push(a);else return a;a=a.parentNode}return e?l:null},get:function(a){var b;if(a&&this.doc&&typeof a=="string"&&(b=a,(a=this.doc.getElementById(a))&&a.id!==b))return this.doc.getElementsByName(b)[1];return a},getNext:function(a,b){return this._findSib(a,
b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},select:function(a,b){return c.dom.Sizzle(a,this.get(b)||this.get(this.settings.root_element)||this.doc,[])},is:function(a,b){var d;if(a.length===void 0){if(b==="*")return a.nodeType==1;if(f.test(b)){b=b.toLowerCase().split(/,/);a=a.nodeName.toLowerCase();for(d=b.length-1;d>=0;d--)if(b[d]==a)return!0;return!1}}return c.dom.Sizzle.matches(b,a.nodeType?[a]:a).length>0},add:function(a,b,d,e,h){var c=this;return this.run(a,
function(a){var l;l=j(b,"string")?c.doc.createElement(b):b;c.setAttribs(l,d);e&&(e.nodeType?l.appendChild(e):c.setHTML(l,e));return!h?a.appendChild(l):l})},create:function(a,b,d){return this.add(this.doc.createElement(a),a,b,d,1)},createHTML:function(a,b,d){var e="",h;e+="<"+a;for(h in b)b.hasOwnProperty(h)&&(e+=" "+h+'="'+this.encode(b[h])+'"');if(typeof d!="undefined")return e+">"+d+"</"+a+">";return e+" />"},remove:function(a,b){return this.run(a,function(a){var e,h=a.parentNode;if(!h)return null;
if(b)for(;e=a.firstChild;)!c.isIE||e.nodeType!==3||e.nodeValue?h.insertBefore(e,a):a.removeChild(e);return h.removeChild(a)})},setStyle:function(a,d,f){var e=this;return e.run(a,function(h){var g;g=h.style;d=d.replace(/-(\D)/g,function(a,b){return b.toUpperCase()});if(e.pixelStyles.test(d)&&(c.is(f,"number")||/^[\-0-9\.]+$/.test(f)))f+="px";switch(d){case "opacity":if(b&&(g.filter=f===""?"":"alpha(opacity="+f*100+")",!a.currentStyle||!a.currentStyle.hasLayout))g.display="inline-block";g[d]=g["-moz-opacity"]=
g["-khtml-opacity"]=f||"";break;case "float":b?g.styleFloat=f:g.cssFloat=f;break;default:g[d]=f||""}e.settings.update_styles&&e.setAttrib(h,"data-mce-style")})},getStyle:function(a,d,c){if(a=this.get(a)){if(this.doc.defaultView&&c){d=d.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(d)}catch(e){return null}}d=d.replace(/-(\D)/g,function(a,b){return b.toUpperCase()});d=="float"&&(d=b?"styleFloat":"cssFloat");if(a.currentStyle&&c)return a.currentStyle[d];
return a.style?a.style[d]:void 0}},setStyles:function(a,b){var d=this,e=d.settings,h;h=e.update_styles;e.update_styles=0;i(b,function(b,e){d.setStyle(a,e,b)});e.update_styles=h;e.update_styles&&d.setAttrib(a,e.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var b,e=a.attributes;for(b=e.length-1;b>=0;b--)a.removeAttributeNode(e.item(b))})},setAttrib:function(a,b,d){var e=this;if(a&&b)return e.settings.strict&&(b=b.toLowerCase()),this.run(a,function(a){var k=e.settings;switch(b){case "style":if(!j(d,
"string")){i(d,function(b,l){e.setStyle(a,l,b)});return}k.keep_values&&(d&&!e._isRes(d)?a.setAttribute("data-mce-style",d,2):a.removeAttribute("data-mce-style",2));a.style.cssText=d;break;case "class":a.className=d||"";break;case "src":case "href":k.keep_values&&(k.url_converter&&(d=k.url_converter.call(k.url_converter_scope||e,d,b,a)),e.setAttrib(a,"data-mce-"+b,d,2));break;case "shape":a.setAttribute("data-mce-style",d)}j(d)&&d!==null&&d.length!==0?a.setAttribute(b,""+d,2):a.removeAttribute(b,2)})},
setAttribs:function(a,b){var d=this;return this.run(a,function(a){i(b,function(b,k){d.setAttrib(a,k,b)})})},getAttrib:function(a,d,f){var e,a=this.get(a);if(!a||a.nodeType!==1)return!1;j(f)||(f="");if(/^(src|href|style|coords|shape)$/.test(d)&&(e=a.getAttribute("data-mce-"+d)))return e;b&&this.props[d]&&(e=(e=a[this.props[d]])&&e.nodeValue?e.nodeValue:e);e||(e=a.getAttribute(d,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(d)){if(a[this.props[d]]===
!0&&e==="")return d;return e?d:""}if(a.nodeName==="FORM"&&a.getAttributeNode(d))return a.getAttributeNode(d).nodeValue;if(d==="style"&&(e=e||a.style.cssText))e=this.serializeStyle(this.parseStyle(e),a.nodeName),this.settings.keep_values&&!this._isRes(e)&&a.setAttribute("data-mce-style",e);g&&d==="class"&&e&&(e=e.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(b)switch(d){case "rowspan":case "colspan":e===1&&(e="");break;case "size":if(e==="+0"||e===20||e===0)e="";break;case "width":case "height":case "vspace":case "checked":case "disabled":case "readonly":e===
0&&(e="");break;case "hspace":e===-1&&(e="");break;case "maxlength":case "tabindex":if(e===32768||e===2147483647||e==="32768")e="";break;case "multiple":case "compact":case "noshade":case "nowrap":if(e===65535)return d;return f;case "shape":e=e.toLowerCase();break;default:d.indexOf("on")===0&&e&&(e=c._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+e))}return e!==void 0&&e!==null&&e!==""?""+e:f},getPos:function(a,d){var c=0,e=0,h=this.doc,a=this.get(a),d=d||h.body;if(a){if(b&&!this.stdMode)return a=
a.getBoundingClientRect(),e=this.boxModel?h.documentElement:h.body,c=this.getStyle(this.select("html")[0],"borderWidth"),c=(c=="medium"||this.boxModel&&!this.isIE6)&&2||c,{x:a.left+e.scrollLeft-c,y:a.top+e.scrollTop-c};for(h=a;h&&h!=d&&h.nodeType;)c+=h.offsetLeft||0,e+=h.offsetTop||0,h=h.offsetParent;for(h=a.parentNode;h&&h!=d&&h.nodeType;)c-=h.scrollLeft||0,e-=h.scrollTop||0,h=h.parentNode}return{x:c,y:e}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,
b)},loadCSS:function(a){var d=this,f=d.doc,e;a||(a="");e=d.select("head")[0];i(a.split(","),function(a){var k;if(!d.files[a]){d.files[a]=!0;k=d.create("link",{rel:"stylesheet",href:c._addVer(a)});if(b&&f.documentMode&&f.recalc)k.onload=function(){f.recalc&&f.recalc();k.onload=null};e.appendChild(k)}})},addClass:function(a,b){return this.run(a,function(a){var e;if(!b)return 0;if(this.hasClass(a,b))return a.className;e=this.removeClass(a,b);return a.className=(e!=""?e+" ":"")+b})},removeClass:function(a,
b){var d=this,e;return d.run(a,function(a){var f;if(d.hasClass(a,b))return e||(e=RegExp("(^|\\s+)"+b+"(\\s+|$)","g")),f=a.className.replace(e," "),f=c.trim(f!=" "?f:""),a.className=f,f||(a.removeAttribute("class"),a.removeAttribute("className")),f;return a.className})},hasClass:function(a,b){a=this.get(a);if(!a||!b)return!1;return(" "+a.className+" ").indexOf(" "+b+" ")!==-1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){a=
this.get(a);return!a||a.style.display=="none"||this.getStyle(a,"display")=="none"},uniqueId:function(a){return(!a?"mce_":a)+this.counter++},setHTML:function(a,d){var c=this;return c.run(a,function(a){if(b){for(;a.firstChild;)a.removeChild(a.firstChild);try{a.innerHTML="<br />"+d,a.removeChild(a.firstChild)}catch(h){a=c.create("div"),a.innerHTML="<br />"+d,i(a.childNodes,function(b,d){d&&a.appendChild(b)})}}else a.innerHTML=d;return d})},getOuterHTML:function(a){var b,a=this.get(a);if(!a)return null;
if(a.nodeType===1&&this.hasOuterHTML)return a.outerHTML;b=(a.ownerDocument||this.doc).createElement("body");b.appendChild(a.cloneNode(!0));return b.innerHTML},setOuterHTML:function(a,d,c){function e(a,b,e){e=e.createElement("body");e.innerHTML=b;for(b=e.lastChild;b;)h.insertAfter(b.cloneNode(!0),a),b=b.previousSibling;h.remove(a)}var h=this;return this.run(a,function(a){a=h.get(a);if(a.nodeType==1)if(c=c||a.ownerDocument||h.doc,b)try{b&&a.nodeType==1?a.outerHTML=d:e(a,d,c)}catch(f){e(a,d,c)}else e(a,
d,c)})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(a,b){b=this.get(b);return this.run(a,function(a){var e,d;e=b.parentNode;(d=b.nextSibling)?e.insertBefore(a,d):e.appendChild(a);return a})},isBlock:function(a){var b=a.nodeType;if(b)return!!(b===1&&d[a.nodeName]);return!!d[a]},replace:function(a,b,d){j(b,"array")&&(a=a.cloneNode(!0));return this.run(b,function(b){d&&i(c.grep(b.childNodes),function(b){a.appendChild(b)});return b.parentNode.replaceChild(a,b)})},rename:function(a,b){var d=
this,e;a.nodeName!=b.toUpperCase()&&(e=d.create(b),i(d.getAttribs(a),function(b){d.setAttrib(e,b.nodeName,d.getAttrib(a,b.nodeName))}),d.replace(e,a,1));return e||a},findCommonAncestor:function(a,b){for(var d=a,e;d;){for(e=b;e&&d!=e;)e=e.parentNode;if(d==e)break;d=d.parentNode}if(!d&&a.ownerDocument)return a.ownerDocument.documentElement;return d},toHex:function(a){function b(a){a=parseInt(a).toString(16);return a.length>1?a:"0"+a}var d=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);
d&&(a="#"+b(d[1])+b(d[2])+b(d[3]));return a},getClasses:function(){function a(f){i(f.imports,function(b){a(b)});i(f.cssRules||f.rules,function(l){switch(l.type||1){case 1:l.selectorText&&i(l.selectorText.split(","),function(a){a=a.replace(/^\s*|\s*$|^\s\./g,"");if(!/\.mce/.test(a)&&/\.[\w\-]+$/.test(a)&&(h=a,a=c._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",a),(!e||(a=e(a,h)))&&!d[a]))b.push({"class":a}),d[a]=1});break;case 3:a(l.styleSheet)}})}var b=[],d={},e=this.settings.class_filter,h;if(this.classes)return this.classes;
try{i(this.doc.styleSheets,a)}catch(f){}if(b.length>0)this.classes=b;return b},run:function(a,b,d){var e=this,h;e.doc&&typeof a==="string"&&(a=e.get(a));if(!a)return!1;d=d||this;if(!a.nodeType&&(a.length||a.length===0))return h=[],i(a,function(a,c){a&&(typeof a=="string"&&(a=e.doc.getElementById(a)),h.push(b.call(d,a,c)))}),h;return b.call(d,a)},getAttribs:function(a){var d,a=this.get(a);if(!a)return[];if(b){d=[];if(a.nodeName=="OBJECT")return a.attributes;a.nodeName==="OPTION"&&this.getAttrib(a,
"selected")&&d.push({specified:1,nodeName:"selected"});a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){d.push({specified:1,nodeName:a})});return d}return a.attributes},isEmpty:function(a,b){var d,e,h,f;if(a=a.firstChild){h=new c.dom.TreeWalker(a);b=b||this.schema?this.schema.getNonEmptyElements():null;do{e=a.nodeType;if(e===1){if(a.getAttribute("data-mce-bogus"))continue;if(b&&b[a.nodeName.toLowerCase()])return!1;this.getAttribs(a);
for(d=a.attributes.length;d--;)if(f=a.attributes[d].nodeName,f==="name"||f.indexOf("data-")===0)return!1}if(e===3&&!n.test(a.nodeValue))return!1}while(a=h.next())}return!0},destroy:function(a){this.events&&this.events.destroy();this.win=this.doc=this.root=this.events=null;a||c.removeUnload(this.destroy)},createRng:function(){var a=this.doc;return a.createRange?a.createRange():new c.dom.Range(this)},nodeIndex:function(a,b){var d=0,e,h,c;if(a){e=a.nodeType;for(a=a.previousSibling;a;a=a.previousSibling){h=
a.nodeType;if(b&&h==3){c=!1;try{c=a.nodeValue.length}catch(f){}if(h==e||!c)continue}d++;e=h}}return d},split:function(a,b,d){function e(a){var b,d=a.childNodes,l=a.nodeType;if(!(l==1&&a.getAttribute("data-mce-type")=="bookmark")){for(b=d.length-1;b>=0;b--)e(d[b]);if(l!=9){if(l==3&&a.nodeValue.length>0){if(!h.isBlock(a.parentNode)||c.trim(a.nodeValue).length>0)return}else if(l==1&&(d=a.childNodes,d.length==1&&d[0]&&d[0].nodeType==1&&d[0].getAttribute("data-mce-type")=="bookmark"&&a.parentNode.insertBefore(d[0],
a),d.length||/^(br|hr|input|img)$/i.test(a.nodeName)))return;h.remove(a)}return a}}var h=this,f=h.createRng(),g,l;if(a&&b)return f.setStart(a.parentNode,h.nodeIndex(a)),f.setEnd(b.parentNode,h.nodeIndex(b)),g=f.extractContents(),f=h.createRng(),f.setStart(b.parentNode,h.nodeIndex(b)+1),f.setEnd(a.parentNode,h.nodeIndex(a)+1),f=f.extractContents(),l=a.parentNode,l.insertBefore(e(g),a),d?l.replaceChild(d,b):l.insertBefore(b,a),l.insertBefore(e(f),a),h.remove(a),d||b},bind:function(a,b,d,e){if(!this.events)this.events=
new c.dom.EventUtils;return this.events.add(a,b,d,e||this)},unbind:function(a,b,d){if(!this.events)this.events=new c.dom.EventUtils;return this.events.remove(a,b,d)},_findSib:function(a,b,d){var e=this,h=b;if(a){j(h,"string")&&(h=function(a){return e.is(a,b)});for(a=a[d];a;a=a[d])if(h(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}});c.DOM=new c.dom.DOMUtils(document,{process_html:0})})(tinymce);
(function(c){function i(c){function g(a,b){k(t,a,b)}function b(a,b){k(y,a,b)}function a(a){g(a.parentNode,D(a))}function f(a){b(a.parentNode,D(a)+1)}function d(a,b){var e;if(a.nodeType==3)return a;if(b<0)return a;for(e=a.firstChild;e&&b>0;)--b,e=e.nextSibling;if(e)return e;return a}function n(a,b,e,d){var l,h;if(a==e){if(b==d)return 0;if(b<d)return-1;return 1}for(l=e;l&&l.parentNode!=a;)l=l.parentNode;if(l){h=0;for(e=a.firstChild;e!=l&&h<b;)h++,e=e.nextSibling;if(b<=h)return-1;return 1}for(l=a;l&&
l.parentNode!=e;)l=l.parentNode;if(l){h=0;for(e=e.firstChild;e!=l&&h<d;)h++,e=e.nextSibling;if(h<d)return-1;return 1}for(b=c.findCommonAncestor(a,e);a&&a.parentNode!=b;)a=a.parentNode;a||(a=b);for(d=e;d&&d.parentNode!=b;)d=d.parentNode;d||(d=b);if(a==d)return 0;for(e=b.firstChild;e;){if(e==a)return-1;if(e==d)return 1;e=e.nextSibling}}function k(a,b,e){a?(l[x]=b,l[z]=e):(l[v]=b,l[q]=e);for(b=l[v];b.parentNode;)b=b.parentNode;for(e=l[x];e.parentNode;)e=e.parentNode;e==b?n(l[x],l[z],l[v],l[q])>0&&l.collapse(a):
l.collapse(a);l.collapsed=l[x]==l[v]&&l[z]==l[q];l.commonAncestorContainer=c.findCommonAncestor(l[x],l[v])}function m(a){var b,d=0,c=0,f;if(l[x]==l[v])return o(a);b=l[v];for(f=b.parentNode;f;b=f,f=f.parentNode){if(f==l[x]){var g=b;f=c=d=f=b=void 0;a!=r&&(b=s.createDocumentFragment());f=e(g,a);b&&b.appendChild(f);d=D(g)-l[z];if(!(d<=0))for(f=g.previousSibling;d>0;)c=f.previousSibling,f=u(f,a),b&&b.insertBefore(f,b.firstChild),--d,f=c;a!=B&&(l.setEndBefore(g),l.collapse(y));a=b;return a}++d}b=l[x];
for(f=b.parentNode;f;b=f,f=f.parentNode){if(f==l[v]){g=b;f=c=d=f=d=b=void 0;a!=r&&(b=s.createDocumentFragment());f=h(g,a);b&&b.appendChild(f);d=D(g);++d;d=l[q]-d;for(f=g.nextSibling;d>0;)c=f.nextSibling,f=u(f,a),b&&b.appendChild(f),--d,f=c;a!=B&&(l.setStartAfter(g),l.collapse(t));return b}++c}c-=d;for(b=l[x];c>0;)b=b.parentNode,c--;for(d=l[v];c<0;)d=d.parentNode,c++;c=b.parentNode;for(f=d.parentNode;c!=f;c=c.parentNode,f=f.parentNode)b=c,d=f;var k;a!=r&&(g=s.createDocumentFragment());k=h(b,a);g&&
g.appendChild(k);c=D(b);f=D(d);++c;c=f-c;for(k=b.nextSibling;c>0;)f=k.nextSibling,k=u(k,a),g&&g.appendChild(k),k=f,--c;k=e(d,a);g&&g.appendChild(k);a!=B&&(l.setStartAfter(b),l.collapse(t));return g}function o(a){var b,e,h,f;a!=r&&(b=s.createDocumentFragment());if(l[z]==l[q])return b;if(l[x].nodeType==3){e=l[x].nodeValue;e=e.substring(l[z],l[q]);a!=B&&(l[x].deleteData(l[z],l[q]-l[z]),l.collapse(t));if(a==r)return;b.appendChild(s.createTextNode(e));return b}h=d(l[x],l[z]);for(e=l[q]-l[z];e>0;)f=h.nextSibling,
h=u(h,a),b&&b.appendChild(h),--e,h=f;a!=B&&l.collapse(t);return b}function e(a,b){var e=d(l[v],l[q]-1),h,f,c,g=e!=l[v];if(e==a)return p(e,g,y,b);h=e.parentNode;for(f=p(h,y,y,b);h;){for(;e;)c=e.previousSibling,e=p(e,g,y,b),b!=r&&f.insertBefore(e,f.firstChild),g=t,e=c;if(h==a)return f;e=h.previousSibling;h=h.parentNode;c=p(h,y,y,b);b!=r&&c.appendChild(f);f=c}}function h(a,b){var e=d(l[x],l[z]),h=e!=l[x],f,c,g;if(e==a)return p(e,h,t,b);f=e.parentNode;for(c=p(f,y,t,b);f;){for(;e;)g=e.nextSibling,e=p(e,
h,t,b),b!=r&&c.appendChild(e),h=t,e=g;if(f==a)return c;e=f.nextSibling;f=f.parentNode;g=p(f,y,t,b);b!=r&&g.appendChild(c);c=g}}function p(a,b,e,d){var h;if(b)return u(a,d);if(a.nodeType==3){b=a.nodeValue;e?(h=l[z],e=b.substring(h),b=b.substring(0,h)):(h=l[q],e=b.substring(0,h),b=b.substring(h));if(d!=B)a.nodeValue=b;if(d==r)return;a=a.cloneNode(y);a.nodeValue=e;return a}if(d!=r)return a.cloneNode(y)}function u(a,b){if(b!=r)return b==B?a.cloneNode(t):a;a.parentNode.removeChild(a)}var l=this,s=c.doc,
B=1,r=2,t=!0,y=!1,z="startOffset",x="startContainer",v="endContainer",q="endOffset",A=tinymce.extend,D=c.nodeIndex;A(l,{startContainer:s,startOffset:0,endContainer:s,endOffset:0,collapsed:t,commonAncestorContainer:s,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:g,setEnd:b,setStartBefore:a,setStartAfter:function(a){g(a.parentNode,D(a)+1)},setEndBefore:function(a){b(a.parentNode,D(a))},setEndAfter:f,collapse:function(a){a?(l[v]=l[x],l[q]=l[z]):(l[x]=l[v],l[z]=l[q]);l.collapsed=
t},selectNode:function(b){a(b);f(b)},selectNodeContents:function(a){g(a,0);b(a,a.nodeType===1?a.childNodes.length:a.nodeValue.length)},compareBoundaryPoints:function(a,b){var e=l[x],d=l[z],h=l[v],f=l[q],c=b.startContainer,g=b.startOffset,k=b.endContainer,s=b.endOffset;if(a===0)return n(e,d,c,g);if(a===1)return n(h,f,c,g);if(a===2)return n(h,f,k,s);if(a===3)return n(e,d,k,s)},deleteContents:function(){m(r)},extractContents:function(){return m(0)},cloneContents:function(){return m(B)},insertNode:function(a){var b=
this[x],e=this[z],d;(b.nodeType===3||b.nodeType===4)&&b.nodeValue?e?e>=b.nodeValue.length?c.insertAfter(a,b):(e=b.splitText(e),b.parentNode.insertBefore(a,e)):b.parentNode.insertBefore(a,b):(b.childNodes.length>0&&(d=b.childNodes[e]),d?b.insertBefore(a,d):b.appendChild(a))},surroundContents:function(a){var b=l.extractContents();l.insertNode(a);a.appendChild(b);l.selectNode(a)},cloneRange:function(){return A(new i(c),{startContainer:l[x],startOffset:l[z],endContainer:l[v],endOffset:l[q],collapsed:l.collapsed,
commonAncestorContainer:l.commonAncestorContainer})}})}c.Range=i})(tinymce.dom);
(function(){tinymce.dom.TridentSelection=function(c){function i(){function b(e){var d,c,j,l=0,s,i,m,o;j=f.duplicate();j.collapse(e);d=a.create("a");m=j.parentElement();if(m.hasChildNodes())if(m.appendChild(d),j.moveToElementText(d),o=f.compareEndPoints(e?"StartToStart":"EndToEnd",j),o>0)g[e?"setStartAfter":"setEndAfter"](m),a.remove(d);else{c=tinymce.grep(m.childNodes);for(s=c.length-1;l<=s;)if(i=Math.floor((l+s)/2),m.insertBefore(d,c[i]),j.moveToElementText(d),o=f.compareEndPoints(e?"StartToStart":
"EndToEnd",j),o>0)l=i+1;else if(o<0)s=i-1;else{found=!0;break}c=o>0||i==0?d.nextSibling:d.previousSibling;c.nodeType==1?(a.remove(d),j=a.nodeIndex(c),c=c.parentNode,(!e||i>0)&&j++):(o>0||i==0?(j.setEndPoint(e?"StartToStart":"EndToEnd",f),j=j.text.length):(j.setEndPoint(e?"StartToStart":"EndToEnd",f),j=c.nodeValue.length-j.text.length),a.remove(d));g[e?"setStart":"setEnd"](c,j)}else g[e?"setStart":"setEnd"](m,0)}var f=c.getRng(),g=a.createRng(),j,i;j=f.item?f.item(0):f.parentElement();if(j.ownerDocument!=
a.doc)return g;i=c.isCollapsed();if(f.item||!j.hasChildNodes())return i?(g.setStart(j,0),g.setEnd(j,0)):(g.setStart(j.parentNode,a.nodeIndex(j)),g.setEnd(g.startContainer,g.startOffset+1)),g;b(!0);i||b();return g}var j="\ufeff",g,b,a=c.dom,f=!0;this.addRange=function(b){function g(b){var d,c,n,s,i;n=a.create("a");d=b?o:h;c=b?e:p;s=k.duplicate();if(d==u||d==u.documentElement)d=l,c=0;d.nodeType==3?(d.parentNode.insertBefore(n,d),s.moveToElementText(n),s.moveStart("character",c),a.remove(n),k.setEndPoint(b?
"StartToStart":"EndToEnd",s)):(i=d.childNodes,i.length?(c>=i.length?a.insertAfter(n,i[i.length-1]):d.insertBefore(n,i[c]),s.moveToElementText(n)):(n=u.createTextNode(j),d.appendChild(n),s.moveToElementText(n.parentNode),s.collapse(f)),k.setEndPoint(b?"StartToStart":"EndToEnd",s),a.remove(n))}var k,i,o,e,h,p,u=c.dom.doc,l=u.body;this.destroy();o=b.startContainer;e=b.startOffset;h=b.endContainer;p=b.endOffset;k=l.createTextRange();if(o==h&&o.nodeType==1&&e==p-1&&e==p-1)try{i=l.createControlRange();
i.addElement(o.childNodes[e]);i.select();return}catch(s){}g(!0);g();k.select()};this.getRangeAt=function(){if(!g||!tinymce.dom.RangeUtils.compareRanges(b,c.getRng()))g=i(),b=c.getRng();return g};this.destroy=function(){b=g=null}}})();
(function(){function c(a,b,e,d,h,f){for(var h=0,c=d.length;h<c;h++){var g=d[h];if(g){for(var g=g[a],k=!1;g;){if(g.sizcache===e){k=d[g.sizset];break}if(g.nodeType===1&&!f)g.sizcache=e,g.sizset=h;if(g.nodeName.toLowerCase()===b){k=g;break}g=g[a]}d[h]=k}}}function i(a,b,e,h,f,c){for(var f=0,g=h.length;f<g;f++){var k=h[f];if(k){for(var k=k[a],n=!1;k;){if(k.sizcache===e){n=h[k.sizset];break}if(k.nodeType===1){if(!c)k.sizcache=e,k.sizset=f;if(typeof b!=="string"){if(k===b){n=!0;break}}else if(d.filter(b,
[k]).length>0){n=k;break}}k=k[a]}h[f]=n}}}var j=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,g=0,b=Object.prototype.toString,a=!1,f=!0;[0,0].sort(function(){f=!1;return 0});var d=function(a,h,f,c){var f=f||[],g=h=h||document;if(h.nodeType!==1&&h.nodeType!==9)return[];if(!a||typeof a!=="string")return f;var i=[],m,o,p,q,A=!0,D=d.isXML(h),C=a,H;do if(j.exec(""),m=j.exec(C))if(C=m[3],i.push(m[1]),m[2]){q=m[3];break}while(m);
if(i.length>1&&k.exec(a))if(i.length===2&&n.relative[i[0]])o=u(i[0]+i[1],h);else for(o=n.relative[i[0]]?[h]:d(i.shift(),h);i.length;)a=i.shift(),n.relative[a]&&(a+=i.shift()),o=u(a,o);else if(!c&&i.length>1&&h.nodeType===9&&!D&&n.match.ID.test(i[0])&&!n.match.ID.test(i[i.length-1])&&(m=d.find(i.shift(),h,D),h=m.expr?d.filter(m.expr,m.set)[0]:m.set[0]),h){m=c?{expr:i.pop(),set:e(c)}:d.find(i.pop(),i.length===1&&(i[0]==="~"||i[0]==="+")&&h.parentNode?h.parentNode:h,D);o=m.expr?d.filter(m.expr,m.set):
m.set;for(i.length>0?p=e(o):A=!1;i.length;)m=H=i.pop(),n.relative[H]?m=i.pop():H="",m==null&&(m=h),n.relative[H](p,m,D)}else p=[];p||(p=o);p||d.error(H||a);if(b.call(p)==="[object Array]")if(A)if(h&&h.nodeType===1)for(a=0;p[a]!=null;a++)p[a]&&(p[a]===!0||p[a].nodeType===1&&d.contains(h,p[a]))&&f.push(o[a]);else for(a=0;p[a]!=null;a++)p[a]&&p[a].nodeType===1&&f.push(o[a]);else f.push.apply(f,p);else e(p,f);q&&(d(q,g,f,c),d.uniqueSort(f));return f};d.uniqueSort=function(b){if(p&&(a=f,b.sort(p),a))for(var e=
1;e<b.length;e++)b[e]===b[e-1]&&b.splice(e--,1);return b};d.matches=function(a,b){return d(a,null,null,b)};d.find=function(a,b,e){var d;if(!a)return[];for(var h=0,f=n.order.length;h<f;h++){var c=n.order[h],g;if(g=n.leftMatch[c].exec(a)){var k=g[1];g.splice(1,1);if(k.substr(k.length-1)!=="\\"&&(g[1]=(g[1]||"").replace(/\\/g,""),d=n.find[c](g,b,e),d!=null)){a=a.replace(n.match[c],"");break}}}d||(d=b.getElementsByTagName("*"));return{set:d,expr:a}};d.filter=function(a,b,e,h){for(var f=a,c=[],g=b,k,i,
j=b&&b[0]&&d.isXML(b[0]);a&&b.length;){for(var m in n.filter)if((k=n.leftMatch[m].exec(a))!=null&&k[2]){var o=n.filter[m],p,u;u=k[1];i=!1;k.splice(1,1);if(u.substr(u.length-1)!=="\\"){g===c&&(c=[]);if(n.preFilter[m])if(k=n.preFilter[m](k,g,e,c,h,j)){if(k===!0)continue}else i=p=!0;if(k)for(var F=0;(u=g[F])!=null;F++)if(u){p=o(u,k,F,g);var K=h^!!p;e&&p!=null?K?i=!0:g[F]=!1:K&&(c.push(u),i=!0)}if(p!==void 0){e||(g=c);a=a.replace(n.match[m],"");if(!i)return[];break}}}if(a===f)if(i==null)d.error(a);else break;
f=a}return g};d.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var n=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var e=typeof b==="string",h=e&&!/\W/.test(b),e=e&&!h;h&&(b=b.toLowerCase());for(var h=0,f=a.length,c;h<f;h++)if(c=a[h]){for(;(c=c.previousSibling)&&c.nodeType!==1;);a[h]=e||c&&c.nodeName.toLowerCase()===b?c||!1:c===b}e&&d.filter(b,a,!0)},">":function(a,b){var e=typeof b===
"string",h,f=0,c=a.length;if(e&&!/\W/.test(b))for(b=b.toLowerCase();f<c;f++){if(h=a[f])e=h.parentNode,a[f]=e.nodeName.toLowerCase()===b?e:!1}else{for(;f<c;f++)(h=a[f])&&(a[f]=e?h.parentNode:h.parentNode===b);e&&d.filter(b,a,!0)}},"":function(a,b,e){var d=g++,h=i,f;typeof b==="string"&&!/\W/.test(b)&&(f=b=b.toLowerCase(),h=c);h("parentNode",b,d,a,f,e)},"~":function(a,b,e){var d=g++,h=i,f;typeof b==="string"&&!/\W/.test(b)&&(f=b=b.toLowerCase(),h=c);h("previousSibling",b,d,a,f,e)}},find:{ID:function(a,
b,e){if(typeof b.getElementById!=="undefined"&&!e)return(a=b.getElementById(a[1]))?[a]:[]},NAME:function(a,b){if(typeof b.getElementsByName!=="undefined"){for(var e=[],d=b.getElementsByName(a[1]),h=0,f=d.length;h<f;h++)d[h].getAttribute("name")===a[1]&&e.push(d[h]);return e.length===0?null:e}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,e,d,h,f){a=" "+a[1].replace(/\\/g,"")+" ";if(f)return a;for(var f=0,c;(c=b[f])!=null;f++)c&&(h^(c.className&&(" "+c.className+
" ").replace(/[\t\n]/g," ").indexOf(a)>=0)?e||d.push(c):e&&(b[f]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}a[0]=g++;return a},ATTR:function(a,b,e,d,h,f){b=a[1].replace(/\\/g,"");!f&&n.attrMap[b]&&(a[1]=n.attrMap[b]);a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},
PSEUDO:function(a,b,e,h,f){if(a[1]==="not")if((j.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=d(a[3],null,null,b);else return a=d.filter(a[3],b,e,1^f),e||h.push.apply(h,a),!1;else if(n.match.POS.test(a[0])||n.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.selected===!0},parent:function(a){return!!a.firstChild},
empty:function(a){return!a.firstChild},has:function(a,b,e){return!!d(e[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===
a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(a,b,e,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,e){return b<e[3]-0},gt:function(a,b,e){return b>e[3]-0},nth:function(a,b,e){return e[3]-0===b},eq:function(a,b,e){return e[3]-0===b}},filter:{PSEUDO:function(a,b,e,h){var f=b[1],c=n.filters[f];if(c)return c(a,
e,b,h);else if(f==="contains")return(a.textContent||a.innerText||d.getText([a])||"").indexOf(b[3])>=0;else if(f==="not"){b=b[3];e=0;for(h=b.length;e<h;e++)if(b[e]===a)return!1;return!0}else d.error("Syntax error, unrecognized expression: "+f)},CHILD:function(a,b){var e=b[1],d=a;switch(e){case "only":case "first":for(;d=d.previousSibling;)if(d.nodeType===1)return!1;if(e==="first")return!0;d=a;case "last":for(;d=d.nextSibling;)if(d.nodeType===1)return!1;return!0;case "nth":var e=b[2],h=b[3];if(e===
1&&h===0)return!0;var f=b[0],c=a.parentNode;if(c&&(c.sizcache!==f||!a.nodeIndex)){for(var g=0,d=c.firstChild;d;d=d.nextSibling)if(d.nodeType===1)d.nodeIndex=++g;c.sizcache=f}d=a.nodeIndex-h;return e===0?d===0:d%e===0&&d/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var e=b[1],e=n.attrHandle[e]?
n.attrHandle[e](a):a[e]!=null?a[e]:a.getAttribute(e),d=e+"",h=b[2],f=b[4];return e==null?h==="!=":h==="="?d===f:h==="*="?d.indexOf(f)>=0:h==="~="?(" "+d+" ").indexOf(f)>=0:!f?d&&e!==!1:h==="!="?d!==f:h==="^="?d.indexOf(f)===0:h==="$="?d.substr(d.length-f.length)===f:h==="|="?d===f||d.substr(0,f.length+1)===f+"-":!1},POS:function(a,b,e,d){var h=n.setFilters[b[2]];if(h)return h(a,e,b,d)}}},k=n.match.POS,m=function(a,b){return"\\"+(b-0+1)},o;for(o in n.match)n.match[o]=RegExp(n.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),
n.leftMatch[o]=RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[o].source.replace(/\\(\d+)/g,m));var e=function(a,b){a=Array.prototype.slice.call(a,0);if(b)return b.push.apply(b,a),b;return a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(h){e=function(a,e){var d=e||[],h=0;if(b.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length==="number")for(var f=a.length;h<f;h++)d.push(a[h]);else for(;a[h];h++)d.push(a[h]);return d}}var p;document.documentElement.compareDocumentPosition?
p=function(b,e){if(!b.compareDocumentPosition||!e.compareDocumentPosition)return b==e&&(a=!0),b.compareDocumentPosition?-1:1;var d=b.compareDocumentPosition(e)&4?-1:b===e?0:1;d===0&&(a=!0);return d}:"sourceIndex"in document.documentElement?p=function(b,e){if(!b.sourceIndex||!e.sourceIndex)return b==e&&(a=!0),b.sourceIndex?-1:1;var d=b.sourceIndex-e.sourceIndex;d===0&&(a=!0);return d}:document.createRange&&(p=function(b,e){if(!b.ownerDocument||!e.ownerDocument)return b==e&&(a=!0),b.ownerDocument?-1:
1;var d=b.ownerDocument.createRange(),h=e.ownerDocument.createRange();d.setStart(b,0);d.setEnd(b,0);h.setStart(e,0);h.setEnd(e,0);d=d.compareBoundaryPoints(Range.START_TO_END,h);d===0&&(a=!0);return d});d.getText=function(a){for(var b="",e,h=0;a[h];h++)e=a[h],e.nodeType===3||e.nodeType===4?b+=e.nodeValue:e.nodeType!==8&&(b+=d.getText(e.childNodes));return b};(function(){var a=document.createElement("div"),b="script"+(new Date).getTime();a.innerHTML="<a name='"+b+"'/>";var e=document.documentElement;
e.insertBefore(a,e.firstChild);if(document.getElementById(b))n.find.ID=function(a,b,e){if(typeof b.getElementById!=="undefined"&&!e)return(b=b.getElementById(a[1]))?b.id===a[1]||typeof b.getAttributeNode!=="undefined"&&b.getAttributeNode("id").nodeValue===a[1]?[b]:void 0:[]},n.filter.ID=function(a,b){var e=typeof a.getAttributeNode!=="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&e&&e.nodeValue===b};e.removeChild(a);e=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));
if(a.getElementsByTagName("*").length>0)n.find.TAG=function(a,b){var e=b.getElementsByTagName(a[1]);if(a[1]==="*"){for(var d=[],h=0;e[h];h++)e[h].nodeType===1&&d.push(e[h]);e=d}return e};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!=="#")n.attrHandle.href=function(a){return a.getAttribute("href",2)};a=null})();document.querySelectorAll&&function(){var a=d,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";
if(!(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)){d=function(b,h,f,c){h=h||document;if(!c&&h.nodeType===9&&!d.isXML(h))try{return e(h.querySelectorAll(b),f)}catch(g){}return a(b,h,f,c)};for(var h in a)d[h]=a[h];b=null}}();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(a.getElementsByClassName&&a.getElementsByClassName("e").length!==0&&(a.lastChild.className="e",a.getElementsByClassName("e").length!==1))n.order.splice(1,
0,"CLASS"),n.find.CLASS=function(a,b,e){if(typeof b.getElementsByClassName!=="undefined"&&!e)return b.getElementsByClassName(a[1])},a=null})();d.contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):!0)};d.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":!1};var u=function(a,b){for(var e=[],h="",f,c=b.nodeType?[b]:b;f=n.match.PSEUDO.exec(a);)h+=f[0],a=a.replace(n.match.PSEUDO,
"");a=n.relative[a]?a+"*":a;f=0;for(var g=c.length;f<g;f++)d(a,c[f],e);return d.filter(h,e)};window.tinymce.dom.Sizzle=d})();
(function(c){var i=c.each,j=c.DOM,g=c.isIE,b;c.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(a,b,d,n){var k,m=this,o=m.events,e;if(b instanceof Array)return e=[],i(b,function(b){e.push(m.add(a,b,d,n))}),e;if(a&&a.hasOwnProperty&&a instanceof Array)return e=[],i(a,function(a){a=j.get(a);e.push(m.add(a,b,d,n))}),e;if(a=j.get(a)){k=function(a){if(!m.disabled){if((a=a||window.event)&&g){if(!a.target)a.target=a.srcElement;c.extend(a,m._stoppers)}if(!n)return d(a);
return d.call(n,a)}};if(b=="unload")return c.unloads.unshift({func:k}),k;if(b=="init")return m.domLoaded?k():m.inits.push(k),k;o.push({obj:a,name:b,func:d,cfunc:k,scope:n});m._add(a,b,k);return d}},remove:function(a,b,d){var c=this,g=c.events,m=!1,o;if(a&&a.hasOwnProperty&&a instanceof Array)return o=[],i(a,function(a){a=j.get(a);o.push(c.remove(a,b,d))}),o;a=j.get(a);i(g,function(e,h){if(e.obj==a&&e.name==b&&(!d||e.func==d||e.cfunc==d))return g.splice(h,1),c._remove(a,b,e.cfunc),m=!0,!1});return m},
clear:function(a){var b=this.events,d,c;if(a){a=j.get(a);for(d=b.length-1;d>=0;d--)if(c=b[d],c.obj===a)this._remove(c.obj,c.name,c.cfunc),c.obj=c.cfunc=null,b.splice(d,1)}},cancel:function(a){if(!a)return!1;this.stop(a);return this.prevent(a)},stop:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;return!1},prevent:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;return!1},destroy:function(){var a=this;i(a.events,function(b){a._remove(b.obj,b.name,b.cfunc);b.obj=
b.cfunc=null});a.events=[];a=null},_add:function(a,b,d){a.attachEvent?a.attachEvent("on"+b,d):a.addEventListener?a.addEventListener(b,d,!1):a["on"+b]=d},_remove:function(a,b,d){if(a)try{a.detachEvent?a.detachEvent("on"+b,d):a.removeEventListener?a.removeEventListener(b,d,!1):a["on"+b]=null}catch(c){}},_pageInit:function(){if(!this.domLoaded)this.domLoaded=!0,i(this.inits,function(a){a()}),this.inits=[]},_wait:function(a){var b=this,d=a.document;a.tinyMCE_GZ&&tinyMCE_GZ.loaded?b.domLoaded=1:(d.attachEvent?
(d.attachEvent("onreadystatechange",function(){d.readyState==="complete"&&(d.detachEvent("onreadystatechange",arguments.callee),b._pageInit(a))}),d.documentElement.doScroll&&a==a.top&&function(){if(!b.domLoaded){try{d.documentElement.doScroll("left")}catch(c){setTimeout(arguments.callee,0);return}b._pageInit(a)}}()):d.addEventListener&&b._add(a,"DOMContentLoaded",function(){b._pageInit(a)}),b._add(a,"load",function(){b._pageInit(a)}))},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=
!0}}});b=c.dom.Event=new c.dom.EventUtils;b._wait(window);c.addUnload(function(){b.destroy()})})(tinymce);
(function(c){c.dom.Element=function(i,j){var g=this,b;g.settings=j=j||{};g.id=i;g.dom=b=j.dom||c.DOM;c.isIE||b.get(g.id);c.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){g[a]=function(){var c=[i],d;for(d=0;d<arguments.length;d++)c.push(arguments[d]);c=b[a].apply(b,c);g.update(a);return c}});c.extend(g,{on:function(a,b,d){return c.dom.Event.add(g.id,
a,b,d)},getXY:function(){return{x:parseInt(g.getStyle("left")),y:parseInt(g.getStyle("top"))}},getSize:function(){var a=b.get(g.id);return{w:parseInt(g.getStyle("width")||a.clientWidth),h:parseInt(g.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){g.setStyles({left:a,top:b})},moveBy:function(a,b){var d=g.getXY();g.moveTo(d.x+a,d.y+b)},resizeTo:function(a,b){g.setStyles({width:a,height:b})},resizeBy:function(a,b){var d=g.getSize();g.resizeTo(d.w+a,d.h+b)},update:function(a){if(c.isIE6&&j.blocker&&
(a=a||"",!(a.indexOf("get")===0||a.indexOf("has")===0||a.indexOf("is")===0)))a=="remove"?b.remove(g.blocker):(g.blocker?a=b.get(g.blocker):(g.blocker=b.uniqueId(),a=b.add(j.container||b.getRoot(),"iframe",{id:g.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),b.setStyle(a,"opacity",0)),b.setStyles(a,{left:g.getStyle("left",1),top:g.getStyle("top",1),width:g.getStyle("width",1),height:g.getStyle("height",1),display:g.getStyle("display",1),zIndex:parseInt(g.getStyle("zIndex",1)||
0)-1}))}})}})(tinymce);
(function(c){var i=c.is,j=c.isIE,g=c.each;c.create("tinymce.dom.Selection",{Selection:function(b,a,f){var d=this;d.dom=b;d.win=a;d.serializer=f;g(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(a){d[a]=new c.util.Dispatcher(d)});if(!d.win.getSelection)d.tridentSel=new c.dom.TridentSelection(d);c.isIE&&b.boxModel&&this._fixIESelection();c.addUnload(d.destroy,d)},getContent:function(b){var a=this.getRng(),c=this.dom.create("body"),d=this.getSel(),g,k,b=b||{};g=k="";
b.get=!0;b.format=b.format||"html";this.onBeforeGetContent.dispatch(this,b);if(b.format=="text")return this.isCollapsed()?"":a.text||(d.toString?d.toString():"");a.cloneContents?(a=a.cloneContents())&&c.appendChild(a):c.innerHTML=i(a.item)||i(a.htmlText)?a.item?a.item(0).outerHTML:a.htmlText:a.toString();/^\s/.test(c.innerHTML)&&(g=" ");/\s+$/.test(c.innerHTML)&&(k=" ");b.getInner=!0;b.content=this.isCollapsed()?"":g+this.serializer.serialize(c,b)+k;this.onGetContent.dispatch(this,b);return b.content},
setContent:function(b,a){var c=this.getRng(),d,g=this.win.document,k,a=a||{format:"html"};a.set=!0;a.content=b;a.no_events||this.onBeforeSetContent.dispatch(this,a);b=a.content;c.insertNode?(b+='<span id="__caret">_</span>',c.startContainer==g&&c.endContainer==g?g.body.innerHTML=b:(c.deleteContents(),g.body.childNodes.length==0?g.body.innerHTML=b:c.createContextualFragment?c.insertNode(c.createContextualFragment(b)):(d=g.createDocumentFragment(),k=g.createElement("div"),d.appendChild(k),k.outerHTML=
b,c.insertNode(d))),d=this.dom.get("__caret"),c=g.createRange(),c.setStartBefore(d),c.setEndBefore(d),this.setRng(c),this.dom.remove("__caret"),this.setRng(c)):(c.item&&(g.execCommand("Delete",!1,null),c=this.getRng()),c.pasteHTML(b));a.no_events||this.onSetContent.dispatch(this,a)},getStart:function(){var d;var b=this.getRng(),a,c;if(b.duplicate||b.item){if(b.item)return b.item(0);a=b.duplicate();a.collapse(1);a=a.parentElement();for(d=c=b.parentElement(),b=d;c=c.parentNode;)if(c==a){a=b;break}}else if(a=
b.startContainer,a.nodeType==1&&a.hasChildNodes()&&(a=a.childNodes[Math.min(a.childNodes.length-1,b.startOffset)]),a&&a.nodeType==3)return a.parentNode;return a},getEnd:function(){var b=this.getRng(),a;if(b.duplicate||b.item){if(b.item)return b.item(0);b=b.duplicate();b.collapse(0);if((a=b.parentElement())&&a.nodeName=="BODY")return a.lastChild||a}else if(a=b.endContainer,b=b.endOffset,a.nodeType==1&&a.hasChildNodes()&&(a=a.childNodes[b>0?b-1:b]),a&&a.nodeType==3)return a.parentNode;return a},getBookmark:function(b,
a){function c(a,b){var e=0;g(i.select(a),function(a,d){a==b&&(e=d)});return e}var d=this,i=d.dom,k,j,o,e,h;if(b==2)return function(){function b(e,c){var f=e[c?"startContainer":"endContainer"],g=e[c?"startOffset":"endOffset"],l=[],k,i=0;if(f.nodeType==3){if(a)for(k=f.previousSibling;k&&k.nodeType==3;k=k.previousSibling)g+=k.nodeValue.length;l.push(g)}else k=f.childNodes,g>=k.length&&k.length&&(i=1,g=Math.max(0,k.length-1)),l.push(d.dom.nodeIndex(k[g],a)+i);for(;f&&f!=h;f=f.parentNode)l.push(d.dom.nodeIndex(f,
a));return l}var e=d.getRng(!0),h=i.getRoot(),c={};c.start=b(e,!0);if(!d.isCollapsed())c.end=b(e);return c}();if(b)return{rng:d.getRng()};k=d.getRng();o=i.uniqueId();e=tinyMCE.activeEditor.selection.isCollapsed();if(k.duplicate||k.item)if(k.item)return h=k.item(0),j=h.nodeName,{name:j,index:c(j,h)};else{j=k.duplicate();try{k.collapse(),k.pasteHTML('<span data-mce-type="bookmark" id="'+o+'_start" style="overflow:hidden;line-height:0px">\ufeff</span>'),e||(j.collapse(!1),k.moveToElementText(j.parentElement()),
k.compareEndPoints("StartToEnd",j)==0&&j.move("character",-1),j.pasteHTML('<span data-mce-type="bookmark" id="'+o+'_end" style="overflow:hidden;line-height:0px">\ufeff</span>'))}catch(p){return null}}else{h=d.getNode();j=h.nodeName;if(j=="IMG")return{name:j,index:c(j,h)};j=k.cloneRange();e||(j.collapse(!1),j.insertNode(i.create("span",{"data-mce-type":"bookmark",id:o+"_end",style:"overflow:hidden;line-height:0px"},"\ufeff")));k.collapse(!0);k.insertNode(i.create("span",{"data-mce-type":"bookmark",
id:o+"_start",style:"overflow:hidden;line-height:0px"},"\ufeff"))}d.moveToBookmark({id:o,keep:1});return{id:o}},moveToBookmark:function(b){var a=this.dom,f,d,i,k,m,o;this.tridentSel&&this.tridentSel.destroy();if(b)if(b.start){f=a.createRng();d=a.getRoot();var e=function(a){var e=b[a?"start":"end"],h,c,g;if(e){g=e[0];c=d;for(h=e.length-1;h>=1;h--){c=c.childNodes;if(e[h]>c.length-1)return;c=c[e[h]]}c.nodeType===3&&(g=Math.min(e[0],c.nodeValue.length));c.nodeType===1&&(g=Math.min(e[0],c.childNodes.length));
a?f.setStart(c,g):f.setEnd(c,g)}return!0};e(!0)&&e()&&this.setRng(f)}else if(b.id){var e=function(e){var d=a.get(b.id+"_"+e),h,f,j;j=b.keep;if(d&&(h=d.parentNode,e=="start"?(j?(h=d.firstChild,f=1):f=a.nodeIndex(d),i=k=h,m=o=f):(j?(h=d.firstChild,f=1):f=a.nodeIndex(d),k=h,o=f),!j)){j=d.previousSibling;h=d.nextSibling;for(g(c.grep(d.childNodes),function(a){if(a.nodeType==3)a.nodeValue=a.nodeValue.replace(/\uFEFF/g,"")});d=a.get(b.id+"_"+e);)a.remove(d,1);if(j&&h&&j.nodeType==h.nodeType&&j.nodeType==
3&&!c.isOpera)f=j.nodeValue.length,j.appendData(h.nodeValue),a.remove(h),e=="start"?(i=k=j,m=o=f):(k=j,o=f)}},h=function(b){if(a.isBlock(b)&&!b.innerHTML)b.innerHTML=!j?'<br data-mce-bogus="1" />':" ";return b};e("start");e("end");i&&(f=a.createRng(),f.setStart(h(i),m),f.setEnd(h(k),o),this.setRng(f))}else b.name?this.select(a.select(b.name)[b.index]):b.rng&&this.setRng(b.rng)},select:function(b,a){var f=this.dom,d=f.createRng();b&&(f=f.nodeIndex(b),d.setStart(b.parentNode,f),d.setEnd(b.parentNode,
f+1),a&&(f=function(a,b){var f=new c.dom.TreeWalker(a,a);do{if(a.nodeType==3&&c.trim(a.nodeValue).length!=0){b?d.setStart(a,0):d.setEnd(a,a.nodeValue.length);break}if(a.nodeName=="BR"){b?d.setStartBefore(a):d.setEndBefore(a);break}}while(a=b?f.next():f.prev())},f(b,1),f(b)),this.setRng(d));return b},isCollapsed:function(){var b=this.getRng(),a=this.getSel();if(!b||b.item)return!1;if(b.compareEndPoints)return b.compareEndPoints("StartToEnd",b)===0;return!a||b.collapsed},collapse:function(b){var a=
this.getRng(),c;a.item&&(c=a.item(0),a=this.win.document.body.createTextRange(),a.moveToElementText(c));a.collapse(!!b);this.setRng(a)},getSel:function(){var b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(b){var a,f,d=this.win.document;if(b&&this.tridentSel)return this.tridentSel.getRangeAt(0);try{if(a=this.getSel())f=a.rangeCount>0?a.getRangeAt(0):a.createRange?a.createRange():d.createRange()}catch(g){}c.isIE&&f&&f.setStart&&d.selection.createRange().item&&
(b=d.selection.createRange().item(0),f=d.createRange(),f.setStartBefore(b),f.setEndAfter(b));f||(f=d.createRange?d.createRange():d.body.createTextRange());if(this.selectedRange&&this.explicitRange)f.compareBoundaryPoints(f.START_TO_START,this.selectedRange)===0&&f.compareBoundaryPoints(f.END_TO_END,this.selectedRange)===0?f=this.explicitRange:this.explicitRange=this.selectedRange=null;return f},setRng:function(b){var a;if(this.tridentSel)if(b.cloneRange)this.tridentSel.addRange(b);else try{b.select()}catch(c){}else if(a=
this.getSel()){this.explicitRange=b;try{a.removeAllRanges()}catch(d){}a.addRange(b);this.selectedRange=a.getRangeAt(0)}},setNode:function(b){this.setContent(this.dom.getOuterHTML(b));return b},getNode:function(){var b=this.getRng();this.getSel();var a,c=b.startContainer,d=b.endContainer;if(!b)return this.dom.getRoot();if(b.setStart){a=b.commonAncestorContainer;if(!b.collapsed&&(b.startContainer==b.endContainer&&b.endOffset-b.startOffset<2&&b.startContainer.hasChildNodes()&&(a=b.startContainer.childNodes[b.startOffset]),
c.nodeType===3&&d.nodeType===3)){var g=function(a,b){for(var d=a;a&&a.nodeType===3&&a.length===0;)a=b?a.nextSibling:a.previousSibling;return a||d},c=c.length===b.startOffset?g(c.nextSibling,!0):c.parentNode,d=b.endOffset===0?g(d.previousSibling,!1):d.parentNode;if(c&&c===d)return c}if(a&&a.nodeType==3)return a.parentNode;return a}return b.item?b.item(0):b.parentElement()},getSelectedBlocks:function(b,a){var c=this.dom,d,g,k,j=[];d=c.getParent(b||this.getStart(),c.isBlock);g=c.getParent(a||this.getEnd(),
c.isBlock);d&&j.push(d);if(d&&g&&d!=g)for(k=d;(k=k.nextSibling)&&k!=g;)c.isBlock(k)&&j.push(k);g&&d!=g&&j.push(g);return j},destroy:function(b){this.win=null;this.tridentSel&&this.tridentSel.destroy();b||c.removeUnload(this.destroy)},_fixIESelection:function(){function b(a,b){var e=k.createTextRange();try{e.moveToPoint(a,b)}catch(d){e=null}return e}function a(a){if(a.button){if(a=b(a.x,a.y))a.compareEndPoints("StartToStart",i)>0?a.setEndPoint("StartToStart",i):a.setEndPoint("EndToEnd",i),a.select()}else c()}
function c(){var b=g.selection.createRange();i&&!b.item&&b.compareEndPoints("StartToEnd",b)===0&&i.select();d.unbind(g,"mouseup",c);d.unbind(g,"mousemove",a);i=j=0}var d=this.dom,g=d.doc,k=g.body,j,i,e;g.documentElement.unselectable=!0;d.bind(g,["mousedown","contextmenu"],function(h){if(h.target.nodeName==="HTML"&&(j&&c(),e=g.documentElement,!(e.scrollHeight>e.clientHeight)&&(j=1,i=b(h.x,h.y))))d.bind(g,"mouseup",c),d.bind(g,"mousemove",a),d.win.focus(),i.select()})}})})(tinymce);
(function(c){c.dom.Serializer=function(i,j,g){var b,a,f=c.isIE,d=c.each,n;if(!i.apply_source_formatting)i.indent=!1;i.remove_trailing_brs=!0;j=j||c.DOM;g=g||new c.html.Schema(i);i.entity_encoding=i.entity_encoding||"named";b=new c.util.Dispatcher(self);a=new c.util.Dispatcher(self);n=new c.html.DomParser(i,g);n.addAttributeFilter("src,href,style",function(a,b){for(var d=a.length,e,c,f="data-mce-"+b,g=i.url_converter,l=i.url_converter_scope;d--;)e=a[d],c=e.attributes.map[f],c!==void 0?(e.attr(b,c.length>
0?c:null),e.attr(f,null)):(c=e.attributes.map[b],b==="style"?c=j.serializeStyle(j.parseStyle(c),e.name):g&&(c=g.call(l,c,b,e.name)),e.attr(b,c.length>0?c:null))});n.addAttributeFilter("class",function(a){for(var b=a.length,d,e;b--;)d=a[b],e=d.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),d.attr("class",e.length>0?e:null)});n.addAttributeFilter("data-mce-type",function(a,b,d){for(var b=a.length,e;b--;)e=a[b],e.attributes.map["data-mce-type"]==="bookmark"&&!d.cleanup&&e.remove()});n.addNodeFilter("script,style",
function(a,b){function d(a){return a.replace(/(<\!--\[CDATA\[|\]\]--\>)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<\!--|\/\/\s*<!\[CDATA\[|<\!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*--\>|\]\]>|--\>|\]\]--\>)\s*$/g,"")}for(var e=a.length,c,f;e--;)if(c=a[e],f=c.firstChild?c.firstChild.value:"",b==="script"){if(c.attr("type",(c.attr("type")||"text/javascript").replace(/^mce\-/,"")),f.length>0)c.firstChild.value="// <![CDATA[\n"+d(f)+"\n// ]]\>"}else if(f.length>
0)c.firstChild.value="<\!--\n"+d(f)+"\n--\>"});n.addNodeFilter("#comment",function(a){for(var b=a.length,d;b--;)if(d=a[b],d.value.indexOf("[CDATA[")===0)d.name="#cdata",d.type=4,d.value=d.value.replace(/^\[CDATA\[|\]\]$/g,"");else if(d.value.indexOf("mce:protected ")===0)d.name="#text",d.type=3,d.raw=!0,d.value=unescape(d.value).substr(14)});n.addNodeFilter("xml:namespace,input",function(a,b){for(var d=a.length,e;d--;)e=a[d],e.type===7?e.remove():e.type===1&&b==="input"&&!("type"in e.attributes.map)&&
e.attr("type","text")});i.fix_list_elements&&n.addNodeFilter("ul,ol",function(a){for(var b=a.length,d,e;b--;)d=a[b],e=d.parent,(e.name==="ul"||e.name==="ol")&&d.prev&&d.prev.name==="li"&&d.prev.append(d)});n.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,b){for(var d=a.length;d--;)a[d].attr(b,null)});return{schema:g,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,onPreProcess:b,onPostProcess:a,serialize:function(k,m){var o,e,h;f&&j.select("script,style,select").length>
0?(o=k.innerHTML,k=k.cloneNode(!1),j.setHTML(k,o)):k=k.cloneNode(!0);o=k.ownerDocument.implementation;if(o.createHTMLDocument)e=o.createHTMLDocument(""),d(k.nodeName=="BODY"?k.childNodes:[k],function(a){e.body.appendChild(e.importNode(a,!0))}),k=k.nodeName!="BODY"?e.body.firstChild:e.body,h=j.doc,j.doc=e;m=m||{};m.format=m.format||"html";if(!m.no_events)m.node=k,b.dispatch(self,m);o=new c.html.Serializer(i,g);m.content=o.serialize(n.parse(m.getInner?k.innerHTML:c.trim(j.getOuterHTML(k),m),m));if(!m.cleanup)m.content=
m.content.replace(/\uFEFF/g,"");m.no_events||a.dispatch(self,m);if(h)j.doc=h;m.node=null;return m.content},addRules:function(a){g.addValidElements(a)},setRules:function(a){g.setValidElements(a)}}}})(tinymce);
(function(c){c.dom.ScriptLoader=function(){function i(a,b){function f(){j.remove(u);if(e)e.onreadystatechange=e.onload=e=null;b()}function g(){typeof console!=="undefined"&&console.log&&console.log("Failed to load: "+a)}var j=c.DOM,e,h,i,u;u=j.uniqueId();if(c.isIE6&&(h=new c.util.URI(a),i=location,h.host==i.hostname&&h.port==i.port&&h.protocol+":"==i.protocol&&h.protocol.toLowerCase()!="file")){c.util.XHR.send({url:c._addVer(h.getURI()),success:function(a){var b=j.create("script",{type:"text/javascript"});
b.text=a;document.getElementsByTagName("head")[0].appendChild(b);j.remove(b);f()},error:g});return}e=j.create("script",{id:u,type:"text/javascript",src:c._addVer(a)});if(!c.isIE)e.onload=f;e.onerror=g;if(!c.isOpera)e.onreadystatechange=function(){var a=e.readyState;(a=="complete"||a=="loaded")&&f()};(document.getElementsByTagName("head")[0]||document.body).appendChild(e)}var j={},g=[],b={},a=[],f=0;this.isDone=function(a){return j[a]==2};this.markDone=function(a){j[a]=2};this.add=this.load=function(a,
c,f){j[a]==void 0&&(g.push(a),j[a]=0);c&&(b[a]||(b[a]=[]),b[a].push({func:c,scope:f||this}))};this.loadQueue=function(a,b){this.loadScripts(g,a,b)};this.loadScripts=function(d,g,k){function m(a){c.each(b[a],function(a){a.func.call(a.scope)});b[a]=void 0}var o;a.push({func:g,scope:k||this});o=function(){var b=c.grep(d);d.length=0;c.each(b,function(a){j[a]==2?m(a):j[a]!=1&&(j[a]=1,f++,i(a,function(){j[a]=2;f--;m(a);o()}))});if(!f)c.each(a,function(a){a.func.call(a.scope)}),a.length=0};o()}};c.ScriptLoader=
new c.dom.ScriptLoader})(tinymce);tinymce.dom.TreeWalker=function(c,i){function j(b,a,c,d){if(b){if(!d&&b[a])return b[a];if(b!=i){if(a=b[c])return a;for(b=b.parentNode;b&&b!=i;b=b.parentNode)if(a=b[c])return a}}}var g=c;this.current=function(){return g};this.next=function(b){return g=j(g,"firstChild","nextSibling",b)};this.prev=function(b){return g=j(g,"lastChild","previousSibling",b)}};
(function(c){c.dom.RangeUtils=function(i){this.walk=function(j,g){function b(a,b,e){for(var d=[];a&&a!=e;a=a[b])d.push(a);return d}function a(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function f(a,d,c){var f=c?"nextSibling":"previousSibling";o=a;for(e=o.parentNode;o&&o!=d;o=e)e=o.parentNode,h=b(o==a?o:o[f],f),h.length&&(c||h.reverse(),g(h))}var d=j.startContainer,n=j.startOffset,k=j.endContainer,m=j.endOffset,o,e,h,p;p=i.select("td.mceSelected,th.mceSelected");if(p.length>0)c.each(p,
function(a){g([a])});else{d.nodeType==1&&d.hasChildNodes()&&(d=d.childNodes[n]);k.nodeType==1&&k.hasChildNodes()&&(k=k.childNodes[Math.min(m-1,k.childNodes.length-1)]);m=i.findCommonAncestor(d,k);if(d==k)return g([d]);for(o=d;o;o=o.parentNode){if(o==k)return f(d,m,!0);if(o==m)break}for(o=k;o;o=o.parentNode){if(o==d)return f(k,m);if(o==m)break}n=a(d,m)||d;m=a(k,m)||k;f(d,n,!0);h=b(n==d?n:n.nextSibling,"nextSibling",m==k?m.nextSibling:m);h.length&&g(h);f(k,m)}}};c.dom.RangeUtils.compareRanges=function(c,
j){if(c&&j)if(c.item||c.duplicate){if(c.item&&j.item&&c.item(0)===j.item(0))return!0;if(c.isEqual&&j.isEqual&&j.isEqual(c))return!0}else return c.startContainer==j.startContainer&&c.startOffset==j.startOffset;return!1}})(tinymce);
(function(c){var i=c.dom.Event,j=c.each;c.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(g,b){var a=this,f=g.root,d=g.items,n=g.enableUpDown,k=g.enableLeftRight||!g.enableUpDown,m=g.excludeFromTabOrder,o,e,h,p,u,b=b||c.DOM;o=function(a){u=a.target.id};e=function(a){b.setAttrib(a.target.id,"tabindex","-1")};p=function(){var a=b.get(u);b.setAttrib(a,"tabindex","0");a.focus()};a.focus=function(){b.get(u).focus()};a.destroy=function(){j(d,function(a){b.unbind(b.get(a.id),"focus",
o);b.unbind(b.get(a.id),"blur",e)});b.unbind(b.get(f),"focus",p);b.unbind(b.get(f),"keydown",h);d=b=f=a.focus=o=e=h=p=null;a.destroy=function(){}};a.moveFocus=function(a,e){var c=-1,h;if(u){j(d,function(a,b){if(a.id===u)return c=b,!1});c+=a;c<0?c=d.length-1:c>=d.length&&(c=0);h=d[c];b.setAttrib(u,"tabindex","-1");b.setAttrib(h.id,"tabindex","0");b.get(h.id).focus();if(g.actOnFocus)g.onAction(h.id);e&&i.cancel(e)}};h=function(b){switch(b.keyCode){case 37:k&&a.moveFocus(-1);break;case 39:k&&a.moveFocus(1);
break;case 38:n&&a.moveFocus(-1);break;case 40:n&&a.moveFocus(1);break;case 27:g.onCancel&&(g.onCancel(),i.cancel(b));break;case 14:case 13:case 32:g.onAction&&(g.onAction(u),i.cancel(b))}};j(d,function(a,d){var c;if(!a.id)a.id=b.uniqueId("_mce_item_");m?(b.bind(a.id,"blur",e),c="-1"):c=d===0?"0":"-1";b.setAttrib(a.id,"tabindex",c);b.bind(b.get(a.id),"focus",o)});if(d[0])u=d[0].id;b.setAttrib(f,"tabindex","-1");b.bind(b.get(f),"focus",p);b.bind(b.get(f),"keydown",h)}})})(tinymce);
(function(c){var i=c.DOM,j=c.is;c.create("tinymce.ui.Control",{Control:function(g,b,a){this.id=g;this.settings=b=b||{};this.rendered=!1;this.onRender=new c.util.Dispatcher(this);this.classPrefix="";this.scope=b.scope||this;this.active=this.disabled=0;this.editor=a},setAriaProperty:function(c,b){var a=i.get(this.id+"_aria")||i.get(this.id);a&&i.setAttrib(a,"aria-"+c,!!b)},focus:function(){i.get(this.id).focus()},setDisabled:function(c){if(c!=this.disabled)this.setAriaProperty("disabled",c),this.setState("Disabled",
c),this.setState("Enabled",!c),this.disabled=c},isDisabled:function(){return this.disabled},setActive:function(c){if(c!=this.active)this.setState("Active",c),this.active=c,this.setAriaProperty("pressed",c)},isActive:function(){return this.active},setState:function(c,b){var a=i.get(this.id),c=this.classPrefix+c;b?i.addClass(a,c):i.removeClass(a,c)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(c){i.setHTML(c,this.renderHTML())},postRender:function(){var c;if(j(this.disabled))c=
this.disabled,this.disabled=-1,this.setDisabled(c);if(j(this.active))c=this.active,this.active=-1,this.setActive(c)},remove:function(){i.remove(this.id);this.destroy()},destroy:function(){c.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(c,i,j){this.parent(c,i,j);this.controls=[];this.lookup={}},add:function(c){this.lookup[c.id]=c;this.controls.push(c);return c},get:function(c){return this.lookup[c]}});
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(c,i){this.parent(c,i);this.classPrefix="mceSeparator";this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});
(function(c){var i=c.is;c.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(c,g){this.parent(c,g);this.classPrefix="mceMenuItem"},setSelected:function(c){this.setState("Selected",c);this.setAriaProperty("checked",!!c);this.selected=c},isSelected:function(){return this.selected},postRender:function(){this.parent();i(this.selected)&&this.setSelected(this.selected)}})})(tinymce);
(function(c){var i=c.DOM,j=c.walk;c.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(g,b){this.parent(g,b);this.items={};this.collapsed=!1;this.menuCount=0;this.onAddItem=new c.util.Dispatcher(this)},expand:function(c){c&&j(this,function(b){b.expand&&b.expand()},"items",this);this.collapsed=!1},collapse:function(c){c&&j(this,function(b){b.collapse&&b.collapse()},"items",this);this.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(g){g.settings||(g=new c.ui.MenuItem(g.id||
i.uniqueId(),g));this.onAddItem.dispatch(this,g);return this.items[g.id]=g},addSeparator:function(){return this.add({separator:!0})},addMenu:function(c){c.collapse||(c=this.createMenu(c));this.menuCount++;return this.add(c)},hasMenus:function(){return this.menuCount!==0},remove:function(c){delete this.items[c.id]},removeAll:function(){j(this,function(c){c.removeAll?c.removeAll():c.remove();c.destroy()},"items",this);this.items={}},createMenu:function(g){g=new c.ui.Menu(g.id||i.uniqueId(),g);g.onAddItem.add(this.onAddItem.dispatch,
this.onAddItem);return g}})})(tinymce);
(function(c){var i=c.is,j=c.DOM,g=c.each,b=c.dom.Event,a=c.dom.Element;c.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(a,b){b=b||{};b.container=b.container||j.doc.body;b.offset_x=b.offset_x||0;b.offset_y=b.offset_y||0;b.vp_offset_x=b.vp_offset_x||0;b.vp_offset_y=b.vp_offset_y||0;i(b.icons)&&!b.icons&&(b["class"]+=" mceNoIcons");this.parent(a,b);this.onShowMenu=new c.util.Dispatcher(this);this.onHideMenu=new c.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(a){var b=
this.settings;a.container=a.container||b.container;a.parent=this;a.constrain=a.constrain||b.constrain;a["class"]=a["class"]||b["class"];a.vp_offset_x=a.vp_offset_x||b.vp_offset_x;a.vp_offset_y=a.vp_offset_y||b.vp_offset_y;a.keyboard_focus=b.keyboard_focus;a=new c.ui.DropMenu(a.id||j.uniqueId(),a);a.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return a},focus:function(){this.keyboardNav&&this.keyboardNav.focus()},update:function(){var a=this.settings,b=j.get("menu_"+this.id+"_tbl"),c=j.get("menu_"+
this.id+"_co"),g,i;g=a.max_width?Math.min(b.clientWidth,a.max_width):b.clientWidth;i=a.max_height?Math.min(b.clientHeight,a.max_height):b.clientHeight;j.boxModel?this.element.setStyles({width:g,height:i}):this.element.setStyles({width:g+2,height:i+2});a.max_width&&j.setStyle(c,"width",g);a.max_height&&(j.setStyle(c,"height",i),b.clientHeight<a.max_height&&j.setStyle(c,"overflow","hidden"))},showMenu:function(f,d,i){var k=this,m=k.settings,o,e=j.getViewPort(),h,p,u,l,s=k.classPrefix;k.collapse(1);
if(!k.isMenuVisible){k.rendered?o=j.get("menu_"+k.id):(o=j.add(k.settings.container,k.renderNode()),g(k.items,function(a){a.postRender()}),k.element=new a("menu_"+k.id,{blocker:1,container:m.container}));c.isOpera||j.setStyles(o,{left:-65535,top:-65535});j.show(o);k.update();f+=m.offset_x||0;d+=m.offset_y||0;e.w-=4;e.h-=4;m.constrain&&(h=o.clientWidth-2,p=o.clientHeight-2,u=e.x+e.w,e=e.y+e.h,f+m.vp_offset_x+h>u&&(f=i?i-h:Math.max(0,u-m.vp_offset_x-h)),d+m.vp_offset_y+p>e&&(d=Math.max(0,e-m.vp_offset_y-
p)));j.setStyles(o,{left:f,top:d});k.element.update();k.isMenuVisible=1;k.mouseClickFunc=b.add(o,"click",function(a){var e;if((a=a.target)&&(a=j.getParent(a,"tr"))&&!j.hasClass(a,s+"ItemSub"))if(e=k.items[a.id],!e.isDisabled()){for(l=k;l;)l.hideMenu&&l.hideMenu(),l=l.settings.parent;if(e.settings.onclick)e.settings.onclick(a);return b.cancel(a)}});if(k.hasMenus())k.mouseOverFunc=b.add(o,"mouseover",function(a){var b;if((a=a.target)&&(a=j.getParent(a,"tr")))if(b=k.items[a.id],k.lastMenu&&k.lastMenu.collapse(1),
!b.isDisabled()&&a&&j.hasClass(a,s+"ItemSub"))a=j.getRect(a),b.showMenu(a.x+a.w-2,a.y-2,a.x),k.lastMenu=b,j.addClass(j.get(b.id).firstChild,s+"ItemActive")});b.add(o,"keydown",k._keyHandler,k);k.onShowMenu.dispatch(k);m.keyboard_focus&&k._setupKeyboardNav()}},hideMenu:function(a){var d=j.get("menu_"+this.id),c;if(this.isMenuVisible)this.keyboardNav&&this.keyboardNav.destroy(),b.remove(d,"mouseover",this.mouseOverFunc),b.remove(d,"click",this.mouseClickFunc),b.remove(d,"keydown",this._keyHandler),
j.hide(d),this.isMenuVisible=0,a||this.collapse(1),this.element&&this.element.hide(),(c=j.get(this.id))&&j.removeClass(c.firstChild,this.classPrefix+"ItemActive"),this.onHideMenu.dispatch(this)},add:function(a){var b,a=this.parent(a);this.isRendered&&(b=j.get("menu_"+this.id))&&this._add(j.select("tbody",b)[0],a);return a},collapse:function(a){this.parent(a);this.hideMenu(1)},remove:function(a){j.remove(a.id);this.destroy();return this.parent(a)},destroy:function(){var a=j.get("menu_"+this.id);this.keyboardNav&&
this.keyboardNav.destroy();b.remove(a,"mouseover",this.mouseOverFunc);b.remove(j.select("a",a),"focus",this.mouseOverFunc);b.remove(a,"click",this.mouseClickFunc);b.remove(a,"keydown",this._keyHandler);this.element&&this.element.remove();j.remove(a)},renderNode:function(){var b=this,d=b.settings,c,i,m;m=j.create("div",{role:"listbox",id:"menu_"+b.id,"class":d["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});b.settings.parent&&j.setAttrib(m,"aria-parent","menu_"+b.settings.parent.id);
i=j.add(m,"div",{role:"presentation",id:"menu_"+b.id+"_co","class":b.classPrefix+(d["class"]?" "+d["class"]:"")});b.element=new a("menu_"+b.id,{blocker:1,container:d.container});d.menu_line&&j.add(i,"span",{"class":b.classPrefix+"Line"});d=j.add(i,"table",{role:"presentation",id:"menu_"+b.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});c=j.add(d,"tbody");g(b.items,function(a){b._add(c,a)});b.rendered=!0;return m},_setupKeyboardNav:function(){var a,b,g=this;a=j.select("#menu_"+g.id)[0];b=j.select("a[role=option]",
"menu_"+g.id);b.splice(0,0,a);g.keyboardNav=new c.ui.KeyboardNavigation({root:"menu_"+g.id,items:b,onCancel:function(){g.hideMenu()},enableUpDown:!0});a.focus()},_keyHandler:function(a){switch(a.keyCode){case 37:this.settings.parent&&(this.hideMenu(),this.settings.parent.focus(),b.cancel(a));break;case 39:this.mouseOverFunc&&this.mouseOverFunc(a)}},_add:function(a,b){var c,g=b.settings,i,o,e,h=this.classPrefix;g.separator?(o=j.add(a,"tr",{id:b.id,"class":h+"ItemSeparator"}),j.add(o,"td",{"class":h+
"ItemSeparator"}),(c=o.previousSibling)&&j.addClass(c,"mceLast")):(c=o=j.add(a,"tr",{id:b.id,"class":h+"Item "+h+"ItemEnabled"}),c=e=j.add(c,g.titleItem?"th":"td"),c=i=j.add(c,"a",{id:b.id+"_aria",role:g.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),g.parent&&(j.setAttrib(i,"aria-haspopup","true"),j.setAttrib(i,"aria-owns","menu_"+b.id)),j.addClass(e,g["class"]),i=j.add(c,"span",{"class":"mceIcon"+(g.icon?" mce_"+g.icon:"")}),g.icon_src&&
j.add(i,"img",{src:g.icon_src}),c=j.add(c,g.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&j.setAttrib(c,"style",b.settings.style),a.childNodes.length==1&&j.addClass(o,"mceFirst"),(c=o.previousSibling)&&j.hasClass(c,h+"ItemSeparator")&&j.addClass(o,"mceFirst"),b.collapse&&j.addClass(o,h+"ItemSub"),(c=o.previousSibling)&&j.removeClass(c,"mceLast"),j.addClass(o,"mceLast"))}})})(tinymce);
(function(c){var i=c.DOM;c.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(c,g,b){this.parent(c,g,b);this.classPrefix="mceButton"},renderHTML:function(){var c=this.classPrefix,g=this.settings,b,a;a=i.encode(g.label||"");b='<a role="button" id="'+this.id+'" href="javascript:;" class="'+c+" "+c+"Enabled "+g["class"]+(a?" "+c+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+i.encode(g.title)+'">';b+=g.image?'<img class="mceIcon" src="'+
g.image+'" alt="'+i.encode(g.title)+'" />'+a:'<span class="mceIcon '+g["class"]+'"></span>'+(a?'<span class="'+c+'Label">'+a+"</span>":"");b+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+g.title+"</span>";b+="</a>";return b},postRender:function(){var i=this,g=i.settings;c.dom.Event.add(i.id,"click",function(b){if(!i.isDisabled())return g.onclick.call(g.scope,b)})}})})(tinymce);
(function(c){var i=c.DOM,j=c.dom.Event,g=c.each,b=c.util.Dispatcher;c.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(a,f,d){this.parent(a,f,d);this.items=[];this.onChange=new b(this);this.onPostRender=new b(this);this.onAdd=new b(this);this.onRenderMenu=new c.util.Dispatcher(this);this.classPrefix="mceListBox"},select:function(a){var b=this,c,i;if(a==void 0)return b.selectByIndex(-1);i=a&&a.call?a:function(b){return b==a};a!=b.selectedValue&&(g(b.items,function(a,g){if(i(a.value))return c=
1,b.selectByIndex(g),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){var b,c;if(a!=this.selectedIndex)b=i.get(this.id+"_text"),(c=this.items[a])?(this.selectedValue=c.value,this.selectedIndex=a,i.setHTML(b,i.encode(c.title)),i.removeClass(b,"mceTitle"),i.setAttrib(this.id,"aria-valuenow",c.title)):(i.setHTML(b,i.encode(this.settings.title)),i.addClass(b,"mceTitle"),this.selectedValue=this.selectedIndex=null,i.setAttrib(this.id,"aria-valuenow",this.settings.title))},add:function(a,b,d){d=d||
{};d=c.extend(d,{title:a,value:b});this.items.push(d);this.onAdd.dispatch(this,d)},getLength:function(){return this.items.length},renderHTML:function(){var a="",a=this.settings,b=this.classPrefix,a='<span role="button" aria-haspopup="true" aria-labelledby="'+this.id+'_text" aria-describedby="'+this.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+this.id+'" cellpadding="0" cellspacing="0" class="'+b+" "+b+"Enabled"+(a["class"]?" "+a["class"]:"")+'"><tbody><tr>';a+="<td>"+i.createHTML("span",
{id:this.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},this.settings.title);a+=i.createHTML("a",{id:this.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},i.encode(this.settings.title))+"</td>";a+="<td>"+i.createHTML("a",{id:this.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25bc</span></span>')+
"</td>";a+="</tr></tbody></table></span>";return a},showMenu:function(){var a=this,b,d=i.get(this.id),n;if(!(a.isDisabled()||a.items.length==0)){if(a.menu&&a.menu.isMenuVisible)return a.hideMenu();if(!a.isMenuRendered)a.renderMenu(),a.isMenuRendered=!0;i.getPos(this.settings.menu_container);b=i.getPos(d);n=a.menu;n.settings.offset_x=b.x;n.settings.offset_y=b.y;n.settings.keyboard_focus=!c.isOpera;a.oldID&&n.items[a.oldID].setSelected(0);g(a.items,function(b){if(b.value===a.selectedValue)n.items[b.id].setSelected(1),
a.oldID=b.id});n.showMenu(0,d.clientHeight);j.add(i.doc,"mousedown",a.hideMenu,a);i.addClass(a.id,a.classPrefix+"Selected")}},hideMenu:function(a){if(this.menu&&this.menu.isMenuVisible&&(i.removeClass(this.id,this.classPrefix+"Selected"),!a||!(a.type=="mousedown"&&(a.target.id==this.id+"_text"||a.target.id==this.id+"_open"))))if(!a||!i.getParent(a.target,".mceMenu"))i.removeClass(this.id,this.classPrefix+"Selected"),j.remove(i.doc,"mousedown",this.hideMenu,this),this.menu.hideMenu()},renderMenu:function(){var a=
this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});b.onHideMenu.add(function(){a.hideMenu();a.focus()});b.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}});g(a.items,function(c){c.value===void 0?b.add({title:c.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}):(c.id=i.uniqueId(),c.onclick=
function(){a.settings.onselect(c.value)!==!1&&a.select(c.value)},b.add(c))});a.onRenderMenu.dispatch(a,b);a.menu=b},postRender:function(){var a=this,b=a.classPrefix;j.add(a.id,"click",a.showMenu,a);j.add(a.id,"keydown",function(b){b.keyCode==32&&(a.showMenu(b),j.cancel(b))});j.add(a.id,"focus",function(){if(!a._focused)a.keyDownHandler=j.add(a.id,"keydown",function(b){b.keyCode==40&&(a.showMenu(),j.cancel(b))}),a.keyPressHandler=j.add(a.id,"keypress",function(b){var c;if(b.keyCode==13)c=a.selectedValue,
a.selectedValue=null,j.cancel(b),a.settings.onselect(c)});a._focused=1});j.add(a.id,"blur",function(){j.remove(a.id,"keydown",a.keyDownHandler);j.remove(a.id,"keypress",a.keyPressHandler);a._focused=0});if(c.isIE6||!i.boxModel)j.add(a.id,"mouseover",function(){i.hasClass(a.id,b+"Disabled")||i.addClass(a.id,b+"Hover")}),j.add(a.id,"mouseout",function(){i.hasClass(a.id,b+"Disabled")||i.removeClass(a.id,b+"Hover")});a.onPostRender.dispatch(a,i.get(a.id))},destroy:function(){this.parent();j.clear(this.id+
"_text");j.clear(this.id+"_open")}})})(tinymce);
(function(c){var i=c.DOM,j=c.dom.Event,g=c.each;c.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(b,a){this.parent(b,a);this.classPrefix="mceNativeListBox"},setDisabled:function(b){i.get(this.id).disabled=b;this.setAriaProperty("disabled",b)},isDisabled:function(){return i.get(this.id).disabled},select:function(b){var a=this,c,d;if(b==void 0)return a.selectByIndex(-1);d=b&&b.call?b:function(a){return a==b};b!=a.selectedValue&&(g(a.items,function(b,g){if(d(b.value))return c=
1,a.selectByIndex(g),!1}),c||a.selectByIndex(-1))},selectByIndex:function(b){i.get(this.id).selectedIndex=b+1;this.selectedValue=this.items[b]?this.items[b].value:null},add:function(b,a,c){c=c||{};c.value=a;this.isRendered()&&i.add(i.get(this.id),"option",c,b);b={title:b,value:a,attribs:c};this.items.push(b);this.onAdd.dispatch(this,b)},getLength:function(){return this.items.length},renderHTML:function(){var b;b=i.createHTML("option",{value:""},"-- "+this.settings.title+" --");g(this.items,function(a){b+=
i.createHTML("option",{value:a.value},a.title)});b=i.createHTML("select",{id:this.id,"class":"mceNativeListBox","aria-labelledby":this.id+"_aria"},b);b+=i.createHTML("span",{id:this.id+"_aria",style:"display: none"},this.settings.title);return b},postRender:function(){function b(b){if((b=a.items[b.target.selectedIndex-1])&&(b=b.value))if(a.onChange.dispatch(a,b),a.settings.onselect)a.settings.onselect(b)}var a=this,c=!0;a.rendered=!0;j.add(a.id,"change",b);j.add(a.id,"keydown",function(d){var g;j.remove(a.id,
"change",void 0);c=!1;g=j.add(a.id,"blur",function(){c||(c=!0,j.add(a.id,"change",b),j.remove(a.id,"blur",g))});if(d.keyCode==13||d.keyCode==32)return b(d),j.cancel(d)});a.onPostRender.dispatch(a,i.get(a.id))}})})(tinymce);
(function(c){var i=c.DOM,j=c.dom.Event;c.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(g,b,a){this.parent(g,b,a);this.onRenderMenu=new c.util.Dispatcher(this);b.menu_container=b.menu_container||i.doc.body},showMenu:function(){var c,b=i.get(this.id),a;if(!this.isDisabled()){if(!this.isMenuRendered)this.renderMenu(),this.isMenuRendered=!0;if(this.isMenuVisible)return this.hideMenu();i.getPos(this.settings.menu_container);c=i.getPos(b);a=this.menu;a.settings.offset_x=c.x;a.settings.offset_y=
c.y;a.settings.vp_offset_x=c.x;a.settings.vp_offset_y=c.y;a.settings.keyboard_focus=this._focused;a.showMenu(0,b.clientHeight);j.add(i.doc,"mousedown",this.hideMenu,this);this.setState("Selected",1);this.isMenuVisible=1}},renderMenu:function(){var c=this,b;b=c.settings.control_manager.createDropMenu(c.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:c.settings.icons});b.onHideMenu.add(function(){c.hideMenu();c.focus()});c.onRenderMenu.dispatch(c,b);c.menu=b},hideMenu:function(c){var b=
this;if(!c||!(c.type=="mousedown"&&i.getParent(c.target,function(a){return a.id===b.id||a.id===b.id+"_open"}))){if(!c||!i.getParent(c.target,".mceMenu"))b.setState("Selected",0),j.remove(i.doc,"mousedown",b.hideMenu,b),b.menu&&b.menu.hideMenu();b.isMenuVisible=0}},postRender:function(){var c=this,b=c.settings;j.add(c.id,"click",function(){if(!c.isDisabled()){if(b.onclick)b.onclick(c.value);c.showMenu()}})}})})(tinymce);
(function(c){var i=c.DOM,j=c.dom.Event;c.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(c,b,a){this.parent(c,b,a);this.classPrefix="mceSplitButton"},renderHTML:function(){var c,b=this.settings,a;c="<tbody><tr>";a=b.image?i.createHTML("img ",{src:b.image,role:"presentation","class":"mceAction "+b["class"]}):i.createHTML("span",{"class":"mceAction "+b["class"]},"");a+=i.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:this.id+"_voice",style:"display:none;"},b.title);
c+="<td >"+i.createHTML("a",{role:"button",id:this.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+b["class"],onclick:"return false;",onmousedown:"return false;",title:b.title},a)+"</td>";a=i.createHTML("span",{"class":"mceOpen "+b["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25bc</span>');c+="<td >"+i.createHTML("a",{role:"button",id:this.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+b["class"],onclick:"return false;",onmousedown:"return false;",
title:b.title},a)+"</td>";c+="</tr></tbody>";c=i.createHTML("table",{id:this.id,role:"presentation",tabindex:"0","class":"mceSplitButton mceSplitButtonEnabled "+b["class"],cellpadding:"0",cellspacing:"0",title:b.title},c);return i.createHTML("span",{role:"button","aria-labelledby":this.id+"_voice","aria-haspopup":"true"},c)},postRender:function(){var g=this,b=g.settings,a;b.onclick&&(a=function(a){g.isDisabled()||(b.onclick(g.value),j.cancel(a))},j.add(g.id+"_action","click",a),j.add(g.id,["click",
"keydown"],function(b){if((b.keyCode===32||b.keyCode===13||b.keyCode===14)&&!b.altKey&&!b.ctrlKey&&!b.metaKey)a(),j.cancel(b);else if(b.type==="click"||b.keyCode===40)g.showMenu(),j.cancel(b)}));j.add(g.id+"_open","click",function(a){g.showMenu();j.cancel(a)});j.add([g.id,g.id+"_open"],"focus",function(){g._focused=1});j.add([g.id,g.id+"_open"],"blur",function(){g._focused=0});if(c.isIE6||!i.boxModel)j.add(g.id,"mouseover",function(){i.hasClass(g.id,"mceSplitButtonDisabled")||i.addClass(g.id,"mceSplitButtonHover")}),
j.add(g.id,"mouseout",function(){i.hasClass(g.id,"mceSplitButtonDisabled")||i.removeClass(g.id,"mceSplitButtonHover")})},destroy:function(){this.parent();j.clear(this.id+"_action");j.clear(this.id+"_open");j.clear(this.id)}})})(tinymce);
(function(c){var i=c.DOM,j=c.dom.Event,g=c.is,b=c.each;c.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(a,b,d){this.parent(a,b,d);this.settings=b=c.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},
this.settings);this.onShowMenu=new c.util.Dispatcher(this);this.onHideMenu=new c.util.Dispatcher(this);this.value=b.default_color},showMenu:function(){var a=this,b,c;if(!a.isDisabled()){if(!a.isMenuRendered)a.renderMenu(),a.isMenuRendered=!0;if(a.isMenuVisible)return a.hideMenu();b=i.get(a.id);i.show(a.id+"_menu");i.addClass(b,"mceSplitButtonSelected");c=i.getPos(b);i.setStyles(a.id+"_menu",{left:c.x,top:c.y+b.clientHeight,zIndex:2E5});b=0;j.add(i.doc,"mousedown",a.hideMenu,a);a.onShowMenu.dispatch(a);
if(a._focused)a._keyHandler=j.add(a.id+"_menu","keydown",function(b){b.keyCode==27&&a.hideMenu()}),i.select("a",a.id+"_menu")[0].focus();a.isMenuVisible=1}},hideMenu:function(a){var b=this;if(b.isMenuVisible&&(!a||!(a.type=="mousedown"&&i.getParent(a.target,function(a){return a.id===b.id+"_open"})))){if(!a||!i.getParent(a.target,".mceSplitButtonMenu"))i.removeClass(b.id,"mceSplitButtonSelected"),j.remove(i.doc,"mousedown",b.hideMenu,b),j.remove(b.id+"_menu","keydown",b._keyHandler),i.hide(b.id+"_menu");
b.isMenuVisible=0}},renderMenu:function(){var a=this,f,d=0,n=a.settings,k,m,o,e,h;e=i.add(n.menu_container,"div",{role:"listbox",id:a.id+"_menu","class":n.menu_class+" "+n["class"],style:"position:absolute;left:0;top:-1000px;"});f=i.add(e,"div",{"class":n["class"]+" mceSplitButtonMenu"});i.add(f,"span",{"class":"mceMenuLine"});k=i.add(f,"table",{role:"presentation","class":"mceColorSplitMenu"});m=i.add(k,"tbody");d=0;b(g(n.colors,"array")?n.colors:n.colors.split(","),function(b){b=b.replace(/^#/,
"");d--||(o=i.add(m,"tr"),d=n.grid_width-1);k=i.add(o,"td");k=i.add(k,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+b},title:a.editor.getLang("colors."+b,b),"data-mce-color":"#"+b});if(a.editor.forcedHighContrastMode)k=i.add(k,"canvas",{width:16,height:16,"aria-hidden":"true"}),k.getContext&&(h=k.getContext("2d"))?(h.fillStyle="#"+b,h.fillRect(0,0,16,16)):i.remove(k)});n.more_colors_func&&(k=i.add(m,"tr"),k=i.add(k,"td",{colspan:n.grid_width,"class":"mceMoreColors"}),k=i.add(k,
"a",{role:"option",id:a.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},n.more_colors_title),j.add(k,"click",function(a){n.more_colors_func.call(n.more_colors_scope||this);return j.cancel(a)}));i.addClass(f,"mceColorSplitMenu");new c.ui.KeyboardNavigation({root:a.id+"_menu",items:i.select("a",a.id+"_menu"),onCancel:function(){a.hideMenu();a.focus()}});j.add(a.id+"_menu","mousedown",function(a){return j.cancel(a)});j.add(a.id+"_menu","click",function(b){var e;(b=i.getParent(b.target,
"a",m))&&b.nodeName.toLowerCase()=="a"&&(e=b.getAttribute("data-mce-color"))&&a.setColor(e);return j.cancel(b)});return e},setColor:function(a){this.displayColor(a);this.hideMenu();this.settings.onselect(a)},displayColor:function(a){i.setStyle(this.id+"_preview","backgroundColor",a);this.value=a},postRender:function(){var a=this.id;this.parent();i.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"});i.setStyle(this.id+"_preview","backgroundColor",this.value)},destroy:function(){this.parent();
j.clear(this.id+"_menu");j.clear(this.id+"_more");i.remove(this.id+"_menu")}})})(tinymce);
(function(c){var i=c.DOM,j=c.each,g=c.dom.Event;c.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var b=[],a=this.controls,f=c.each,d=this.settings;b.push('<div id="'+this.id+'" role="group" aria-labelledby="'+this.id+'_voice">');b.push("<span role='application'>");b.push('<span id="'+this.id+'_voice" class="mceVoiceLabel" style="display:none;">'+i.encode(d.name)+"</span>");f(a,function(a){b.push(a.renderHTML())});b.push("</span>");b.push("</div>");return b.join("")},
focus:function(){this.keyNav.focus()},postRender:function(){var b=this,a=[];j(b.controls,function(b){j(b.controls,function(b){b.id&&a.push(b)})});b.keyNav=new c.ui.KeyboardNavigation({root:b.id,items:a,onCancel:function(){b.editor.focus()},excludeFromTabOrder:!b.settings.tab_focus_toolbar})},destroy:function(){this.parent();this.keyNav.destroy();g.clear(this.id)}})})(tinymce);
(function(c){var i=c.DOM;c.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var c="",g,b,a=this.settings,f,d,n,k;k=this.controls;for(f=0;f<k.length;f++){b=k[f];d=k[f-1];n=k[f+1];f===0&&(g="mceToolbarStart",b.Button?g+=" mceToolbarStartButton":b.SplitButton?g+=" mceToolbarStartSplitButton":b.ListBox&&(g+=" mceToolbarStartListBox"),c+=i.createHTML("td",{"class":g},i.createHTML("span",null,"<\!-- IE --\>")));if(d&&b.ListBox&&(d.Button||d.SplitButton))c+=i.createHTML("td",{"class":"mceToolbarEnd"},
i.createHTML("span",null,"<\!-- IE --\>"));c+=i.stdMode?'<td style="position: relative">'+b.renderHTML()+"</td>":"<td>"+b.renderHTML()+"</td>";if(n&&b.ListBox&&(n.Button||n.SplitButton))c+=i.createHTML("td",{"class":"mceToolbarStart"},i.createHTML("span",null,"<\!-- IE --\>"))}g="mceToolbarEnd";b.Button?g+=" mceToolbarEndButton":b.SplitButton?g+=" mceToolbarEndSplitButton":b.ListBox&&(g+=" mceToolbarEndListBox");c+=i.createHTML("td",{"class":g},i.createHTML("span",null,"<\!-- IE --\>"));return i.createHTML("table",
{id:this.id,"class":"mceToolbar"+(a["class"]?" "+a["class"]:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+c+"</tr></tbody>")}})})(tinymce);
(function(c){var i=c.util.Dispatcher;c.create("tinymce.AddOnManager",{AddOnManager:function(){this.items=[];this.urls={};this.lookup={};this.onAdd=new i(this)},get:function(c){return this.lookup[c]},requireLangPack:function(i){var g=c.settings;g&&g.language&&g.language_load!==!1&&c.ScriptLoader.add(this.urls[i]+"/langs/"+g.language+".js")},add:function(c,g){this.items.push(g);this.lookup[c]=g;this.onAdd.dispatch(this,c,g);return g},load:function(i,g,b,a){this.urls[i]||(g.indexOf("/")!=0&&g.indexOf("://")==
-1&&(g=c.baseURL+"/"+g),this.urls[i]=g.substring(0,g.lastIndexOf("/")),this.lookup[i]||c.ScriptLoader.add(g,b,a))}});c.PluginManager=new c.AddOnManager;c.ThemeManager=new c.AddOnManager})(tinymce);
(function(c){var i=c.each,j=c.extend,g=c.DOM,b=c.dom.Event,a=c.explode,f=c.util.Dispatcher,d=0;c.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");/[\/\\]$/.test(c.documentBaseURL)||(c.documentBaseURL+="/");c.baseURL=(new c.util.URI(c.documentBaseURL)).toAbsolute(c.baseURL);c.baseURI=new c.util.URI(c.baseURL);c.onBeforeUnload=new f(c);b.add(window,"beforeunload",function(a){c.onBeforeUnload.dispatch(c,a)});c.onAddEditor=new f(c);c.onRemoveEditor=new f(c);c.EditorManager=
j(c,{editors:[],i18n:{},activeEditor:null,init:function(f){function k(a,b,e){var d=a[b];if(d)return c.is(d,"string")&&(e=(e=d.replace(/\.\w+$/,""))?c.resolve(e):0,d=c.resolve(d)),d.apply(e||this,Array.prototype.slice.call(arguments,2))}var m=this,o,e=[],h,f=j({theme:"simple",language:"en"},f);m.settings=f;b.add(document,"init",function(){var b,j;k(f,"onpageload");switch(f.mode){case "exact":b=f.elements||"";b.length>0&&i(a(b),function(a){g.get(a)?(h=new c.Editor(a,f),e.push(h),h.render(1)):i(document.forms,
function(b){i(b.elements,function(b){b.name===a&&(a="mce_editor_"+d++,g.setAttrib(b,"id",a),h=new c.Editor(a,f),e.push(h),h.render(1))})})});break;case "textareas":case "specific_textareas":i(g.select("textarea"),function(a){if(!f.editor_deselector||!(f.editor_deselector.constructor===RegExp?f.editor_deselector.test(a.className):g.hasClass(a,f.editor_deselector)))if(!f.editor_selector||(f.editor_selector.constructor===RegExp?f.editor_selector.test(a.className):g.hasClass(a,f.editor_selector))){o=
g.get(a.name);if(!a.id&&!o)a.id=a.name;if(!a.id||m.get(a.id))a.id=g.uniqueId();h=new c.Editor(a.id,f);e.push(h);h.render(1)}})}f.oninit&&(b=j=0,i(e,function(a){j++;a.initialized?b++:a.onInit.add(function(){b++;b==j&&k(f,"oninit")});b==j&&k(f,"oninit")}))})},get:function(a){if(a===void 0)return this.editors;return this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){var b=this.editors;b[a.id]=a;b.push(a);this._setActive(a);this.onAddEditor.dispatch(this,a);return a},remove:function(a){var b,
c=this.editors;if(!c[a.id])return null;delete c[a.id];for(b=0;b<c.length;b++)if(c[b]==a){c.splice(b,1);break}this.activeEditor==a&&this._setActive(c[0]);a.destroy();this.onRemoveEditor.dispatch(this,a);return a},execCommand:function(a,b,d){var f=this.get(d),e;switch(a){case "mceFocus":return f.focus(),!0;case "mceAddEditor":case "mceAddControl":return this.get(d)||(new c.Editor(d,this.settings)).render(),!0;case "mceAddFrameControl":e=d.window;e.tinyMCE=tinyMCE;e.tinymce=c;c.DOM.doc=e.document;c.DOM.win=
e;f=new c.Editor(d.element_id,d);f.render();if(c.isIE){var h=function(){var k;f.destroy();e.detachEvent("onunload",h);k=e.tinyMCE=e.tinymce=null,e=k};e.attachEvent("onunload",h)}d.page_window=null;return!0;case "mceRemoveEditor":case "mceRemoveControl":return f&&f.remove(),!0;case "mceToggleEditor":if(!f)return this.execCommand("mceAddControl",0,d),!0;f.isHidden()?f.show():f.hide();return!0}if(this.activeEditor)return this.activeEditor.execCommand(a,b,d);return!1},execInstanceCommand:function(a,b,
c,d){if(a=this.get(a))return a.execCommand(b,c,d);return!1},triggerSave:function(){i(this.editors,function(a){a.save()})},addI18n:function(a,b){var d=this.i18n;c.is(a,"string")?i(b,function(b,e){d[a+"."+e]=b}):i(a,function(a,b){i(a,function(a,c){i(a,function(a,h){c==="common"?d[b+"."+h]=a:d[b+"."+c+"."+h]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})})(tinymce);
(function(c){var i=c.DOM,j=c.dom.Event,g=c.extend,b=c.util.Dispatcher,a=c.each,f=c.isGecko,d=c.isIE,n=c.is,k=c.ThemeManager,m=c.PluginManager,o=c.explode;c.create("tinymce.Editor",{Editor:function(e,d){var f=this;f.id=f.editorId=e;f.execCommands={};f.queryStateCommands={};f.queryValueCommands={};f.isNotDirty=!1;f.plugins={};a(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp",
"onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(a){f[a]=new b(f)});f.settings=d=g({id:e,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:c.documentBaseURL,
add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:c.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",
apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,
entity_encoding:"named",url_converter:f.convertURL,url_converter_scope:f,ie7_compat:!0},d);f.documentBaseURI=new c.util.URI(d.document_base_url||c.documentBaseURL,{base_uri:tinyMCE.baseURI});f.baseURI=c.baseURI;f.contentCSS=[];f.execCallback("setup",f)},render:function(){var b=this,d=b.settings,f=b.id,g=c.ScriptLoader;if(j.domLoaded){if(tinyMCE.settings=d,b.getElement()&&!c.isIDevice){!/TEXTAREA|INPUT/i.test(b.getElement().nodeName)&&d.hidden_input&&i.getParent(f,"form")&&i.insertAfter(i.create("input",
{type:"hidden",name:f}),f);if(c.WindowManager)b.windowManager=new c.WindowManager(b);d.encoding=="xml"&&b.onGetContent.add(function(a,b){if(b.save)b.content=i.encode(b.content)});d.add_form_submit_trigger&&b.onSubmit.addToTop(function(){if(b.initialized)b.save(),b.isNotDirty=1});if(d.add_unload_trigger)b._beforeUnload=tinyMCE.onBeforeUnload.add(function(){b.initialized&&!b.destroyed&&!b.isHidden()&&b.save({format:"raw",no_events:!0})});c.addUnload(b.destroy,b);d.submit_patch&&b.onBeforeRenderUI.add(function(){var a=
b.getElement().form;if(a&&!a._mceOldSubmit){if(!a.submit.nodeType&&!a.submit.length)b.formElement=a,a._mceOldSubmit=a.submit,a.submit=function(){c.triggerSave();b.isNotDirty=1;return b.formElement._mceOldSubmit(b.formElement)};a=null}});(function(){d.language&&d.language_load!==!1&&g.add(c.baseURL+"/langs/"+d.language+".js");d.theme&&d.theme.charAt(0)!="-"&&!k.urls[d.theme]&&k.load(d.theme,"themes/"+d.theme+"/editor_template"+c.suffix+".js");a(o(d.plugins),function(a){a&&a.charAt(0)!="-"&&!m.urls[a]&&
a!="safari"&&m.load(a,"plugins/"+a+"/editor_plugin"+c.suffix+".js")});g.loadQueue(function(){b.removed||b.init()})})()}}else j.add(document,"init",function(){b.render()})},init:function(){var b=this,h=b.settings,g,j,l=b.getElement(),n,B,r;c.add(b);h.aria_label=h.aria_label||i.getAttrib(l,"aria-label",b.getLang("aria.rich_text_area"));if(h.theme)h.theme=h.theme.replace(/-/,""),n=k.get(h.theme),b.theme=new n,b.theme.init&&h.init_theme&&b.theme.init(b,k.urls[h.theme]||c.documentBaseURL.replace(/\/$/,
""));a(o(h.plugins.replace(/\-/g,"")),function(a){var d=m.get(a),h=m.urls[a]||c.documentBaseURL.replace(/\/$/,"");d&&(d=new d(b,h),b.plugins[a]=d,d.init&&d.init(b,h))});if(h.popup_css!==!1)h.popup_css=h.popup_css?b.documentBaseURI.toAbsolute(h.popup_css):b.baseURI.toAbsolute("themes/"+h.theme+"/skins/"+h.skin+"/dialog.css");h.popup_css_add&&(h.popup_css+=","+b.documentBaseURI.toAbsolute(h.popup_css_add));b.controlManager=new c.ControlManager(b);h.custom_undo_redo&&(b.onBeforeExecCommand.add(function(a,
c,d,h,f){c!="Undo"&&c!="Redo"&&c!="mceRepaint"&&(!f||!f.skip_undo)&&b.undoManager.beforeChange()}),b.onExecCommand.add(function(a,c,d,h,f){c!="Undo"&&c!="Redo"&&c!="mceRepaint"&&(!f||!f.skip_undo)&&b.undoManager.add()}));b.onExecCommand.add(function(a,c){/^(FontName|FontSize)$/.test(c)||b.nodeChanged()});f&&(r=function(a,c){(!c||!c.initial)&&b.execCommand("mceRepaint")},b.onUndo.add(r),b.onRedo.add(r),b.onSetContent.add(r));b.onBeforeRenderUI.dispatch(b,b.controlManager);if(h.render_ui)g=h.width||
l.style.width||l.offsetWidth,j=h.height||l.style.height||l.offsetHeight,b.orgDisplay=l.style.display,r=/^[0-9\.]+(|px)$/i,r.test(""+g)&&(g=Math.max(parseInt(g)+(n.deltaWidth||0),100)),r.test(""+j)&&(j=Math.max(parseInt(j)+(n.deltaHeight||0),100)),n=b.theme.renderUI({targetNode:l,width:g,height:j,deltaWidth:h.delta_width,deltaHeight:h.delta_height}),b.editorContainer=n.editorContainer;if(document.domain&&location.hostname!=document.domain)c.relaxedDomain=document.domain;i.setStyles(n.sizeContainer||
n.editorContainer,{width:g,height:j});h.content_css&&c.each(o(h.content_css),function(a){b.contentCSS.push(b.documentBaseURI.toAbsolute(a))});j=(n.iframeHeight||j)+(typeof j=="number"?n.deltaHeight||0:"");j<100&&(j=100);b.iframeHTML=h.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';h.document_base_url!=c.documentBaseURL&&(b.iframeHTML+='<base href="'+b.documentBaseURI.getURI()+'" />');b.iframeHTML+=h.ie7_compat?'<meta http-equiv="X-UA-Compatible" content="IE=7" />':'<meta http-equiv="X-UA-Compatible" content="IE=edge" />';
b.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(!f||!/Firefox\/2/.test(navigator.userAgent)){for(g=0;g<b.contentCSS.length;g++)b.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+b.contentCSS[g]+'" />';b.contentCSS=[]}g=h.body_id||"tinymce";g.indexOf("=")!=-1&&(g=b.getParam("body_id","","hash"),g=g[b.id]||g);l=h.body_class||"";l.indexOf("=")!=-1&&(l=b.getParam("body_class","","hash"),l=l[b.id]||"");b.iframeHTML+='</head><body id="'+g+'" class="mceContentBody '+
l+'"></body></html>';if(c.relaxedDomain&&(d||c.isOpera&&parseFloat(opera.version())<11))B='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+b.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()';i.add(n.iframeContainer,"iframe",{id:b.id+"_ifr",src:B||'javascript:""',frameBorder:"0",title:h.aria_label,style:{width:"100%",height:j}});b.contentAreaContainer=n.iframeContainer;i.get(n.editorContainer).style.display=
b.orgDisplay;i.get(b.id).style.display="none";i.setAttrib(b.id,"aria-hidden",!0);(!c.relaxedDomain||!B)&&b.setupIframe();l=n=null},setupIframe:function(){var b=this,h=b.settings;i.get(b.id);var g=b.getDoc(),k;if(!d||!c.relaxedDomain)if(g.open(),g.write(b.iframeHTML),g.close(),c.relaxedDomain)g.domain=c.relaxedDomain;if(!d)try{if(!h.readonly)g.designMode="On"}catch(l){}if(d){k=b.getBody();i.hide(k);if(!h.readonly)k.contentEditable=!0;i.show(k)}b.schema=new c.html.Schema(h);b.dom=new c.dom.DOMUtils(b.getDoc(),
{keep_values:!0,url_converter:b.convertURL,url_converter_scope:b,hex_colors:h.force_hex_style_colors,class_filter:h.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:b.schema});b.parser=new c.html.DomParser(h,b.schema);b.parser.addAttributeFilter("name",function(a){for(var b=a.length,c,d,e,h;b--;)if(h=a[b],h.name==="a"&&h.firstChild){e=h.parent;c=h.lastChild;do d=c.prev,e.insert(c,h),c=d;while(c)}});b.parser.addAttributeFilter("src,href,style",function(a,c){for(var d=a.length,h,f=b.dom,g;d--;)h=
a[d],g=h.attr(c),c==="style"?h.attr("data-mce-style",f.serializeStyle(f.parseStyle(g),h.name)):h.attr("data-mce-"+c,b.convertURL(g,c,h.name))});b.parser.addNodeFilter("script",function(a){for(var b=a.length;b--;)a[b].attr("type","mce-text/javascript")});b.parser.addNodeFilter("#cdata",function(a){for(var b=a.length,c;b--;)c=a[b],c.type=8,c.name="#comment",c.value="[CDATA["+c.value+"]]"});b.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(a){for(var d=a.length,h,f=b.schema.getNonEmptyElements();d--;)if(h=
a[d],h.isEmpty(f))h.empty().append(new c.html.Node("br",1)).shortEnded=!0});b.serializer=new c.dom.Serializer(h,b.dom,b.schema);b.selection=new c.dom.Selection(b.dom,b.getWin(),b.serializer);b.formatter=new c.Formatter(this);b.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",
collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],
italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},
fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]});a("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),
function(a){b.formatter.register(a,{block:a,remove:"all"})});b.formatter.register(b.settings.formats);b.undoManager=new c.UndoManager(b);b.undoManager.onAdd.add(function(a,c){if(a.hasUndo())return b.onChange.dispatch(b,c,a)});b.undoManager.onUndo.add(function(a,c){return b.onUndo.dispatch(b,c,a)});b.undoManager.onRedo.add(function(a,c){return b.onRedo.dispatch(b,c,a)});b.forceBlocks=new c.ForceBlocks(b,{forced_root_block:h.forced_root_block});b.editorCommands=new c.EditorCommands(b);b.serializer.onPreProcess.add(function(a,
c){return b.onPreProcess.dispatch(b,c,a)});b.serializer.onPostProcess.add(function(a,c){return b.onPostProcess.dispatch(b,c,a)});b.onPreInit.dispatch(b);if(!h.gecko_spellcheck)b.getBody().spellcheck=0;h.readonly||b._addEvents();b.controlManager.onPostRender.dispatch(b,b.controlManager);b.onPostRender.dispatch(b);if(h.directionality)b.getBody().dir=h.directionality;if(h.nowrap)b.getBody().style.whiteSpace="nowrap";h.handle_node_change_callback&&b.onNodeChange.add(function(a,c,d){b.execCallback("handle_node_change_callback",
b.id,d,-1,-1,!0,b.selection.isCollapsed())});h.save_callback&&b.onSaveContent.add(function(a,c){var d=b.execCallback("save_callback",b.id,c.content,b.getBody());if(d)c.content=d});h.onchange_callback&&b.onChange.add(function(a,c){b.execCallback("onchange_callback",b,c)});h.protect&&b.onBeforeSetContent.add(function(b,c){h.protect&&a(h.protect,function(a){c.content=c.content.replace(a,function(a){return"<\!--mce:protected "+escape(a)+"--\>"})})});h.convert_newlines_to_brs&&b.onBeforeSetContent.add(function(a,
b){if(b.initial)b.content=b.content.replace(/\r?\n/g,"<br />")});h.preformatted&&b.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,"");b.content=b.content.replace(/<\/pre>\s*$/,"");if(b.set)b.content='<pre class="mceItemHidden">'+b.content+"</pre>"});if(h.verify_css_classes)b.serializer.attribValueFilter=function(c,d){var h,f;if(c=="class"){if(!b.classesRE&&(f=b.dom.getClasses(),f.length>0))h="",a(f,function(a){h+=(h?"|":"")+a["class"]}),b.classesRE=RegExp("("+h+")","gi");
return!b.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(d)||b.classesRE.test(d)?d:""}return d};h.cleanup_callback&&(b.onBeforeSetContent.add(function(a,c){c.content=b.execCallback("cleanup_callback","insert_to_editor",c.content,c)}),b.onPreProcess.add(function(a,c){c.set&&b.execCallback("cleanup_callback","insert_to_editor_dom",c.node,c);c.get&&b.execCallback("cleanup_callback","get_from_editor_dom",c.node,c)}),b.onPostProcess.add(function(a,c){if(c.set)c.content=b.execCallback("cleanup_callback",
"insert_to_editor",c.content,c);if(c.get)c.content=b.execCallback("cleanup_callback","get_from_editor",c.content,c)}));h.save_callback&&b.onGetContent.add(function(a,c){if(c.save)c.content=b.execCallback("save_callback",b.id,c.content,b.getBody())});h.handle_event_callback&&b.onEvent.add(function(a,c,d){b.execCallback("handle_event_callback",c,a,d)===!1&&j.cancel(c)});b.onSetContent.add(function(){b.addVisual(b.getBody())});h.padd_empty_editor&&b.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,
"")});if(f){var m=function(b){a(b.dom.select("a"),function(a){var c=a.parentNode;b.dom.isBlock(c)&&c.lastChild===a&&b.dom.add(c,"br",{"data-mce-bogus":1})})};b.onExecCommand.add(function(a,b){b==="CreateLink"&&m(a)});b.onSetContent.add(b.selection.onSetContent.add(m));if(!h.readonly)try{g.designMode="Off",g.designMode="On"}catch(n){}}setTimeout(function(){if(!b.removed)b.load({initial:!0,format:"html"}),b.startContent=b.getContent({format:"raw"}),b.undoManager.add(),b.initialized=!0,b.onInit.dispatch(b),
b.execCallback("setupcontent_callback",b.id,b.getBody(),b.getDoc()),b.execCallback("init_instance_callback",b),b.focus(!0),b.nodeChanged({initial:1}),a(b.contentCSS,function(a){b.dom.loadCSS(a)}),h.auto_focus&&setTimeout(function(){var a=c.get(h.auto_focus);a.selection.select(a.getBody(),1);a.selection.collapse(1);a.getWin().focus()},100)},1)},focus:function(a){var b,d=this.settings.content_editable,f,g=this.getDoc();a||(a=this.selection.getRng(),a.item&&(f=a.item(0)),d||this.getWin().focus(),f&&
f.ownerDocument==g&&(a=g.body.createControlRange(),a.addElement(f),a.select()));if(c.activeEditor!=this)(b=c.activeEditor)!=null&&b.onDeactivate.dispatch(b,this),this.onActivate.dispatch(this,b);c._setActive(this)},execCallback:function(a){var b=this.settings[a],d;if(b){if(this.callbackLookup&&(d=this.callbackLookup[a]))b=d.func,d=d.scope;if(n(b,"string"))d=(d=b.replace(/\.\w+$/,""))?c.resolve(d):0,b=c.resolve(b),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[a]={func:b,scope:d};
return b.apply(d||this,Array.prototype.slice.call(arguments,1))}},translate:function(a){var b=this.settings.language||"en",d=c.i18n;if(!a)return"";return d[b+"."+a]||a.replace(/{\#([^}]+)\}/g,function(a,c){return d[b+"."+c]||"{#"+c+"}"})},getLang:function(a,b){return c.i18n[(this.settings.language||"en")+"."+a]||(n(b)?b:"{#"+a+"}")},getParam:function(b,d,f){var g=c.trim,b=n(this.settings[b])?this.settings[b]:d,i;if(f==="hash")return i={},n(b,"string")?a(b.indexOf("=")>0?b.split(/[;,](?![^=;,]*(?:[;,]|$))/):
b.split(","),function(a){a=a.split("=");a.length>1?i[g(a[0])]=g(a[1]):i[g(a[0])]=g(a)}):i=b,i;return b},nodeChanged:function(a){var b=this.selection,c=b.getStart()||this.getBody();if(this.initialized)a=a||{},c=d&&c.ownerDocument!=this.getDoc()?this.getBody():c,a.parents=[],this.dom.getParent(c,function(b){if(b.nodeName=="BODY")return!0;a.parents.push(b)}),this.onNodeChange.dispatch(this,a?a.controlManager||this.controlManager:this.controlManager,c,b.isCollapsed(),a)},addButton:function(a,b){this.buttons=
this.buttons||{};this.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(b,c,d,f){var g=this,i;if(!g.settings.custom_shortcuts)return!1;g.shortcuts=g.shortcuts||{};n(d,"string")&&(i=d,d=function(){g.execCommand(i,!1,null)});n(d,"object")&&(i=d,d=function(){g.execCommand(i[0],
i[1],i[2])});a(o(b),function(b){var e={func:d,scope:f||this,desc:c,alt:!1,ctrl:!1,shift:!1};a(o(b,"+"),function(a){switch(a){case "alt":case "ctrl":case "shift":e[a]=!0;break;default:e.charCode=a.charCodeAt(0),e.keyCode=a.toUpperCase().charCodeAt(0)}});g.shortcuts[(e.ctrl?"ctrl":"")+","+(e.alt?"alt":"")+","+(e.shift?"shift":"")+","+e.keyCode]=e});return!0},execCommand:function(b,c,d,f){var g=this,i=0,j;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(b)&&(!f||!f.skip_focus)&&
g.focus();j={};g.onBeforeExecCommand.dispatch(g,b,c,d,j);if(j.terminate)return!1;if(g.execCallback("execcommand_callback",g.id,g.selection.getNode(),b,c,d))return g.onExecCommand.dispatch(g,b,c,d,f),!0;if(j=g.execCommands[b])if(j=j.func.call(j.scope,c,d),j!==!0)return g.onExecCommand.dispatch(g,b,c,d,f),j;a(g.plugins,function(a){if(a.execCommand&&a.execCommand(b,c,d))return g.onExecCommand.dispatch(g,b,c,d,f),i=1,!1});if(i)return!0;if(g.theme&&g.theme.execCommand&&g.theme.execCommand(b,c,d))return g.onExecCommand.dispatch(g,
b,c,d,f),!0;if(g.editorCommands.execCommand(b,c,d))return g.onExecCommand.dispatch(g,b,c,d,f),!0;g.getDoc().execCommand(b,c,d);g.onExecCommand.dispatch(g,b,c,d,f)},queryCommandState:function(a){var b;if(!this._isHidden()){if(b=this.queryStateCommands[a])if(b=b.func.call(b.scope),b!==!0)return b;b=this.editorCommands.queryCommandState(a);if(b!==-1)return b;try{return this.getDoc().queryCommandState(a)}catch(c){}}},queryCommandValue:function(a){var b;if(!this._isHidden()){if(b=this.queryValueCommands[a])if(b=
b.func.call(b.scope),b!==!0)return b;b=this.editorCommands.queryCommandValue(a);if(n(b))return b;try{return this.getDoc().queryCommandValue(a)}catch(c){}}},show:function(){i.show(this.getContainer());i.hide(this.id);this.load()},hide:function(){var a=this.getDoc();d&&a&&a.execCommand("SelectAll");this.save();i.hide(this.getContainer());i.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!i.isHidden(this.id)},setProgressState:function(a,b,c){this.onSetProgressState.dispatch(this,
a,b,c);return a},load:function(a){var b=this.getElement(),c;if(b)return a=a||{},a.load=!0,c=this.setContent(n(b.value)?b.value:b.innerHTML,a),a.element=b,a.no_events||this.onLoadContent.dispatch(this,a),a.element=null,c},save:function(b){var c=this,d=c.getElement(),f,g;if(d&&c.initialized){b=b||{};b.save=!0;if(!b.no_events)c.undoManager.typing=!1,c.undoManager.add();b.element=d;f=b.content=c.getContent(b);b.no_events||c.onSaveContent.dispatch(c,b);f=b.content;/TEXTAREA|INPUT/i.test(d.nodeName)?d.value=
f:(d.innerHTML=f,(g=i.getParent(c.id,"form"))&&a(g.elements,function(a){if(a.name==c.id)return a.value=f,!1}));b.element=d=null;return f}},setContent:function(a,b){var d=this.getBody(),b=b||{};b.format=b.format||"html";b.set=!0;b.content=a;b.no_events||this.onBeforeSetContent.dispatch(this,b);a=b.content;if(!c.isIE&&(a.length===0||/^\s+$/.test(a)))d.innerHTML='<br data-mce-bogus="1" />';else return b.format!=="raw"&&(a=(new c.html.Serializer({},this.schema)).serialize(this.parser.parse(a))),b.content=
c.trim(a),this.dom.setHTML(d,b.content),b.no_events||this.onSetContent.dispatch(this,b),b.content},getContent:function(a){var b,a=a||{};a.format=a.format||"html";a.get=!0;a.no_events||this.onBeforeGetContent.dispatch(this,a);b=a.format=="raw"?this.getBody().innerHTML:this.serializer.serialize(this.getBody(),a);a.content=c.trim(b);a.no_events||this.onGetContent.dispatch(this,a);return a.content},isDirty:function(){return c.trim(this.startContent)!=c.trim(this.getContent({format:"raw",no_events:1}))&&
!this.isNotDirty},getContainer:function(){if(!this.container)this.container=i.get(this.editorContainer||this.id+"_parent");return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return i.get(this.settings.content_element||this.id)},getWin:function(){var a;if(!this.contentWindow&&(a=i.get(this.id+"_ifr")))this.contentWindow=a.contentWindow;return this.contentWindow},getDoc:function(){var a;if(!this.contentDocument&&(a=this.getWin()))this.contentDocument=
a.document;return this.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this.settings;if(d.urlconverter_callback)return this.execCallback("urlconverter_callback",a,c,!0,b);if(!d.convert_urls||c&&c.nodeName=="LINK"||a.indexOf("file:")===0)return a;if(d.relative_urls)return this.documentBaseURI.toRelative(a);return a=this.documentBaseURI.toAbsolute(a,d.remove_script_host)},addVisual:function(b){var c=this,d=c.settings,b=b||c.getBody();
if(!n(c.hasVisual))c.hasVisual=d.visual;a(c.dom.select("table,a",b),function(a){var b;switch(a.nodeName){case "TABLE":b=c.dom.getAttrib(a,"border");if(!b||b=="0")c.hasVisual?c.dom.addClass(a,d.visual_table_class):c.dom.removeClass(a,d.visual_table_class);break;case "A":(b=c.dom.getAttrib(a,"name"))&&(c.hasVisual?c.dom.addClass(a,"mceItemAnchor"):c.dom.removeClass(a,"mceItemAnchor"))}});c.onVisualAid.dispatch(c,b,c.hasVisual)},remove:function(){var a=this.getContainer();this.removed=1;this.hide();
this.execCallback("remove_instance_callback",this);this.onRemove.dispatch(this);this.onExecCommand.listeners=[];c.remove(this);i.remove(a)},destroy:function(a){if(!this.destroyed){a||(c.removeUnload(this.destroy),tinyMCE.onBeforeUnload.remove(this._beforeUnload),this.theme&&this.theme.destroy&&this.theme.destroy(),this.controlManager.destroy(),this.selection.destroy(),this.dom.destroy(),this.settings.content_editable||(j.clear(this.getWin()),j.clear(this.getDoc())),j.clear(this.getBody()),j.clear(this.formElement));
if(this.formElement)this.formElement.submit=this.formElement._mceOldSubmit,this.formElement._mceOldSubmit=null;this.contentAreaContainer=this.formElement=this.container=this.settings.content_element=this.bodyElement=this.contentDocument=this.contentWindow=null;if(this.selection)this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null;this.destroyed=1}},_addEvents:function(){function b(a,c){h.removed||h.onEvent.dispatch(h,a,c)!==!1&&h[m[a.fakeType||a.type]].dispatch(h,a,c)}
var h=this,g,k=h.settings,l=h.dom,m={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};a(m,function(a,c){switch(c){case "contextmenu":l.bind(h.getDoc(),c,b);break;case "paste":l.bind(h.getBody(),c,function(a){b(a)});break;case "submit":case "reset":l.bind(h.getElement().form||i.getParent(h.id,"form"),c,b);break;default:l.bind(k.content_editable?
h.getBody():h.getDoc(),c,b)}});l.bind(k.content_editable?h.getBody():f?h.getDoc():h.getWin(),"focus",function(){h.focus(!0)});c.isGecko&&l.bind(h.getDoc(),"DOMNodeInserted",function(a){var b,a=a.target;if(a.nodeType===1&&a.nodeName==="IMG"&&(b=a.getAttribute("data-mce-src")))a.src=h.documentBaseURI.toAbsolute(b)});f&&(g=function(){var a=this.getDoc(),b=this.settings;if(f&&!b.readonly){if(this._isHidden())try{if(!b.content_editable)a.designMode="On"}catch(c){}try{a.execCommand("styleWithCSS",0,!1)}catch(d){if(!this._isHidden())try{a.execCommand("useCSS",
0,!0)}catch(e){}}if(!b.table_inline_editing)try{a.execCommand("enableInlineTableEditing",!1,!1)}catch(h){}if(!b.object_resizing)try{a.execCommand("enableObjectResizing",!1,!1)}catch(g){}}},h.onBeforeExecCommand.add(g),h.onMouseDown.add(g));c.isWebKit&&h.onClick.add(function(a,b){b=b.target;if(b.nodeName=="IMG"||b.nodeName=="A"&&l.hasClass(b,"mceItemAnchor"))h.selection.getSel().setBaseAndExtent(b,0,b,1),h.nodeChanged()});h.onMouseUp.add(h.nodeChanged);h.onKeyUp.add(function(a,b){var d=b.keyCode;(d>=
33&&d<=36||d>=37&&d<=40||d==13||d==45||d==46||d==8||c.isMac&&(d==91||d==93)||b.ctrlKey)&&h.nodeChanged()});h.onReset.add(function(){h.setContent(h.startContent,{format:"raw"})});if(k.custom_shortcuts){k.custom_undo_redo_keyboard_shortcuts&&(h.addShortcut("ctrl+z",h.getLang("undo_desc"),"Undo"),h.addShortcut("ctrl+y",h.getLang("redo_desc"),"Redo"));h.addShortcut("ctrl+b",h.getLang("bold_desc"),"Bold");h.addShortcut("ctrl+i",h.getLang("italic_desc"),"Italic");h.addShortcut("ctrl+u",h.getLang("underline_desc"),
"Underline");for(g=1;g<=6;g++)h.addShortcut("ctrl+"+g,"",["FormatBlock",!1,"h"+g]);h.addShortcut("ctrl+7","",["FormatBlock",!1,"<p>"]);h.addShortcut("ctrl+8","",["FormatBlock",!1,"<div>"]);h.addShortcut("ctrl+9","",["FormatBlock",!1,"<address>"]);var n=function(b){var d=null;if(!b.altKey&&!b.ctrlKey&&!b.metaKey)return d;a(h.shortcuts,function(a){if(!(c.isMac&&a.ctrl!=b.metaKey)&&(c.isMac||a.ctrl==b.ctrlKey))if(a.alt==b.altKey&&a.shift==b.shiftKey&&(b.keyCode==a.keyCode||b.charCode&&b.charCode==a.charCode))return d=
a,!1});return d};h.onKeyUp.add(function(a,b){if(n(b))return j.cancel(b)});h.onKeyPress.add(function(a,b){if(n(b))return j.cancel(b)});h.onKeyDown.add(function(a,b){var c=n(b);if(c)return c.func.call(c.scope),j.cancel(b)})}c.isIE&&(l.bind(h.getDoc(),"controlselect",function(a){var b=h.resizeInfo,a=a.target;if(a.nodeName==="IMG")b&&l.unbind(b.node,b.ev,b.cb),l.hasClass(a,"mceItemNoResize")?(ev="resizestart",b=l.bind(a,"resizestart",j.cancel,j)):(ev="resizeend",b=l.bind(a,ev,function(a){var b,a=a.target;
if(b=l.getStyle(a,"width"))l.setAttrib(a,"width",b.replace(/[^0-9%]+/g,"")),l.setStyle(a,"width","");if(b=l.getStyle(a,"height"))l.setAttrib(a,"height",b.replace(/[^0-9%]+/g,"")),l.setStyle(a,"height","")})),b=h.resizeInfo={node:a,ev:ev,cb:b}}),h.onKeyDown.add(function(a,b){var c;switch(b.keyCode){case 8:if(c=h.getDoc().selection,c.createRange&&c.createRange().item)return a.dom.remove(c.createRange().item(0)),j.cancel(b)}}));c.isOpera&&h.onClick.add(function(a,b){j.prevent(b)});if(k.custom_undo_redo){var o=
function(){h.undoManager.typing=!1;h.undoManager.add()};l.bind(h.getDoc(),"focusout",function(){!h.removed&&h.undoManager.typing&&o()});h.dom.bind(h.dom.getRoot(),"dragend",function(){o()});h.onKeyUp.add(function(a,b){var c,e;if(d&&b.keyCode==8&&(c=h.selection.getRng(),c.parentElement))c=c.parentElement(),e=h.selection.getBookmark(),c.innerHTML=c.innerHTML,h.selection.moveToBookmark(e);(b.keyCode>=33&&b.keyCode<=36||b.keyCode>=37&&b.keyCode<=40||b.keyCode==13||b.keyCode==45||b.ctrlKey)&&o()});h.onKeyDown.add(function(a,
b){var e,f;f=b.keyCode;if(d&&f==46&&(e=h.selection.getRng(),e.parentElement)){f=e.parentElement();if(!h.undoManager.typing)h.undoManager.beforeChange(),h.undoManager.typing=!0,h.undoManager.add();b.ctrlKey&&(e.moveEnd("word",1),e.select());h.selection.getSel().clear();if(e.parentElement()==f){e=h.selection.getBookmark();try{f.innerHTML=f.innerHTML}catch(g){}h.selection.moveToBookmark(e)}b.preventDefault();return}if(f>=33&&f<=36||f>=37&&f<=40||f==13||f==45)c.isIE&&f==13&&h.undoManager.beforeChange(),
h.undoManager.typing&&o();else if((f<16||f>20)&&f!=224&&f!=91&&!h.undoManager.typing)h.undoManager.beforeChange(),h.undoManager.add(),h.undoManager.typing=!0});h.onMouseDown.add(function(){h.undoManager.typing&&o()})}if(c.isGecko){var t=function(){var b=h.dom.getAttribs(h.selection.getStart().cloneNode(!1));return function(){var c=h.selection.getStart();h.dom.removeAllAttribs(c);a(b,function(a){c.setAttributeNode(a.cloneNode(!0))})}},y=function(){var a=h.selection;return!a.isCollapsed()&&a.getStart()!=
a.getEnd()};h.onKeyPress.add(function(a,b){var c;if((b.keyCode==8||b.keyCode==46)&&y())return c=t(),h.getDoc().execCommand("delete",!1,null),c(),j.cancel(b)});h.dom.bind(h.getDoc(),"cut",function(){var a;y()&&(a=t(),h.onKeyUp.addToTop(j.cancel,j),setTimeout(function(){a();h.onKeyUp.remove(j.cancel,j)},0))})}},_isHidden:function(){var a;if(!f)return 0;a=this.selection.getSel();return!a||!a.rangeCount||a.rangeCount==0}})})(tinymce);
(function(c){var i=c.each,j=!0,g=!1;c.EditorCommands=function(b){function a(a,b,c){var d,a=a.toLowerCase();if(d=e.exec[a])return d(a,b,c),j;return g}function f(a){var b,a=a.toLowerCase();if(b=e.state[a])return b(a);return-1}function d(a,b){b=b||"exec";i(a,function(a,c){i(c.toLowerCase().split(","),function(c){e[b][c]=a})})}function n(a,c,d){c===void 0&&(c=g);d===void 0&&(d=null);return b.getDoc().execCommand(a,c,d)}function k(a,c){b.formatter.toggle(a,c?{value:c}:void 0)}var m=b.dom,o=b.selection,
e={state:{},exec:{},value:{}},h=b.settings,p;c.extend(this,{execCommand:a,queryCommandState:f,queryCommandValue:function(a){var b,a=a.toLowerCase();if(b=e.value[a])return b(a);return g},addCommands:d});d({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){b.undoManager.add()},"Cut,Copy,Paste":function(a){var d=b.getDoc(),e;try{n(a)}catch(h){e=j}if(e||!d.queryCommandSupported(a))c.isGecko?b.windowManager.confirm(b.getLang("clipboard_msg"),function(a){a&&
open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):b.windowManager.alert(b.getLang("clipboard_no_support"))},unlink:function(a){o.isCollapsed()&&o.select(o.getNode());n(a);o.collapse(g)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(c){var d=c.substring(7);i("left,center,right,full".split(","),function(a){d!=a&&b.formatter.remove("align"+a)});k("align"+d);a("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b;n(a);if(a=m.getParent(o.getNode(),
"ol,ul"))b=a.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(b.nodeName)&&(p=o.getBookmark(void 0),m.split(b,a),o.moveToBookmark(p))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){k(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){k(a,c)},FontSize:function(a,b,d){var e;d>=1&&d<=7&&(e=c.explode(h.font_size_style_values),d=(b=c.explode(h.font_size_classes))?b[d-1]||d:e[d-1]||d);k(a,d)},RemoveFormat:function(a){b.formatter.remove(a)},mceBlockQuote:function(){k("blockquote")},
FormatBlock:function(a,b,c){return k(c||"p")},mceCleanup:function(){var a=o.getBookmark();b.setContent(b.getContent({cleanup:j}),{cleanup:j});o.moveToBookmark(a)},mceRemoveNode:function(a,c,d){a=d||o.getNode();a!=b.getBody()&&(p=o.getBookmark(void 0),b.dom.remove(a,j),o.moveToBookmark(p))},mceSelectNodeDepth:function(a,c,d){var e=0;m.getParent(o.getNode(),function(a){if(a.nodeType==1&&e++==d)return o.select(a),g},b.getBody())},mceSelectNode:function(a,b,c){o.select(c)},mceInsertContent:function(a,
d,e){function h(a,b,d){for(b=new c.dom.TreeWalker(d?a.nextSibling:a.previousSibling,b);a=b.current();){if(a.nodeType==3&&c.trim(a.nodeValue).length||a.nodeName=="BR"||a.nodeName=="IMG")return a;d?b.next():b.prev()}}var f,g,a={content:e,format:"html"};o.onBeforeSetContent.dispatch(o,a);e=a.content;e.indexOf("{$caret}")==-1&&(e+="{$caret}");o.setContent('<span id="__mce">\ufeff</span>',{no_events:!1});m.setOuterHTML("__mce",e.replace(/\{\$caret\}/,'<span data-mce-type="bookmark" id="__mce">\ufeff</span>'));
d=m.select("#__mce")[0];g=m.getRoot();if(d.previousSibling&&m.isBlock(d.previousSibling)||d.parentNode==g)(e=h(d,g))&&(e.nodeName=="BR"?e.parentNode.insertBefore(d,e):m.insertAfter(d,e));for(;d;){if(d===g){m.setOuterHTML(f,(new c.html.Serializer({},b.schema)).serialize(b.parser.parse(m.getOuterHTML(f))));break}f=d;d=d.parentNode}if(d=m.select("#__mce")[0])if(e=h(d,g)||h(d,g,!0),m.remove(d),e){f=m.createRng();e.nodeType==3?(f.setStart(e,e.length),f.setEnd(e,e.length)):e.nodeName=="BR"?(f.setStartBefore(e),
f.setEndBefore(e)):(f.setStartAfter(e),f.setEndAfter(e));o.setRng(f);if(!c.isIE){e=m.create("span",null,"\u00a0");f.insertNode(e);f=m.getRect(e);d=m.getViewPort(b.getWin());if(f.y>d.y+d.h||f.y<d.y||f.x>d.x+d.w||f.x<d.x)b.getBody().scrollLeft=f.x,b.getBody().scrollTop=f.y;m.remove(e)}o.collapse(!0)}o.onSetContent.dispatch(o,a);b.addVisual()},mceInsertRawHTML:function(a,c,d){o.setContent("tiny_mce_marker");b.setContent(b.getContent().replace(/tiny_mce_marker/g,function(){return d}))},mceSetContent:function(a,
c,d){b.setContent(d)},"Indent,Outdent":function(a){var b,c,d;b=h.indentation;c=/[a-z%]+$/i.exec(b);b=parseInt(b);!f("InsertUnorderedList")&&!f("InsertOrderedList")?i(o.getSelectedBlocks(),function(e){a=="outdent"?(d=Math.max(0,parseInt(e.style.paddingLeft||0)-b),m.setStyle(e,"paddingLeft",d?d+c:"")):m.setStyle(e,"paddingLeft",parseInt(e.style.paddingLeft||0)+b+c)}):n(a)},mceRepaint:function(){if(c.isGecko)try{p=o.getBookmark(j),o.getSel()&&o.getSel().selectAllChildren(b.getBody()),o.collapse(j),o.moveToBookmark(p)}catch(a){}},
mceToggleFormat:function(a,c,d){b.formatter.toggle(d)},InsertHorizontalRule:function(){b.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){b.hasVisual=!b.hasVisual;b.addVisual()},mceReplaceContent:function(a,c,d){b.execCommand("mceInsertContent",!1,d.replace(/\{\$selection\}/g,o.getContent({format:"text"})))},mceInsertLink:function(a,d,e){var a=m.getParent(o.getNode(),"a"),h,f;c.is(e,"string")&&(e={href:e});e.href=e.href.replace(" ","%20");if(a)e.href?m.setAttribs(a,e):b.dom.remove(a,
j);else{if(c.isWebKit&&(h=m.getParent(o.getNode(),"img")))f=h.style.cssFloat,h.style.cssFloat=null;n("CreateLink",g,"javascript:mctmp(0);");if(f)h.style.cssFloat=f;i(m.select("a[href='javascript:mctmp(0);']"),function(a){m.setAttribs(a,e)})}},selectAll:function(){var a=m.getRoot(),c=m.createRng();c.setStart(a,0);c.setEnd(a,a.childNodes.length);b.selection.setRng(c)}});d({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){a="align"+a.substring(7);return b.formatter.match(a)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return b.formatter.match(a)},
mceBlockQuote:function(){return b.formatter.match("blockquote")},Outdent:function(){var a;if(h.inline_styles){if((a=m.getParent(o.getStart(),m.isBlock))&&parseInt(a.style.paddingLeft)>0)return j;if((a=m.getParent(o.getEnd(),m.isBlock))&&parseInt(a.style.paddingLeft)>0)return j}return f("InsertUnorderedList")||f("InsertOrderedList")||!h.inline_styles&&!!m.getParent(o.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){return m.getParent(o.getNode(),a=="insertunorderedlist"?
"UL":"OL")}},"state");d({"FontSize,FontName":function(a){var b=0,c;if(c=m.getParent(o.getNode(),"span"))b=a=="fontsize"?c.style.fontSize:c.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return b}},"value");h.custom_undo_redo&&d({Undo:function(){b.undoManager.undo()},Redo:function(){b.undoManager.redo()}})}})(tinymce);
(function(c){var i=c.util.Dispatcher;c.UndoManager=function(j){var g,b=0,a=[];return g={typing:!1,onAdd:new i(g),onUndo:new i(g),onRedo:new i(g),beforeChange:function(){if(a[b])a[b].beforeBookmark=j.selection.getBookmark(2,!0)},add:function(f){var d;d=j.settings;var i,f=f||{};f.content=c.trim(j.getContent({format:"raw",no_events:1}));if((i=a[b])&&i.content==f.content)return null;if(d.custom_undo_redo_levels&&a.length>d.custom_undo_redo_levels){for(d=0;d<a.length-1;d++)a[d]=a[d+1];a.length--;b=a.length}f.bookmark=
j.selection.getBookmark(2,!0);if(b<a.length-1)a.length=b+1;a.push(f);b=a.length-1;g.onAdd.dispatch(g,f);j.isNotDirty=0;return f},undo:function(){var c;if(g.typing)g.add(),g.typing=!1;b>0&&(c=a[--b],j.setContent(c.content,{format:"raw"}),j.selection.moveToBookmark(c.beforeBookmark),g.onUndo.dispatch(g,c));return c},redo:function(){var c;b<a.length-1&&(c=a[++b],j.setContent(c.content,{format:"raw"}),j.selection.moveToBookmark(c.bookmark),g.onRedo.dispatch(g,c));return c},clear:function(){a=[];b=0;g.typing=
!1},hasUndo:function(){return b>0||this.typing},hasRedo:function(){return b<a.length-1&&!this.typing}}}})(tinymce);
(function(c){function i(a,b){var c=b.ownerDocument.createRange();c.setStart(a.endContainer,a.endOffset);c.setEndAfter(b);return c.cloneContents().textContent.length==0}function j(a,b,c){var e;if(b.isEmpty(c))return e=b.getParent(c,"ul,ol"),b.getParent(e.parentNode,"ul,ol")||(b.split(e,c),e=b.create("p",0,'<br data-mce-bogus="1" />'),b.replace(e,c),a.select(e,1)),n;return d}var g=c.dom.Event,b=c.isIE,a=c.isGecko,f=c.isOpera,d=!0,n=!1;c.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var b=this,
c=a.settings,d;b.editor=a;b.dom=a.dom;d=(c.forced_root_block||"p").toLowerCase();c.element=d.toUpperCase();a.onPreInit.add(b.setup,b);c.forced_root_block&&(a.onInit.add(b.forceRoots,b),a.onSetContent.add(b.forceRoots,b),a.onBeforeGetContent.add(b.forceRoots,b),a.onExecCommand.add(function(a,c){c=="mceInsertContent"&&(b.forceRoots(),a.nodeChanged())}))},setup:function(){var f=this,i=f.editor,j=i.settings,e=i.dom,h=i.selection;j.forced_root_block&&(i.onBeforeExecCommand.add(f.forceRoots,f),i.onKeyUp.add(f.forceRoots,
f),i.onPreProcess.add(f.forceRoots,f));j.force_br_newlines&&b&&i.onKeyPress.add(function(a,b){var c;if(b.keyCode==13&&h.getNode().nodeName!="LI")return h.setContent('<br id="__" /> ',{format:"raw"}),c=e.get("__"),c.removeAttribute("id"),h.select(c),h.collapse(),g.cancel(b)});j.force_p_newlines&&(b?(c.addUnload(function(){f._previousFormats=0}),i.onKeyPress.add(function(a,b){f._previousFormats=0;if(b.keyCode==13&&!b.shiftKey&&a.selection.isCollapsed()&&j.keep_styles){var c;var d=a.selection.getStart(),
e,h,g;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(d.nodeName)&&(e?(h=d.cloneNode(!1),h.appendChild(e),e=h):e=g=d.cloneNode(!1),e.removeAttribute("id"));while(d=d.parentNode);e&&(c={wrapper:e,inner:g});f._previousFormats=c}}),i.onKeyUp.add(function(a,b){if(b.keyCode==13&&!b.shiftKey){var c=a.selection.getStart(),d=f._previousFormats;if(!c.hasChildNodes()&&d&&(c=e.getParent(c,e.isBlock))&&c.nodeName!="LI")c.innerHTML="",f._previousFormats?(c.appendChild(d.wrapper),d.inner.innerHTML="\ufeff"):c.innerHTML=
"\ufeff",h.select(c,1),h.collapse(!0),a.getDoc().execCommand("Delete",!1,null),f._previousFormats=0}})):i.onKeyPress.add(function(a,b){b.keyCode==13&&!b.shiftKey&&!f.insertPara(b)&&g.cancel(b)}),a&&i.onKeyDown.add(function(a,b){(b.keyCode==8||b.keyCode==46)&&!b.shiftKey&&f.backspaceDelete(b,b.keyCode==8)}));c.isWebKit&&i.onKeyPress.add(function(a,b){if(b.keyCode==13&&(b.shiftKey||j.force_br_newlines&&!e.getParent(h.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))){var c=h.getRng(),f,i=e.create("div",null," "),
k=e.getViewPort(a.getWin()).h;c.insertNode(f=e.create("br"));c.setStartAfter(f);c.setEndAfter(f);h.setRng(c);h.getSel().focusNode==f.previousSibling&&(h.select(e.insertAfter(e.doc.createTextNode("\u00a0"),f)),h.collapse(d));e.insertAfter(i,f);c=e.getPos(i).y;e.remove(i);c>k&&a.getWin().scrollTo(0,c);g.cancel(b)}});b&&j.element!="P"&&(i.onKeyPress.add(function(){f.lastElm=h.getNode().nodeName}),i.onKeyUp.add(function(a,b){var c;c=h.getNode();if(a.getBody().childNodes.length===1&&c.nodeName=="P")c=
e.rename(c,j.element),h.select(c),h.collapse(),a.nodeChanged();else if(b.keyCode==13&&!b.shiftKey&&f.lastElm!="P"&&(c=e.getParent(c,"p")))e.rename(c,j.element),a.nodeChanged()}))},find:function(a,b,c){for(var d=this.editor.getDoc().createTreeWalker(a,4,null,n),f=-1;a=d.nextNode();){f++;if(b==0&&a==c)return f;if(b==1&&f==c)return a}return-1},forceRoots:function(a){var a=this.editor,c=a.getBody(),d=a.getDoc(),e=a.selection,f=e.getSel(),g=e.getRng(),i=-2,j,n,B,r,t,y=c.childNodes,z,x,v;for(z=y.length-
1;z>=0;z--)if(t=y[z],t.nodeType===1&&t.getAttribute("data-mce-type"))r=null;else if(t.nodeType===3||!this.dom.isBlock(t)&&t.nodeType!==8&&!/^(script|mce:script|style|mce:style)$/i.test(t.nodeName))if(r)r.hasChildNodes()?r.insertBefore(t,r.firstChild):r.appendChild(t);else{if(t.nodeType!=3||/[^\s]/g.test(t.nodeValue)){if(i==-2&&g)if(!b||g.setStart)if(g.startContainer.nodeType==1&&(x=g.startContainer.childNodes[g.startOffset])&&x.nodeType==1)v=x.getAttribute("id"),x.setAttribute("id","__mce");else{if(a.dom.getParent(g.startContainer,
function(a){return a===c}))n=g.startOffset,B=g.endOffset,i=this.find(c,0,g.startContainer),j=this.find(c,0,g.endContainer)}else g.item&&(r=d.body.createTextRange(),r.moveToElementText(g.item(0)),g=r),r=d.body.createTextRange(),r.moveToElementText(c),r.collapse(1),i=r.move("character",-16777215)*-1,r=g.duplicate(),r.collapse(1),j=r.move("character",-16777215)*-1,r=g.duplicate(),r.collapse(0),r=r.move("character",-16777215)*-1-j,i=j-i,j=r;r=a.dom.create(a.settings.forced_root_block);t.parentNode.replaceChild(r,
t);r.appendChild(t)}}else r=null;if(i!=-2)if(!b||g.setStart)r=c.getElementsByTagName(a.settings.element)[0],g=d.createRange(),i!=-1?g.setStart(this.find(c,1,i),n):g.setStart(r,0),j!=-1?g.setEnd(this.find(c,1,j),B):g.setEnd(r,0),f&&(f.removeAllRanges(),f.addRange(g));else try{g=f.createRange(),g.moveToElementText(c),g.collapse(1),g.moveStart("character",i),g.moveEnd("character",j),g.select()}catch(q){}else if((!b||g.setStart)&&(x=a.dom.get("__mce")))v?x.setAttribute("id",v):x.removeAttribute("id"),
g=d.createRange(),g.setStartBefore(x),g.setEndBefore(x),e.setRng(g)},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(){var k;function b(a,c){var d=[],e,i;a.innerHTML="";if(h.keep_styles){i=c;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(i.nodeName)&&(e=i.cloneNode(n),g.setAttrib(e,"id",""),d.push(e));while(i=i.parentNode)}if(d.length>0){i=d.length-1;for(e=a;i>=0;i--)e=e.appendChild(d[i]);d[0].innerHTML=f?"\u00a0":"<br />";return d[0]}else a.innerHTML=
f?"\u00a0":"<br />"}var c=this.editor,g=c.dom,e=c.getDoc(),h=c.settings,p=c.selection.getSel(),u=p.getRangeAt(0),l=e.body,s,B,r,t,y,z,x,v,q,A,D,C,H=g.getViewPort(c.getWin()),F;c.undoManager.beforeChange();s=e.createRange();s.setStart(p.anchorNode,p.anchorOffset);s.collapse(d);B=e.createRange();B.setStart(p.focusNode,p.focusOffset);B.collapse(d);t=(r=s.compareBoundaryPoints(s.START_TO_END,B)<0)?p.anchorNode:p.focusNode;y=r?p.anchorOffset:p.focusOffset;z=r?p.focusNode:p.anchorNode;r=r?p.focusOffset:
p.anchorOffset;if(t===z&&/^(TD|TH)$/.test(t.nodeName))return t.firstChild.nodeName=="BR"&&g.remove(t.firstChild),t.childNodes.length==0?c.dom.add(t,h.element,null,"<br />"):(C=t.innerHTML,t.innerHTML="",c.dom.add(t,h.element,null,C)),v=c.dom.add(t,h.element,null,"<br />"),u=e.createRange(),u.selectNodeContents(v),u.collapse(1),c.selection.setRng(u),n;if(t==l&&z==l&&l.firstChild&&c.dom.isBlock(l.firstChild))k=z=t.firstChild,t=k,y=r=0,s=e.createRange(),s.setStart(t,0),B=e.createRange(),B.setStart(z,
0);t=t.nodeName=="HTML"?e.body:t;t=t.nodeName=="BODY"?t.firstChild:t;z=z.nodeName=="HTML"?e.body:z;z=z.nodeName=="BODY"?z.firstChild:z;x=this.getParentBlock(t);v=this.getParentBlock(z);q=x?x.nodeName:h.element;if(C=this.dom.getParent(x,"li,pre")){if(C.nodeName=="LI")return j(c.selection,this.dom,C);return d}if(x&&(x.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(g.getStyle(x,"position",1))))q=h.element,x=null;if(v&&(v.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(g.getStyle(x,"position",
1))))q=h.element,v=null;if(/(TD|TABLE|TH|CAPTION)/.test(q)||x&&q=="DIV"&&/left|right/gi.test(g.getStyle(x,"float",1)))q=h.element,x=v=null;A=x&&x.nodeName==q?x.cloneNode(0):c.dom.create(q);v=v&&v.nodeName==q?v.cloneNode(0):c.dom.create(q);v.removeAttribute("id");/^(H[1-6])$/.test(q)&&i(u,x)&&(v=c.dom.create(h.element));C=x=t;do{if(C==l||C.nodeType==9||this.dom.isBlock(C)||/(TD|TABLE|TH|CAPTION)/.test(C.nodeName))break;x=C}while(C=C.previousSibling?C.previousSibling:C.parentNode);C=D=z;do{if(C==l||
C.nodeType==9||this.dom.isBlock(C)||/(TD|TABLE|TH|CAPTION)/.test(C.nodeName))break;D=C}while(C=C.nextSibling?C.nextSibling:C.parentNode);x.nodeName==q?s.setStart(x,0):s.setStartBefore(x);s.setEnd(t,y);A.appendChild(s.cloneContents()||e.createTextNode(""));try{B.setEndAfter(D)}catch(K){}B.setStart(z,r);v.appendChild(B.cloneContents()||e.createTextNode(""));u=e.createRange();!x.previousSibling&&x.parentNode.nodeName==q?u.setStartBefore(x.parentNode):s.startContainer.nodeName==q&&s.startOffset==0?u.setStartBefore(s.startContainer):
u.setStart(s.startContainer,s.startOffset);!D.nextSibling&&D.parentNode.nodeName==q?u.setEndAfter(D.parentNode):u.setEnd(B.endContainer,B.endOffset);u.deleteContents();f&&c.getWin().scrollTo(0,H.y);if(A.firstChild&&A.firstChild.nodeName==q)A.innerHTML=A.firstChild.innerHTML;if(v.firstChild&&v.firstChild.nodeName==q)v.innerHTML=v.firstChild.innerHTML;if(g.isEmpty(A))A.innerHTML="<br />";g.isEmpty(v)&&(F=b(v,z));f&&parseFloat(opera.version())<9.5?(u.insertNode(A),u.insertNode(v)):(u.insertNode(v),u.insertNode(A));
v.normalize();A.normalize();u=e.createRange();u.selectNodeContents(a?e.createTreeWalker(F||v,NodeFilter.SHOW_TEXT,null,n).nextNode()||F||v:F||v);u.collapse(1);p.removeAllRanges();p.addRange(u);e=c.dom.getPos(v).y;if(e<H.y||e+25>H.y+H.h)c.getWin().scrollTo(0,e<H.y?e:e-H.h+25);c.undoManager.add();return n},backspaceDelete:function(a,b){var d=this.editor,e=d.getBody(),f,i=d.selection,j=i.getRng(),l=j.startContainer,s;if(!b&&j.collapsed&&l.nodeType==1&&j.startOffset==l.childNodes.length){s=new c.dom.TreeWalker(l.lastChild,
l);for(f=l.lastChild;f;f=s.prev())if(f.nodeType==3){j.setStart(f,f.nodeValue.length);j.collapse(!0);i.setRng(j);return}}if(l&&d.dom.isBlock(l)&&!/^(TD|TH)$/.test(l.nodeName)&&b&&(l.childNodes.length==0||l.childNodes.length==1&&l.firstChild.nodeName=="BR")){for(f=l;(f=f.previousSibling)&&!d.dom.isBlock(f););if(f){if(l!=e.firstChild){for(e=d.dom.doc.createTreeWalker(f,NodeFilter.SHOW_TEXT,null,n);j=e.nextNode();)f=j;j=d.getDoc().createRange();j.setStart(f,f.nodeValue?f.nodeValue.length:0);j.setEnd(f,
f.nodeValue?f.nodeValue.length:0);i.setRng(j);d.dom.remove(l)}return g.cancel(a)}}}})})(tinymce);
(function(c){var i=c.dom.Event,j=c.each,g=c.extend;c.create("tinymce.ControlManager",{ControlManager:function(b,a){var f=this,a=a||{};f.editor=b;f.controls={};f.onAdd=new c.util.Dispatcher(f);f.onPostRender=new c.util.Dispatcher(f);f.prefix=a.prefix||b.id+"_";f._cls={};f.onPostRender.add(function(){j(f.controls,function(a){a.postRender()})})},get:function(b){return this.controls[this.prefix+b]||this.controls[b]},setActive:function(b,a){var c=null;(c=this.get(b))&&c.setActive(a);return c},setDisabled:function(b,
a){var c=null;(c=this.get(b))&&c.setDisabled(a);return c},add:function(b){b&&(this.controls[b.id]=b,this.onAdd.dispatch(b,this));return b},createControl:function(b){var a,c=this,d=c.editor;j(d.plugins,function(d){if(d.createControl&&(a=d.createControl(b,c)))return!1});switch(b){case "|":case "separator":return c.createSeparator()}if(!a&&d.buttons&&(a=d.buttons[b]))return c.createButton(b,a);return c.add(a)},createDropMenu:function(b,a,f){var d=this.editor,i,j,m,a=g({"class":"mceDropDown",constrain:d.settings.constrain_menus},
a);a["class"]=a["class"]+" "+d.getParam("skin")+"Skin";if(m=d.getParam("skin_variant"))a["class"]+=" "+d.getParam("skin")+"Skin"+m.substring(0,1).toUpperCase()+m.substring(1);b=this.prefix+b;i=this.controls[b]=new (f||this._cls.dropmenu||c.ui.DropMenu)(b,a);i.onAddItem.add(function(a,b){var c=b.settings;c.title=d.getLang(c.title,c.title);if(!c.onclick)c.onclick=function(){c.cmd&&d.execCommand(c.cmd,c.ui||!1,c.value)}});d.onRemove.add(function(){i.destroy()});c.isIE&&(i.onShowMenu.add(function(){d.focus();
j=d.selection.getBookmark(1)}),i.onHideMenu.add(function(){j&&(d.selection.moveToBookmark(j),j=0)}));return this.add(i)},createListBox:function(b,a,f){var d=this.editor;if(this.get(b))return null;a.title=d.translate(a.title);a.scope=a.scope||d;if(!a.onselect)a.onselect=function(b){d.execCommand(a.cmd,a.ui||!1,b||a.value)};a=g({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a);b=this.prefix+b;d.settings.use_native_selects?f=new c.ui.NativeListBox(b,a):(f=f||this._cls.listbox||c.ui.ListBox,
f=new f(b,a,d));this.controls[b]=f;c.isWebKit&&f.onPostRender.add(function(a,b){i.add(b,"mousedown",function(){d.bookmark=d.selection.getBookmark(1)});i.add(b,"focus",function(){d.selection.moveToBookmark(d.bookmark);d.bookmark=null})});f.hideMenu&&d.onMouseDown.add(f.hideMenu,f);return this.add(f)},createButton:function(b,a,f){var d=this.editor;if(this.get(b))return null;a.title=d.translate(a.title);a.label=d.translate(a.label);a.scope=a.scope||d;if(!a.onclick&&!a.menu_button)a.onclick=function(){d.execCommand(a.cmd,
a.ui||!1,a.value)};a=g({title:a.title,"class":"mce_"+b,unavailable_prefix:d.getLang("unavailable",""),scope:a.scope,control_manager:this},a);b=this.prefix+b;a.menu_button?(f=f||this._cls.menubutton||c.ui.MenuButton,b=new f(b,a,d),d.onMouseDown.add(b.hideMenu,b)):(f=this._cls.button||c.ui.Button,b=new f(b,a));return this.add(b)},createMenuButton:function(b,a,c){a=a||{};a.menu_button=1;return this.createButton(b,a,c)},createSplitButton:function(b,a,f){var d=this.editor;if(this.get(b))return null;a.title=
d.translate(a.title);a.scope=a.scope||d;if(!a.onclick)a.onclick=function(b){d.execCommand(a.cmd,a.ui||!1,b||a.value)};if(!a.onselect)a.onselect=function(b){d.execCommand(a.cmd,a.ui||!1,b||a.value)};a=g({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a);b=this.prefix+b;b=this.add(new (f||this._cls.splitbutton||c.ui.SplitButton)(b,a,d));d.onMouseDown.add(b.hideMenu,b);return b},createColorSplitButton:function(b,a,f){var d=this.editor,i,j;if(this.get(b))return null;a.title=d.translate(a.title);
a.scope=a.scope||d;if(!a.onclick)a.onclick=function(b){c.isIE&&(j=d.selection.getBookmark(1));d.execCommand(a.cmd,a.ui||!1,b||a.value)};if(!a.onselect)a.onselect=function(b){d.execCommand(a.cmd,a.ui||!1,b||a.value)};a=g({title:a.title,"class":"mce_"+b,menu_class:d.getParam("skin")+"Skin",scope:a.scope,more_colors_title:d.getLang("more_colors")},a);b=this.prefix+b;i=new (f||this._cls.colorsplitbutton||c.ui.ColorSplitButton)(b,a,d);d.onMouseDown.add(i.hideMenu,i);d.onRemove.add(function(){i.destroy()});
c.isIE&&(i.onShowMenu.add(function(){d.focus();j=d.selection.getBookmark(1)}),i.onHideMenu.add(function(){j&&(d.selection.moveToBookmark(j),j=0)}));return this.add(i)},createToolbar:function(b,a,f){b=this.prefix+b;a=new (f||this._cls.toolbar||c.ui.Toolbar)(b,a,this.editor);if(this.get(b))return null;return this.add(a)},createToolbarGroup:function(b,a,f){b=this.prefix+b;a=new (f||this._cls.toolbarGroup||c.ui.ToolbarGroup)(b,a,this.editor);if(this.get(b))return null;return this.add(a)},createSeparator:function(b){return new (b||
this._cls.separator||c.ui.Separator)},setControlType:function(b,a){return this._cls[b.toLowerCase()]=a},destroy:function(){j(this.controls,function(b){b.destroy()});this.controls=null}})})(tinymce);
(function(c){var i=c.util.Dispatcher,j=c.each,g=c.isIE,b=c.isOpera;c.create("tinymce.WindowManager",{WindowManager:function(a){this.editor=a;this.onOpen=new i(this);this.onClose=new i(this);this.params={};this.features={}},open:function(a,f){var d="",i=this.editor.settings.dialog_type=="modal",k,m,o;o=c.DOM.getViewPort();a=a||{};f=f||{};m=b?o.w:screen.width;o=b?o.h:screen.height;a.name=a.name||"mc_"+(new Date).getTime();a.width=parseInt(a.width||320);a.height=parseInt(a.height||240);a.resizable=!0;
a.left=a.left||parseInt(m/2)-a.width/2;a.top=a.top||parseInt(o/2)-a.height/2;f.inline=!1;f.mce_width=a.width;f.mce_height=a.height;f.mce_auto_focus=a.auto_focus;if(i&&g)a.center=!0,a.help=!1,a.dialogWidth=a.width+"px",a.dialogHeight=a.height+"px",a.scroll=a.scrollbars||!1;j(a,function(a,b){c.is(a,"boolean")&&(a=a?"yes":"no");/^(name|url)$/.test(b)||(d+=g&&i?(d?";":"")+b+":"+a:(d?",":"")+b+"="+a)});this.features=a;this.params=f;this.onOpen.dispatch(this,a,f);m=a.url||a.file;m=c._addVer(m);try{g&&i?
(k=1,window.showModalDialog(m,window,d)):k=window.open(m,a.name,d)}catch(e){}k||alert(this.editor.getLang("popup_blocked"))},close:function(a){a.close();this.onClose.dispatch(this)},createInstance:function(a,b,d,g,i,j){return new (c.resolve(a))(b,d,g,i,j)},confirm:function(a,b,c,g){b.call(c||this,(g||window).confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,g){(g||window).alert(this._decode(this.editor.getLang(a,a)));b&&b.call(c||this)},resizeBy:function(a,b,c){c.resizeBy(a,b)},
_decode:function(a){return c.DOM.decode(a).replace(/\\n/g,"\n")}})})(tinymce);
(function(c){c.Formatter=function(i){function j(a){return a.nodeType===1&&(a.face==="mceinline"||a.style.fontFamily==="mceinline")}function g(a){return a?x[a]:x}function b(a,c){a&&(typeof a!=="string"?v(a,function(a,c){b(c,a)}):(c=c.length?c:[c],v(c,function(a){if(a.deep===L)a.deep=!a.selector;if(a.split===L)a.split=!a.selector||a.inline;if(a.remove===L&&a.selector&&!a.inline)a.remove="none";if(a.selector&&a.inline)a.mixed=!0,a.block_expand=!0;if(typeof a.classes==="string")a.classes=a.classes.split(/\s+/)}),
x[a]=c))}function a(a,b,f){function n(a){var b=a.startContainer,c=a.startOffset;if(b.nodeType==1||b.nodeValue==="")if(b=b.nodeType==1?b.childNodes[c]:b){b=new D(b,b.parentNode);for(c=b.current();c;c=b.next())if(c.nodeType==3&&!h(c)){a.setStart(c,0);break}}return a}function o(a,c){c=c||J;a&&(v(c.styles,function(c,d){q.setStyle(a,d,e(c,b))}),v(c.attributes,function(c,d){q.setAttrib(a,d,e(c,b))}),v(c.classes,function(c){c=e(c,b);q.hasClass(a,c)||q.addClass(a,c)}))}function p(e){var f=[],g,i;g=J.inline||
J.block;i=q.create(g);o(i);C.walk(e,function(e){function h(e){var l=e.nodeName.toLowerCase(),n=e.parentNode.nodeName.toLowerCase(),p;if(m(l,"br"))k=0,J.block&&q.remove(e);else if(J.wrapper&&d(e,a,b))k=0;else if(J.block&&!J.wrapper&&/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(l))e=q.rename(e,g),o(e),f.push(e),k=0;else{if(J.selector&&(v(s,function(a){!("collapsed"in a&&a.collapsed!==S)&&q.is(e,a.selector)&&!j(e)&&(o(e,a),p=!0)}),!J.inline||p)){k=0;return}H(g,l)&&H(n,g)&&!(e.nodeType===3&&e.nodeValue.length===
1&&e.nodeValue.charCodeAt(0)===65279)?(k||(k=i.cloneNode(I),e.parentNode.insertBefore(k,e),f.push(k)),k.appendChild(e)):(k=0,v(c.grep(e.childNodes),h),k=0)}}var k;v(e,h)});J.wrap_links===!1&&v(f,function(a){function b(a){var d,e,g;if(a.nodeName==="A"){e=i.cloneNode(I);f.push(e);g=c.grep(a.childNodes);for(d=0;d<g.length;d++)e.appendChild(g[d]);a.appendChild(e)}v(c.grep(a.childNodes),b)}b(a)});v(f,function(c){function e(a){var b,c;v(a.childNodes,function(a){if(a.nodeType==1&&!r(a)&&!j(a))return b=a,
I});b&&k(b,J)&&(c=b.cloneNode(I),o(c),q.replace(c,a,E),q.remove(b,1));return c||a}var g;g=function(a){var b=0;v(a.childNodes,function(a){!h(a)&&!r(a)&&b++});return b}(c);if((f.length>1||!F(c))&&g===0)q.remove(c,1);else if(J.inline||J.wrapper){!J.exact&&g===1&&(c=e(c));v(s,function(a){v(q.select(a.inline,c),function(c){var d;if(a.wrap_links===!1){d=c.parentNode;do if(d.nodeName==="A")return;while(d=d.parentNode)}l(a,b,c,a.exact?c:null)})});if(d(c.parentNode,a,b))return q.remove(c,1),c=0,E;J.merge_with_parents&&
q.getParent(c.parentNode,function(e){if(d(e,a,b))return q.remove(c,1),c=0,E});c&&(c=t(B(c),c),c=t(c,B(c,E)))}})}var s=g(a),J=s[0],x,S=A.isCollapsed();if(J)if(f)x=q.createRng(),x.setStartBefore(f),x.setEndAfter(f),p(u(x,s));else if(!S||!J.inline||q.select("td.mceSelected,th.mceSelected").length){x=i.selection.getNode();f=A.getBookmark();p(u(A.getRng(E),s));if(J.styles&&(J.styles.color||J.styles.textDecoration))c.walk(x,O,"childNodes"),O(x);A.moveToBookmark(f);A.setRng(n(A.getRng(E)));i.nodeChanged()}else z("apply",
a,b)}function f(a,b,e){function f(a){var b=a.startContainer,c=a.startOffset,d;if(b.nodeType==3&&c>=b.nodeValue.length-1)b=b.parentNode,c=M(b)+1;if(b.nodeType==1){d=b.childNodes;b=d[Math.min(c,d.length-1)];b=new D(b);c>d.length-1&&b.next();for(c=b.current();c;c=b.next())if(c.nodeType==3&&!h(c)){b=q.create("a",null,N);c.parentNode.insertBefore(b,c);a.setStart(c,0);A.setRng(a);q.remove(b);break}}}function j(a){var d,e,f;d=c.grep(a.childNodes);e=0;for(f=t.length;e<f;e++)if(l(t[e],b,a,a))break;if(x.deep){e=
0;for(f=d.length;e<f;e++)j(d[e])}}function k(c){var e;v(q.getParents(c.parentNode,void 0,q.getRoot()).reverse(),function(c){var f;!e&&c.id!="_start"&&c.id!="_end"&&(f=d(c,a,b))&&f.split!==!1&&(e=c)});return e}function m(a,c,d,e){var f,g,h,i,j,k;if(a){k=a.parentNode;for(f=c.parentNode;f&&f!=k;f=f.parentNode){g=f.cloneNode(I);for(j=0;j<t.length;j++)if(l(t[j],b,g,g)){g=0;break}g&&(h&&g.appendChild(h),i||(i=g),h=g)}if(e&&(!x.mixed||!F(a)))c=q.split(a,c);h&&(d.parentNode.insertBefore(h,d),i.appendChild(d))}return c}
function o(a){var b=q.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];r(c)&&(c=c[a?"firstChild":"lastChild"]);q.remove(b,!0);return c}function s(a){var b,c,a=u(a,t,E);if(x.split)b=y(a,E),c=y(a),b!=c?(b=p(b,"span",{id:"_start","data-mce-type":"bookmark"}),c=p(c,"span",{id:"_end","data-mce-type":"bookmark"}),m(k(b),b,b,!0),m(k(c),c,c,!0),b=o(E),c=o()):b=c=m(k(b),b,b,!0),a.startContainer=b.parentNode,a.startOffset=M(b),a.endContainer=c.parentNode,a.endOffset=M(c)+1;C.walk(a,function(a){v(a,function(a){j(a);
a.nodeType===1&&i.dom.getStyle(a,"text-decoration")==="underline"&&a.parentNode&&Q(a.parentNode)==="underline"&&l({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,a)})})}var t=g(a),x=t[0],B;e?(B=q.createRng(),B.setStartBefore(e),B.setEndAfter(e),s(B)):!A.isCollapsed()||!x.inline||q.select("td.mceSelected,th.mceSelected").length?(e=A.getBookmark(),s(A.getRng(E)),A.moveToBookmark(e),n(a,b,A.getStart())&&f(A.getRng(!0)),i.nodeChanged()):z("remove",a,b)}function d(a,b,c,d){function f(a,
b,g){var h,i,j=b[g];if(j)if(j.length===L)for(h in j){if(j.hasOwnProperty(h)){i=g==="attributes"?q.getAttrib(a,h):o(a,h);if(d&&!i&&!b.exact)return;if((!d||b.exact)&&!m(i,e(j[h],c)))return}}else for(h=0;h<j.length;h++)if(g==="attributes"?q.getAttrib(a,j[h]):o(a,j[h]))break;return b}var h=g(b),i;if(h&&a)for(i=0;i<h.length;i++)if(b=h[i],k(a,b)&&f(a,b,"attributes")&&f(a,b,"styles")){if(h=b.classes)for(i=0;i<h.length;i++)if(!q.hasClass(a,h[i]))return;return b}}function n(a,b,c){function e(c){c=q.getParent(c,
function(c){return!!d(c,a,b,!0)});return d(c,a,b)}var f;if(c)return e(c);if(A.isCollapsed()){for(c=G.apply.length-1;c>=0;c--)if(G.apply[c].name==a)return!0;for(c=G.remove.length-1;c>=0;c--)if(G.remove[c].name==a)return!1;return e(A.getNode())}c=A.getNode();if(e(c))return E;f=A.getStart();if(f!=c&&e(f))return E;return I}function k(a,b){if(m(a,b.inline))return E;if(m(a,b.block))return E;if(b.selector)return q.is(a,b.selector)}function m(a,b){a=a||"";b=b||"";a=""+(a.nodeName||a);b=""+(b.nodeName||b);
return a.toLowerCase()==b.toLowerCase()}function o(a,b){var c=q.getStyle(a,b);if(b=="color"||b=="backgroundColor")c=q.toHex(c);b=="fontWeight"&&c==700&&(c="bold");return""+c}function e(a,b){typeof a!="string"?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a}));return a}function h(a){return a&&a.nodeType===3&&/^([\s\r\n]+|)$/.test(a.nodeValue)}function p(a,b,c){b=q.create(b,c);a.parentNode.insertBefore(b,a);b.appendChild(a);return b}function u(a,b){function c(a,d,e,f){for(var g,f=f||q.getRoot();;){g=
a.parentNode;if(g==f||!b[0].block_expand&&F(g))break;for(j=g[d];j&&j!=a;j=j[e]){if(j.nodeType==1&&!r(j))return a;if(j.nodeType==3&&!h(j))return a}a=a.parentNode}return a}function d(a,b){for(b===L&&(b=a.nodeType===3?a.length:a.childNodes.length);a&&a.hasChildNodes();)(a=a.childNodes[b])&&(b=a.nodeType===3?a.length:a.childNodes.length);return{node:a,offset:b}}var e=a.startContainer,f=a.startOffset,g=a.endContainer,i=a.endOffset,j,k;e.nodeType==1&&e.hasChildNodes()&&(k=e.childNodes.length-1,e=e.childNodes[f>
k?k:f],e.nodeType==3&&(f=0));if(g.nodeType==1&&g.hasChildNodes()&&(k=g.childNodes.length-1,g=g.childNodes[i>k?k:i-1],g.nodeType==3))i=g.nodeValue.length;if(r(e.parentNode))e=e.parentNode;r(e)&&(e=e.nextSibling||e);if(r(g.parentNode))i=q.nodeIndex(g),g=g.parentNode;if(r(g)&&g.previousSibling)g=g.previousSibling,i=g.length;if(b[0].inline&&(k=d(g,i),k.node)){for(;k.node&&k.offset===0&&k.node.previousSibling;)k=d(k.node.previousSibling);if(k.node&&k.offset>0&&k.node.nodeType===3&&k.node.nodeValue.charAt(k.offset-
1)===" ")if(k.offset>1)g=k.node,g.splitText(k.offset-1);else if(k.node.previousSibling)g=k.node.previousSibling}if(b[0].inline||b[0].block_expand)e=c(e,"firstChild","nextSibling"),g=c(g,"lastChild","previousSibling");b[0].selector&&b[0].expand!==I&&!b[0].inline&&(k=function(c,d){var e,f,g,h;c.nodeType==3&&c.nodeValue.length==0&&c[d]&&(c=c[d]);e=q.getParents(c,void 0,q.getRoot());for(f=0;f<e.length;f++)for(g=0;g<b.length;g++)if(h=b[g],!("collapsed"in h&&h.collapsed!==a.collapsed)&&q.is(e[f],h.selector))return e[f];
return c},e=k(e,"previousSibling"),g=k(g,"nextSibling"));if(b[0].block||b[0].selector)k=function(a,c){var d;b[0].wrapper||(d=q.getParent(a,b[0].block));d||(d=q.getParent(a.nodeType==3?a.parentNode:a,F));d&&b[0].wrapper&&(d=q.getParents(d,"ul,ol",q.getRoot()).reverse()[0]||d);if(!d)for(d=a;d[c]&&!F(d[c]);)if(d=d[c],m(d,"br"))break;return d||a},e=k(e,"previousSibling"),g=k(g,"nextSibling"),b[0].block&&(F(e)||(e=c(e,"firstChild","nextSibling")),F(g)||(g=c(g,"lastChild","previousSibling")));if(e.nodeType==
1)f=M(e),e=e.parentNode;if(g.nodeType==1)i=M(g)+1,g=g.parentNode;return{startContainer:e,startOffset:f,endContainer:g,endOffset:i}}function l(a,b,c,d){var f,g,h;if(!k(c,a))return I;if(a.remove!="all"){v(a.styles,function(a,f){a=e(a,b);typeof f==="number"&&(f=a,d=0);(!d||m(o(d,f),a))&&q.setStyle(c,f,"");h=1});h&&q.getAttrib(c,"style")==""&&(c.removeAttribute("style"),c.removeAttribute("data-mce-style"));v(a.attributes,function(a,f){var g,a=e(a,b);typeof f==="number"&&(f=a,d=0);if(!d||m(q.getAttrib(d,
f),a)){if(f=="class"&&(a=q.getAttrib(c,f)))if(g="",v(a.split(/\s+/),function(a){/mce\w+/.test(a)&&(g+=(g?" ":"")+a)}),g){q.setAttrib(c,f,g);return}f=="class"&&c.removeAttribute("className");P.test(f)&&c.removeAttribute("data-mce-"+f);c.removeAttribute(f)}});v(a.classes,function(a){a=e(a,b);(!d||q.hasClass(d,a))&&q.removeClass(c,a)});g=q.getAttribs(c);for(f=0;f<g.length;f++)if(g[f].nodeName.indexOf("_")!==0)return I}if(a.remove!="none")return s(c,a),E}function s(a,b){var d=a.parentNode,e;if(b.block)if(K)d==
q.getRoot()&&(!b.list_block||!m(a,b.list_block))&&v(c.grep(a.childNodes),function(a){H(K,a.nodeName.toLowerCase())?e?e.appendChild(a):e=p(a,K):e=0});else{var f=function(a,b,c){a=B(a,b,c);return!a||a.nodeName=="BR"||F(a)};F(a)&&!F(d)&&(!f(a,I)&&!f(a.firstChild,E,1)&&a.insertBefore(q.create("br"),a.firstChild),!f(a,E)&&!f(a.lastChild,I,1)&&a.appendChild(q.create("br")))}(!b.selector||!b.inline||m(b.inline,a))&&q.remove(a,1)}function B(a,b,c){if(a){b=b?"nextSibling":"previousSibling";for(a=c?a:a[b];a;a=
a[b])if(a.nodeType==1||!h(a))return a}}function r(a){return a&&a.nodeType==1&&a.getAttribute("data-mce-type")=="bookmark"}function t(a,b){function d(a,b){function c(a){var b={};v(q.getAttribs(a),function(c){c=c.nodeName.toLowerCase();c.indexOf("_")!==0&&c!=="style"&&(b[c]=q.getAttrib(a,c))});return b}function e(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){c=b[d];if(c===L)return I;if(a[d]!=c)return I;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return I;return E}if(a.nodeName!=b.nodeName)return I;
if(!e(c(a),c(b)))return I;if(!e(q.parseStyle(q.getAttrib(a,"style")),q.parseStyle(q.getAttrib(b,"style"))))return I;return E}var e,f;if(a&&b&&(f=function(a,b){for(e=a;e;e=e[b]){if(e.nodeType==3&&e.nodeValue.length!==0)break;if(e.nodeType==1&&!r(e))return e}return a},a=f(a,"previousSibling"),b=f(b,"nextSibling"),d(a,b))){for(e=a.nextSibling;e&&e!=b;)f=e,e=e.nextSibling,a.appendChild(f);q.remove(b);v(c.grep(b.childNodes),function(b){a.appendChild(b)});return a}return b}function y(a,b){var c,d,e;c=a[b?
"startContainer":"endContainer"];d=a[b?"startOffset":"endOffset"];c.nodeType==1&&(e=c.childNodes.length-1,!b&&d&&d--,c=c.childNodes[d>e?e:d]);return c}function z(b,d,e){function g(){return G.apply.length||G.remove.length}function h(b){v(G.apply.reverse(),function(c){a(c.name,c.vars,b);c.name==="forecolor"&&c.vars.value&&O(b.parentNode)});v(G.remove.reverse(),function(a){f(a.name,a.vars,b)});q.remove(b,1);G.apply=[];G.remove=[]}for(var k=G[b],l=G[b=="apply"?"remove":"apply"],b=k.length-1;b>=0;b--)if(k[b].name==
d)return;k.push({name:d,vars:e});for(b=l.length-1;b>=0;b--)l[b].name==d&&l.splice(b,1);if(g()&&(i.getDoc().execCommand("FontName",!1,"mceinline"),G.lastRng=A.getRng(),v(q.select("font,span"),function(a){var b;j(a)&&(b=A.getBookmark(),h(a),A.moveToBookmark(b),i.nodeChanged())}),!G.isListening&&g()))G.isListening=!0,v("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(a){i[a].addToTop(function(a,b){if(g()&&!c.dom.RangeUtils.compareRanges(G.lastRng,A.getRng())&&(v(q.select("font,span"),function(b){var c;
if(j(b))(c=b.firstChild)?(h(b),b=q.createRng(),b.setStart(c,c.nodeValue.length),b.setEnd(c,c.nodeValue.length),A.setRng(b),a.nodeChanged()):q.remove(b)}),b.type=="keyup"||b.type=="mouseup"))G.apply=[],G.remove=[]})})}var x={},v=c.each,q=i.dom,A=i.selection,D=c.dom.TreeWalker,C=new c.dom.RangeUtils(q),H=i.schema.isValidChild,F=q.isBlock,K=i.settings.forced_root_block,M=q.nodeIndex,N="\ufeff",P=/^(src|href|style)$/,I=!1,E=!0,L,G={apply:[],remove:[]},Q=function(a){var b;i.dom.getParent(a,function(a){return(b=
i.dom.getStyle(a,"text-decoration"))&&b!=="none"});return b},O=function(a){var b;a.nodeType===1&&a.parentNode&&a.parentNode.nodeType===1&&(b=Q(a.parentNode),i.dom.getStyle(a,"color")&&b?i.dom.setStyle(a,"text-decoration",b):i.dom.getStyle(a,"textdecoration")===b&&i.dom.setStyle(a,"text-decoration",null))};c.extend(this,{get:g,register:b,apply:a,remove:f,toggle:function(b,c,d){var e=g(b);n(b,c,d)&&(!("toggle"in e[0])||e[0].toggle)?f(b,c,d):a(b,c,d)},match:n,matchAll:function(a,b){var c,e=[],f={},g,
h;if(A.isCollapsed()){for(g=0;g<a.length;g++)for(c=G.remove.length-1;c>=0;c--)if(h=a[g],G.remove[c].name==h){f[h]=!0;break}for(c=G.apply.length-1;c>=0;c--)for(g=0;g<a.length;g++)h=a[g],!f[h]&&G.apply[c].name==h&&(f[h]=!0,e.push(h))}c=A.getStart();q.getParent(c,function(c){var g,h;for(g=0;g<a.length;g++)h=a[g],!f[h]&&d(c,h,b)&&(f[h]=!0,e.push(h))});return e},matchNode:d,canApply:function(a){var a=g(a),b,c,d,e;if(a){b=A.getStart();b=q.getParents(b,void 0,q.getRoot());for(d=a.length-1;d>=0;d--){e=a[d].selector;
if(!e)return E;for(c=b.length-1;c>=0;c--)if(q.is(b[c],e))return E}}return I}})}})(tinymce);
tinymce.onAddEditor.add(function(c,i){var j,g,b,a=i.settings;if(a.inline_styles){g=c.explode(a.font_size_style_values);var f=function(a,d){c.each(d,function(c,d){c&&b.setStyle(a,d,c)});b.rename(a,"span")};j={font:function(a,b){f(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:g[parseInt(b.size)-1]})},u:function(a,b){f(b,{textDecoration:"underline"})},strike:function(a,b){f(b,{textDecoration:"line-through"})}};var d=function(d,f){b=d.dom;a.convert_fonts_to_spans&&
c.each(b.select("font,u,strike",f.node),function(a){j[a.nodeName.toLowerCase()](i.dom,a)})};i.onPreProcess.add(d);i.onSetContent.add(d);i.onInit.add(function(){i.selection.onSetContent.add(d)})}});
